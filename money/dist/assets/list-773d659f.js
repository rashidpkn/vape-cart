import{aN as B,bv as D,bi as L,D as r,bj as U,ay as b,af as s,aB as A,aw as P,ax as k,az as j,aI as E,aK as I,am as N,aL as z,aU as O,cZ as W,bJ as _,aW as H,bp as q,bz as Z,bA as J,bB as K,aZ as V}from"./index-b2d29002.js";import{C as $}from"./custom-breadcrumbs-eefc6b9c.js";import"./user-new-edit-form-49c0880b.js";import{C as G}from"./confirm-dialog-2bfb5570.js";import{u as M,g as Q,e as X}from"./use-table-f07930d2.js";import{c as Y,b as ee,e as se,f as te,d as ae}from"./table-pagination-custom-0d04c63d.js";import{e as oe,f as le,g as ne}from"./profile-followers-82e4d864.js";import{T as re,a as ie,b as de}from"./TableContainer-d3096834.js";import"./form-provider-15823880.js";import"./format-number-129f8896.js";import"./Switch-016abbf4.js";import"./transition-bee6630b.js";import"./Checkbox-b07724f1.js";import"./image-0ae3fe22.js";import"./Chip-eca40d5c.js";import"./Autocomplete-4689974f.js";import"./Close-26e77fc6.js";import"./yup-03c81077.js";import"./CircularProgress-27d3ba42.js";import"./use-params-40367662.js";import"./DialogTitle-d53e5acf.js";import"./DialogContent-31c26888.js";import"./Alert-cc58631a.js";import"./api-3aac980b.js";import"./axios-e0d8a382.js";import"./AvatarGroup-880242d4.js";import"./Fab-cfd640f6.js";import"./lightbox-f4f8657b.js";const ce=[{value:"all",label:"All"}],he=[{id:"name",label:"Name"},{id:"phoneNumber",label:"Phone Number",width:180},{id:"Store Name",label:"Store Name",width:120},{id:"tradeLicense",label:"Trade License",width:180},{id:"contactPersonInTouch",label:"Contact Person In Touch",width:220},{id:"",width:88}],w={name:"",role:[],status:"all"};function me(){const e=M(),x=B(),m=D(),i=L(),[o,c]=r.useState([]),u=async()=>{const t=await Z(J(K,"users")),l=[];t.forEach(h=>{l.push(h.data())}),console.log(l),c(l)};r.useEffect(()=>{u()},[]);const[a,d]=r.useState(w),n=ue({inputData:o,comparator:Q(e.order,e.orderBy),filters:a}),g=n.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),C=e.dense?52:72,f=!U(w,a),R=!n.length&&f||!n.length,p=r.useCallback((t,l)=>{e.onResetPage(),d(h=>({...h,[t]:l}))},[e]),T=r.useCallback(t=>{const l=o.filter(h=>h.id!==t);c(l),e.onUpdatePageDeleteRow(g.length)},[g.length,e,o]),S=r.useCallback(()=>{const t=o.filter(l=>!e.selected.includes(l.id));c(t),e.onUpdatePageDeleteRows({totalRows:o.length,totalRowsInPage:g.length,totalRowsFiltered:n.length})},[n.length,g.length,e,o]),F=r.useCallback(t=>{m.push(b.dashboard.user.edit(t))},[m]),v=r.useCallback((t,l)=>{p("status",l)},[p]),y=r.useCallback(()=>{d(w)},[]);return s.jsxs(s.Fragment,{children:[s.jsxs(A,{maxWidth:x.themeStretch?!1:"lg",children:[s.jsx($,{heading:"Store",links:[{name:"Dashboard",href:b.dashboard.root},{name:"Store",href:b.dashboard.user.root}],action:s.jsx(P,{component:k,href:b.dashboard.user.new,variant:"contained",startIcon:s.jsx(j,{icon:"mingcute:add-line"}),children:"New User"}),sx:{mb:{xs:3,md:5}}}),s.jsxs(E,{children:[s.jsx(I,{value:a.status,onChange:v,sx:{px:2.5,boxShadow:t=>`inset 0 -2px 0 0 ${N(t.palette.grey[500],.08)}`},children:ce.map(t=>s.jsx(z,{iconPosition:"end",value:t.value,label:t.label,icon:s.jsx(O,{variant:(t.value==="all"||t.value===a.status)&&"filled"||"soft",children:t.value==="all"&&o.length})},t.value))}),s.jsx(oe,{filters:a,onFilters:p,roleOptions:W}),f&&s.jsx(le,{filters:a,onFilters:p,onResetFilters:y,results:n.length,sx:{p:2.5,pt:0}}),s.jsxs(re,{sx:{position:"relative",overflow:"unset"},children:[s.jsx(Y,{dense:e.dense,numSelected:e.selected.length,rowCount:o.length,onSelectAllRows:t=>e.onSelectAllRows(t,o.map(l=>l.id)),action:s.jsx(_,{title:"Delete",children:s.jsx(H,{color:"primary",onClick:i.onTrue,children:s.jsx(j,{icon:"solar:trash-bin-trash-bold"})})})}),s.jsx(q,{children:s.jsxs(ie,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[s.jsx(ee,{order:e.order,orderBy:e.orderBy,headLabel:he,rowCount:o.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,o.map(l=>l.id))}),s.jsxs(de,{children:[n.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(t=>s.jsx(ne,{row:t,selected:e.selected.includes(t.id),onSelectRow:()=>e.onSelectRow(t.id),onDeleteRow:()=>T(t.id),onEditRow:()=>F(t.id)},t.id)),s.jsx(se,{height:C,emptyRows:X(e.page,e.rowsPerPage,o.length)}),s.jsx(te,{notFound:R})]})]})})]}),s.jsx(ae,{count:n.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),s.jsx(G,{open:i.value,onClose:i.onFalse,title:"Delete",content:s.jsxs(s.Fragment,{children:["Are you sure want to delete ",s.jsxs("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:s.jsx(P,{variant:"contained",color:"error",onClick:()=>{S(),i.onFalse()},children:"Delete"})})]})}function ue({inputData:e,comparator:x,filters:m}){const{name:i,status:o,role:c}=m,u=e.map((a,d)=>[a,d]);return u.sort((a,d)=>{const n=x(a[0],d[0]);return n!==0?n:a[1]-d[1]}),e=u.map(a=>a[0]),i&&(e=e.filter(a=>a.name.toLowerCase().indexOf(i.toLowerCase())!==-1)),o!=="all"&&(e=e.filter(a=>a.status===o)),c.length&&(e=e.filter(a=>c.includes(a.role))),e}function He(){return s.jsxs(s.Fragment,{children:[s.jsx(V,{children:s.jsx("title",{children:" Dashboard: User List"})}),s.jsx(me,{})]})}export{He as default};
