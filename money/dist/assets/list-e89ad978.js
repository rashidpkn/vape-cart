import{aA as y,bz as B,a4 as l,bA as D,aB as k,a$ as m,p as w,j as t,aT as F,bB as A,aS as E,bC as L,bD as O,b4 as I,bE as v,bp as _,aK as H,aL as U,a_ as q,b5 as z,b6 as V,b7 as G,bF as K,bG as N,bH as W,bI as $,B as J,b1 as M,b2 as Q,b3 as X,bJ as Y,W as Z}from"./index-f9c7bd8e.js";const ee=[{id:"name",label:"Product"},{id:"Partner",label:"Partner"},{id:"createdAt",label:"Create at",width:160},{id:"inventoryType",label:"Stock",width:160},{id:"price",label:"Price",width:140},{id:"sales Price",label:"Sales Price",width:140},{id:"publish",label:"Publish",width:110},{id:"",width:88}],te=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],se={name:"",stock:[]};function ae(){const r=y(),e=B(),[n,d]=l.useState([]),[i,b]=l.useState(se),{productsLoading:o}=D(),[c,g]=l.useState([]),x=async()=>{const s=await M(Q(X,"users")),a=[];s.forEach(u=>{a.push(u.data())}),g(a)};l.useEffect(()=>{x()},[]),l.useEffect(()=>{(async()=>{try{const{data:{products:a}}=await m.get("products",{params:{perPage:1e4}});d(a)}catch{alert("error Occure")}})()},[]);const p=k(),h=oe({inputData:n,comparator:Y(e.order,e.orderBy),filters:i}),P=h.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),f=e.dense?60:80,C=l.useCallback((s,a)=>{e.onResetPage(),b(u=>({...u,[s]:a}))},[e]),j=l.useCallback(async s=>{try{await m.delete(`products/${s}`);const a=n.filter(u=>u.id!==s);d(a),e.onUpdatePageDeleteRow(P.length)}catch(a){alert(a.response.data.message)}},[P.length,e,n]),R=l.useCallback(async()=>{try{await m.delete("products",{data:{ids:e.selected}});const s=n.filter(a=>!e.selected.includes(a.id));d(s),e.onUpdatePageDeleteRows({totalRows:n.length,totalRowsInPage:P.length,totalRowsFiltered:h.length})}catch(s){alert(s.response.data.message)}},[h.length,P.length,e,n]),S=l.useCallback(s=>{r.push(w.dashboard.product.edit(s))},[r]),T=l.useCallback(s=>{r.push(w.dashboard.product.details(s))},[r]);return t.jsxs(t.Fragment,{children:[t.jsxs(F,{px:5,children:[t.jsx(A,{heading:"Products",links:[{name:"Dashboard",href:w.dashboard.root},{name:"Products",href:w.dashboard.product.root}],sx:{mb:{xs:3,md:5}}}),t.jsxs(E,{children:[t.jsx(L,{filters:i,onFilters:C,stockOptions:O,publishOptions:te}),t.jsxs(I,{sx:{position:"relative",overflow:"unset"},children:[t.jsx(v,{dense:e.dense,numSelected:e.selected.length,rowCount:n.length,onSelectAllRows:s=>e.onSelectAllRows(s,n.map(a=>a.id)),action:t.jsx(_,{title:"Delete",children:t.jsx(H,{color:"primary",onClick:p.onTrue,children:t.jsx(U,{icon:"solar:trash-bin-trash-bold"})})})}),t.jsx(q,{children:t.jsxs(z,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[t.jsx(V,{order:e.order,orderBy:e.orderBy,headLabel:ee,rowCount:n.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:s=>e.onSelectAllRows(s,n.map(a=>a.id))}),t.jsx(G,{children:o?[...Array(e.rowsPerPage)].map((s,a)=>t.jsx(K,{sx:{height:f}},a)):t.jsx(t.Fragment,{children:h.map(s=>t.jsx(N,{row:s,selected:e.selected.includes(s.id),onSelectRow:()=>e.onSelectRow(s.id),onDeleteRow:()=>j(s.id),onEditRow:()=>S(s.id),onViewRow:()=>T(s.id),partner:c.find(a=>a.uid===s.userId)},s.id))})})]})})]}),t.jsx(W,{count:h.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),t.jsx($,{open:p.value,onClose:p.onFalse,title:"Delete",content:t.jsxs(t.Fragment,{children:["Are you sure want to delete ",t.jsxs("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:t.jsx(J,{variant:"contained",color:"error",onClick:()=>{R(),p.onFalse()},children:"Delete"})})]})}function oe({inputData:r,comparator:e,filters:n}){const{name:d,stock:i}=n,b=r.map((o,c)=>[o,c]);return b.sort((o,c)=>{const g=e(o[0],c[0]);return g!==0?g:o[1]-c[1]}),r=b.map(o=>o[0]),d&&(r=r.filter(o=>o.name.toLowerCase().indexOf(d.toLowerCase())!==-1)),i.length&&(r=r.filter(o=>i[0]==="in stock"?!!o.quantity:!o.quantity)),r}function ne(){return t.jsxs(t.Fragment,{children:[t.jsx(Z,{children:t.jsx("title",{children:" Dashboard: Product List"})}),t.jsx(ae,{})]})}export{ne as default};
