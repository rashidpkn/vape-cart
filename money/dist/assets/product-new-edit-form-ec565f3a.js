import{j as e,bK as ae,bL as D,aT as w,a4 as h,bM as be,a$ as O,az as de,bN as S,g as C,aS as N,S as U,bO as Y,bP as ge,bQ as te,aI as _,bR as A,bS as z,B as F,bT as ue,bU as me,bV as Q,aJ as le,b8 as pe,b9 as f,bW as xe,aA as je,bX as fe,bY as ye,aC as re,aD as y,bZ as I,b_ as Se,b$ as Z,aE as ve,aH as ke,p as Ce,aW as oe,aM as ce,b5 as we,b7 as Ie,aG as Ae,c0 as Te}from"./index-87a1c844.js";import{A as W}from"./Alert-240586c4.js";const De=["Simple","Variable"],qe=["Disposables","Vape Liquids","Salt Nicotine","Accessories","Vape Devices","Pod Systems","Nicotine Pouches","Pods & Coils","Batteries","Tanks","Others"],Re=["New Collection","Limited Edition","Bestseller","Exclusive","Hot Deal","Trending Now","Seasonal Special","Eco-Friendly","On Sale","Clearance","Customer Favorite","Top Rated","Holiday Special","Gift Ideas","Must-Have","Limited Stock","Featured Product","Editor's Pick","Just Arrived","Back in Stock","Special Offer","Staff Picks","Flash Sale","Popular Choice","Best Value"],Be=["SMOK","Vaporesso","GeekVape","Voopoo","Innokin","Uwell","Aspire","Eleaf","Lost Vape","Joyetech","Wismec","Freemax","Suorin","iJoy","Rincoe","Augvape","Vandy Vape","OBS","Hellvape","Teslacigs","Artery","Dovpo","Vaptio","Kangertech","Digiflavor","Sigelei","Smoant","Pioneer4You","Vapor Storm","Hugo Vapor"],Oe=["Published","Draft","Hidden"],Ee=["bottleSize","puffs","flavour","nicotineStrength","color","batteries","Option"],E={bottleSize:[10,15,30,50,60,100,120].map(a=>`${a} ml`),puffs:[500,1e3,1500,2e3,2500,3e3,3500,4e3,4500,5e3,5500,6500,7e3,7500,8e3,8500,9e3,9500,1e4].map(a=>`${a} puffs`),flavour:["Strawberry","Blueberry","Raspberry","Watermelon","Apple","Peach","Pineapple","Grape","Mango","Kiwi","Cherry","Banana","Lemon","Lime","Orange","Mixed Berries","Menthol","Peppermint","Spearmint","Ice Menthol","Minty Menthol","Cool Mint","Traditional Tobacco","American Blend","Virginia Tobacco","Turkish Tobacco","Cuban Cigar","Pipe Tobacco","Vanilla Custard","Chocolate Cake","Caramel","Butterscotch","Cheesecake","Tiramisu","Maple Syrup","Cookies and Cream","Pudding","Ice Cream","Bubblegum","Cotton Candy","Gummy Bear","Candy Cane","Marshmallow","Rock Candy","Toffee","Coffee","Cappuccino","Espresso","Latte","Cola","Energy Drink","Mojito","Lemonade","Iced Tea","Smoothie","Creamy Vanilla","Strawberry Cream","Coconut Cream","Hazelnut Cream","Irish Cream","Sugar Cookie","Blueberry Muffin","Donut","Pancake","Waffle","Pie Crust","Sour Apple","Sour Watermelon","Sour Cherry","Sour Lemon","Almond","Hazelnut","Peanut Butter","Pistachio","Walnut","Cinnamon","Clove","Gingerbread","Green Tea","Chamomile","Lavender","Eucalyptus"],nicotineStrength:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50].map(a=>`${a} mg`),color:["Black","Silver","White","Blue","Red","Green","Pink","Purple","Gold","Rainbow/Multicolor","Gunmetal/Gray","Yellow","Orange","Brown","Clear/Transparent"],batteries:["Single","Dual","Built-in","Triple","Quad"]},ee=["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];function Fe({values:a,products:s,setValue:r}){return e.jsx(ae,{value:a.name,onChange:(n,t)=>{if(t){const d=s.find(m=>m.name===t);d&&(r("images",d.images),r("name",d.name),r("category",d.category),r("brand",d.brand),r("type",d.type))}},name:"name",label:"Product Name",options:s.map(n=>n.name),getOptionLabel:n=>n,isOptionEqualToValue:(n,t)=>n===t.value,renderInput:n=>e.jsx(D,{...n,label:"Product Name",value:a.name,onChange:t=>r("name",t.target.value)}),renderOption:(n,t)=>e.jsxs(w,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...n,children:[e.jsx("img",{loading:"lazy",width:"20",src:s.find(d=>d.name===t).images[0],alt:""}),t]}),freeSolo:!0})}function Ue({setValue:a,values:s}){const r=h.useCallback(d=>{const m=s.images||[],i=d.map(l=>Object.assign(l,{preview:URL.createObjectURL(l)}));a("images",[...m,...i],{shouldValidate:!0})},[a,s.images]),n=h.useCallback(d=>{var i;const m=s.images&&((i=s.images)==null?void 0:i.filter(l=>l!==d));a("images",m)},[a,s.images]),t=h.useCallback(()=>{a("images",[])},[a]);return e.jsx(be,{multiple:!0,name:"images",maxSize:3145728,onDrop:r,onRemove:n,onRemoveAll:t,onUpload:async d=>{try{const m=new FormData;s.images.forEach(l=>{m.append("images",l)});const{data:i}=await O.post("upload",m);a("images",i),alert("Image upload complete.")}catch{alert(" Image upload failed, try again.")}}})}function Le({values:a,setValue:s}){const{user:r}=de(),[n,t]=h.useState({name:"",show:!1}),[d,m]=h.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(S,{md:12,width:"100%",item:!0,children:[e.jsx(C,{variant:"h6",sx:{mb:.5},children:"Key Properties"}),e.jsx(C,{variant:"body2",sx:{color:"text.secondary"},children:"Additional functions and attributes..."})]}),e.jsx(S,{xs:12,md:12,width:"100%",item:!0,children:e.jsx(N,{children:e.jsx(U,{spacing:3,sx:{p:3},children:e.jsxs(w,{columnGap:2,rowGap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsx(Y,{native:!0,name:"type",label:"Product Type",InputLabelProps:{shrink:!0},children:De.map(i=>e.jsx("option",{value:i,children:i},i))}),e.jsx(Y,{native:!0,name:"category",label:"Category",InputLabelProps:{shrink:!0},children:qe.map(i=>e.jsx("option",{value:i,children:i},i))}),e.jsx(ge,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,options:Re.map(i=>i),getOptionLabel:i=>i,renderOption:(i,l)=>h.createElement("li",{...i,key:l},l),renderTags:(i,l)=>i.map((o,g)=>h.createElement(te,{...l({index:g}),key:o,label:o,size:"small",color:"info",variant:"soft"}))}),e.jsxs(w,{children:[e.jsx(_,{name:"SKU",label:"Product SKU"}),e.jsx(A,{label:"Automatically generate SKUs",control:e.jsx(z,{checked:d,onChange:i=>{i.target.checked?a.name.replaceAll(" ","").trim().length>=8?(s("SKU",`${a.name.replaceAll(" ","").trim().slice(0,8)}-1`),m(!0)):(m(!1),alert("To automatically generate SKUs, ensure that the product name has at least 8 characters.")):(s("SKU",""),m(!1))}})})]}),!n.show&&e.jsx(Y,{native:!0,name:"brand",label:"Brand",InputLabelProps:{shrink:!0},children:Be.map(i=>e.jsx("option",{value:i,children:i},i))}),e.jsxs(w,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(A,{sx:{width:190},label:"Is your brand missing? Click here to add it.",control:e.jsx(z,{checked:n.show,onChange:i=>t(l=>({...l,show:i.target.checked}))})}),n.show&&e.jsxs(e.Fragment,{children:[e.jsx(D,{label:"Brand Name",style:{width:300},onChange:i=>t(l=>({...l,name:i.target.value})),value:n.name}),e.jsx(F,{variant:"contained",color:"success",onClick:async()=>{try{n.name?(await O.post("/notifications",{userId:r.id,role:"admin",title:"ðŸš€ New Brand Approval Request! ðŸš€",message:`Exciting news! A new brand has been submitted for approval. Brand Name: ${n.name}. ðŸ›ï¸`,type:"product"}),s("brand",n.name),s("status","In Revision"),alert("Your request to create a new brand is being processed. Please wait while we verify the brand. You can add products, but their status will be 'In Revision.' After reviewing, the products will go live.")):alert("Please enter brand name")}catch(i){console.log(i),alert("An error occurred while adding this brand.")}},children:"Add Brand"})]})]}),a.status!=="In Revision"&&e.jsx(Y,{native:!0,name:"status",label:"status",InputLabelProps:{shrink:!0},children:Oe.map(i=>e.jsx("option",{value:i,children:i},i))})]})})})})]})}function Ne({values:a,setValue:s}){return console.log(a),e.jsxs(e.Fragment,{children:[e.jsxs(S,{md:4,width:"100%",item:!0,children:[e.jsx(C,{variant:"h6",sx:{mb:.5},children:"Pricing"}),e.jsx(C,{variant:"body2",sx:{color:"text.secondary"},children:"Price related inputs"})]}),e.jsx(S,{xs:12,md:12,width:"100%",item:!0,children:e.jsx(N,{children:e.jsxs(U,{spacing:3,sx:{p:3},children:[e.jsx(A,{label:"Track Stock",control:e.jsx(z,{defaultChecked:a.track,checked:a.track,onChange:r=>{s("track",r.target.checked),r.target.checked&&s("availability","In Stock")}})}),a.track&&e.jsx(D,{value:a.quantity,onChange:r=>{const n=Math.max(0,Number(r.target.value));s("quantity",n),s("availability","In Stock")},label:"Quantity",placeholder:"0.00",type:"number",inputProps:{min:0}}),!a.track&&e.jsx(ue,{children:e.jsxs(me,{value:a.availability,row:!0,onChange:r=>{s("availability",r.target.value),r.target.value==="In Stock"?s("quantity",100):s("quantity",0)},children:[e.jsx(A,{value:"In Stock",control:e.jsx(Q,{}),label:"In Stock"}),e.jsx(A,{value:"Out Stock",control:e.jsx(Q,{}),label:"Out Stock"})]})}),e.jsx(_,{name:"regularPrice",label:"Regular Price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(le,{position:"start",children:e.jsx(w,{component:"span",sx:{color:"text.disabled"},children:"AED"})})}}),e.jsx(_,{name:"salePrice",label:"Sale Price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(le,{position:"start",children:e.jsx(w,{component:"span",sx:{color:"text.disabled"},children:"AED"})})}})]})})})]})}function ze({selectedAttributes:a=[],counter:s,skuAlpha:r,attributes:n,values:t,currentProduct:d,setValue:m}){const i=r[s]?`${t.SKU}-${r[s]}`:t.SKU,l=!!n&&Object.keys(n).map(b=>n[b]).join("-"),[o,g]=h.useState({track:!0,availability:"In Stock",quantity:null,regularPrice:null,salePrice:null,image:null,attributes:{}});h.useEffect(()=>{const b=t.variations.findIndex(p=>!!n&&Object.keys(n).every(j=>n[j]===p.attributes[j]));if(Object.keys(o.attributes).length<a.length){const p=t.variations[b];g(j=>({...j,...p,attributes:n}))}},[n]),h.useState("instock");const[u,q]=h.useState("pending"),L=b=>p=>{const j=p.target.type==="checkbox"?p.target.checked:p.target.value;g(v=>({...v,[b]:j}))},ie=async b=>{try{const p=new FormData;p.append("images",b.target.files[0]);const{data:j}=await O.post("upload",p);g(v=>({...v,image:[j[0],...t.images]}))}catch(p){console.error("Image upload failed:",p)}},x=async()=>{let{track:b,quantity:p,regularPrice:j,salePrice:v}=o;if(v=Number(v),j=Number(j),p=Number(p),b&&!p)return alert("Quantity is required.");if(!j||!v)return alert("Sale Price and regular price are mandatory.");if(v>j)return alert("Sale price must be less than the regular price");if(u==="pending"){q("loading");try{if(!d)m("variations",[...t.variations,o]);else{const{attributes:T}=o;if(t.variations.some(R=>Object.keys(T).every(B=>R.attributes[B]===T[B]))){const R=[...t.variations],B=t.variations.findIndex(M=>Object.keys(T).every(G=>T[G]===M.attributes[G]));R[B]={...R[B],...o},m("variations",R)}else m("variations",[...t.variations,o])}q("success")}catch(T){console.error("Product creation failed:",T),q("failed")}}},J=()=>{switch(u){case"loading":return e.jsx(F,{color:"success",variant:"contained",size:"small",children:"Loading"});case"success":return d?e.jsx(F,{color:"success",variant:"contained",size:"small",children:"Product Updated"}):e.jsx(F,{color:"success",variant:"contained",size:"small",children:"Product Created"});case"failed":return e.jsx(F,{color:"error",variant:"contained",size:"small",children:"Product creation failed"});default:return e.jsx(F,{color:"success",variant:"contained",size:"small",onClick:x,children:d?"Save Changes":"Add Product"})}},{track:K,quantity:P,regularPrice:V,salePrice:X,image:se}=o;return e.jsxs(pe,{children:[e.jsx(f,{children:s}),e.jsx(f,{children:i}),e.jsx(f,{children:l}),e.jsx(f,{children:e.jsx(A,{control:e.jsx(z,{checked:K,onChange:b=>g(p=>({...p,track:b.target.checked,availability:"In Stock"}))})})}),e.jsx(f,{width:150,children:K?e.jsx(D,{size:"small",label:"Quantity",type:"number",inputProps:{min:0},onChange:b=>g(p=>({...p,quantity:+b.target.value})),value:P||""}):e.jsxs(me,{"aria-label":"Stock",name:"Stock",value:o.availability,onChange:b=>g(p=>({...p,availability:b.target.value,quantity:b.target.value==="In Stock"?100:0})),children:[e.jsx(A,{value:"In Stock",control:e.jsx(Q,{}),label:"In Stock"}),e.jsx(A,{value:"Out Stock",control:e.jsx(Q,{}),label:"Out Stock"})]})}),e.jsx(f,{width:150,children:e.jsx(D,{size:"small",label:"Price",type:"number",inputProps:{min:0},onChange:L("regularPrice"),value:V||""})}),e.jsx(f,{width:150,children:e.jsx(D,{size:"small",label:"Sale Price",type:"number",inputProps:{min:0},onChange:L("salePrice"),value:X||""})}),e.jsx(f,{width:150,children:e.jsx("input",{type:"file",onChange:ie,style:{width:"150px"}})}),e.jsx(f,{children:J()})]})}function Ke(){return e.jsx(xe,{children:e.jsxs(pe,{children:[e.jsx(f,{children:"ID"}),e.jsx(f,{width:150,children:"SKU"}),e.jsx(f,{width:250,children:"Attributes"}),e.jsx(f,{width:150,children:"Track Stock"}),e.jsx(f,{children:"Stock"}),e.jsx(f,{children:"Regular Price"}),e.jsx(f,{children:"Sales Price"}),e.jsx(f,{children:"Image"}),e.jsx(f,{width:200,children:"Add Product"})]})})}function Me({setSelectedAttributes:a,selectedAttributes:s,values:r,setValue:n}){return e.jsx(ae,{onChange:(t,d)=>{a(d)},value:s,name:"attributes",label:"Attributes",placeholder:"+ Attributes",multiple:!0,options:Ee,getOptionLabel:t=>t,renderOption:(t,d)=>h.createElement("li",{...t,key:d},d),renderTags:(t,d)=>t.map((m,i)=>h.createElement(te,{...d({index:i}),key:m,label:m,size:"small",color:"info",variant:"soft"})),renderInput:t=>e.jsx(D,{...t,label:"Attributes",placeholder:"+ Attributes"})})}function Ge({currentProduct:a,values:s,setValue:r,setVariation:n,e:t,savedAttibutes:d,variation:m=[]}){var i;return e.jsxs(w,{sx:{gridColumn:"span 1 "},children:[e.jsx(ae,{multiple:!0,freeSolo:!0,options:[...t==="bottleSize"?E.bottleSize:[],...t==="puffs"?E.puffs:[],...t==="flavour"?E.flavour:[],...t==="nicotineStrength"?E.nicotineStrength:[],...t==="color"?E.color:[],...t==="batteries"?E.batteries:[],...d.filter(l=>l.attribute===t).map(l=>l.value)],value:s.attributes[t]||[],onChange:(l,o)=>{let g={...s.attributes};if(s.type==="Simple"&&t!=="flavour"){if(o.length>1){const u=[o[o.length-1]];g={...s.attributes,[t]:u}}else g={...s.attributes,[t]:o};o.length===0&&delete g[t],r("attributes",g)}else{if(m.find(q=>q===t)&&o.length===1)return alert('Please uncheck "Use this attribute to create Variations" before deleting this attribute.');const u={...s.attributes,[t]:o};o.length===0&&delete u[t],r("attributes",u)}},renderInput:l=>e.jsx(D,{...l,label:t,placeholder:t}),renderTags:(l,o)=>l.map((g,u)=>h.createElement(te,{...o({index:u}),key:g,label:g,size:"small",color:"info",variant:"soft"}))}),s.type==="Variable"&&((i=s.attributes[t])==null?void 0:i.length)>1&&e.jsx(A,{label:"Use this attribute to create Variations",control:e.jsx(z,{defaultChecked:m.find(l=>l===t),onChange:l=>{if(a)if(confirm("Changing the variation of this product will reset all current variations, and you'll have to start over from the beginning. Do you wish to proceed?"))r("variations",[]);else return;l.target.checked?n(o=>[...new Set([...o,t])]):n(o=>[...new Set(o.filter(g=>g!==t))])}})})]},t)}function Ye({currentProduct:a}){const s=je(),r=fe("up","md"),{enqueueSnackbar:n}=ye(),{user:t}=de(),d=re().shape({name:y().required("Name is required"),subDescription:y().required("Short description is required").test("not-four-digits","Your content contain continues 7 digit number, Please remove",c=>!/\d{7,}/.test(c)).test("no-at-symbol",'Your content contains the "@" symbol. Please remove it.',c=>!/@/.test(c)),content:y().test("not-four-digits","Your content contain continues 7 digit number, Please remove",c=>!/\d{7,}/.test(c)).test("no-at-symbol",'Your content contains the "@" symbol. Please remove it.',c=>!/@/.test(c)),images:I().min(1,"Image is required"),type:y(),category:y().required("Category is required"),tags:I(),SKU:y().required("SKU is required"),brand:y().required("brand is required"),status:y().required("brand is required"),attributes:re().shape({bottleSize:I().of(y()).optional(),puffs:I().of(y()).optional(),flavour:I().of(y()).optional(),nicotineStrength:I().of(y()).optional(),color:I().of(y()).optional(),batteries:I().of(y()).optional()}),track:Se(),availability:y(),quantity:Z(),regularPrice:Z(),salePrice:Z(),variations:I()}),[m,i]=h.useState({id:"",name:"",subDescription:"",content:"",images:[],type:"Simple",category:"Disposables",tags:[],SKU:"",brand:"SMOK",status:"Published",attributes:{},track:!0,availability:"In Stock",quantity:0,regularPrice:100,salePrice:0,variations:[]});h.useEffect(()=>{i({id:(a==null?void 0:a.id)||"",name:(a==null?void 0:a.name)||"",subDescription:(a==null?void 0:a.subDescription)||"",content:(a==null?void 0:a.content)||"",images:(a==null?void 0:a.images)||[],type:(a==null?void 0:a.type)||"Simple",category:(a==null?void 0:a.category)||"Disposables",tags:(a==null?void 0:a.tags)||[],SKU:(a==null?void 0:a.SKU)||"",brand:(a==null?void 0:a.brand)||"SMOK",status:(a==null?void 0:a.status)||"Published",attributes:(a==null?void 0:a.attributes)||{},track:a==null?void 0:a.track,availability:(a==null?void 0:a.availability)||"In Stock",quantity:(a==null?void 0:a.quantity)||0,regularPrice:(a==null?void 0:a.regularPrice)||100,salePrice:(a==null?void 0:a.salePrice)||0,variations:(a==null?void 0:a.variations)||[]})},[a]);const l=ve({resolver:ke(d),defaultValues:m}),{reset:o,watch:g,setValue:u,handleSubmit:q,formState:{isSubmitting:L,isValid:ie}}=l,x=g(),[J,K]=h.useState([]);h.useEffect(()=>{O.get("/attributes").then(c=>{K(c.data)})},[]);const[P,V]=h.useState([]),X=h.useCallback(async()=>{const{data:c}=await O.get("/products",{params:{name:x.name}});V(c.products.filter(k=>!k.name.includes("-")))},[x.name]);h.useEffect(()=>{X()},[x.name]),h.useEffect(()=>{a&&o(m)},[a,m,o]);const se=q(async c=>{try{if(c.type==="Simple"){if(!c.salePrice||!c.regularPrice){alert("Sale Price and regular price are mandatory");return}else if(c.salePrice>c.regularPrice){alert("Sale price must be less than the regular price");return}}a?await O.patch("products",{...c,username:t.displayName,userId:t.id,storeName:t.storeName}):await O.post("products",{...c,username:t.displayName,userId:t.id,storeName:t.storeName}),o(),n(a?"Update success!":"Create success!"),s.push(Ce.dashboard.product.root)}catch(k){console.log(k)}}),[b,p]=h.useState([]),[j,v]=h.useState([]);h.useEffect(()=>{var c;if(a){const{attributes:k,variations:H,type:$}=a;k&&p(Object.keys(k)),$==="Variable"&&H.length&&v(Object.keys((c=H[0])==null?void 0:c.attributes))}},[a]);const T=e.jsxs(e.Fragment,{children:[r&&e.jsxs(S,{md:4,item:!0,children:[e.jsx(C,{variant:"h6",sx:{mb:.5},children:"Details"}),e.jsx(C,{variant:"body2",sx:{color:"text.secondary"},children:"Title, short description, image..."})]}),e.jsx(S,{xs:12,md:12,item:!0,children:e.jsxs(N,{children:[!r&&e.jsx(oe,{title:"Details"}),e.jsxs(U,{spacing:3,sx:{p:3},children:[e.jsx(Fe,{products:P,setValue:u,values:x}),e.jsx(W,{severity:"info",children:"Please do not include emails, phone numbers, or emojis in the sub-description and content. Products containing these will not be accepted."}),e.jsx(_,{name:"subDescription",label:"Sub Description",multiline:!0,rows:4}),e.jsxs(U,{spacing:1.5,children:[e.jsx(C,{variant:"subtitle2",children:"Content"}),e.jsx(Te,{simple:!0,name:"content"})]}),e.jsx(W,{severity:"info",children:"Uploading at least one image is required."}),e.jsxs(U,{spacing:1.5,children:[e.jsx(C,{variant:"subtitle2",children:"Images"}),e.jsx(Ue,{values:x,setValue:u})]})]})]})})]}),ne=e.jsxs(e.Fragment,{children:[r&&e.jsxs(S,{md:4,item:!0,children:[e.jsx(C,{variant:"h6",sx:{mb:.5},children:"Product Attributes"}),e.jsx(C,{variant:"body2",sx:{color:"text.secondary"},children:"Additional functions and attributes..."})]}),e.jsx(S,{xs:12,md:12,item:!0,children:e.jsxs(N,{children:[!r&&e.jsx(oe,{title:"Attributes"}),e.jsx(U,{spacing:3,sx:{p:3},children:e.jsxs(w,{columnGap:2,rowGap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsx(w,{sx:{gridColumn:"span 2 "},children:x.type==="Variable"&&e.jsx(W,{severity:"info",children:"Please choose at least one attribute."})}),e.jsx(w,{sx:{gridColumn:"span 2 "},children:e.jsx(Me,{selectedAttributes:b,setSelectedAttributes:p,setValue:u,values:x})}),x.type==="Variable"&&!!b.length&&e.jsx(w,{sx:{gridColumn:"span 2 "},children:e.jsx(W,{severity:"info",children:"Please select at least two variations from the list below to enable the 'Create Variations' option."})}),b.map(c=>e.jsx(Ge,{currentProduct:a,setValue:u,setVariation:v,variation:j,values:x,e:c,savedAttibutes:J},c))]})})]})})]}),R=e.jsxs(S,{xs:12,md:8,sx:{display:"flex",alignItems:"center"},gap:2.5,item:!0,children:[e.jsx(ce,{type:"submit",variant:"contained",size:"large",loading:L,children:a?"Save Changes":"Create Product"}),x.status!=="In Revision"&&e.jsx(ce,{onClick:()=>{u("status","Draft")},type:"submit",variant:"contained",size:"large",loading:L,children:"Save as Draft"})]}),B=[...ee,...ee.slice(1).flatMap(c=>ee.slice(1).map(k=>c+k))];let M=1;const G=e.jsxs(e.Fragment,{children:[r&&e.jsx(S,{md:4,item:!0,children:e.jsx(C,{variant:"h6",sx:{mb:.5},children:"Variation Table"})}),e.jsx(S,{xs:12,md:12,item:!0,children:e.jsx(N,{children:e.jsxs(we,{children:[e.jsx(Ke,{}),e.jsx(Ie,{children:j==null?void 0:j.reduce((c,k)=>c.flatMap(H=>{var $;return($=x.attributes[k])==null?void 0:$.map(he=>({...H,[k]:he}))}),[{}]).map(c=>e.jsx(ze,{selectedAttributes:b,counter:M++,skuAlpha:B,attributes:c,values:x,currentProduct:a,setValue:u},M))})]})})})]});return e.jsx(Ae,{methods:l,onSubmit:se,children:e.jsxs(S,{container:!0,spacing:3,children:[T,e.jsx(Le,{values:x,setValue:u}),ne,x.type==="Simple"&&e.jsx(Ne,{values:x,setValue:u}),x.type==="Variable"&&G,R]})})}export{Ye as P};
