import{u as H,az as O,aA as V,a4 as s,a_ as v,p,j as e,aS as z,br as N,aR as R,aZ as P,S as D,cd as U,bp as W,aM as _,bq as q,c2 as J,bs as K,bm as g,aJ as x,aK as b,b3 as M,b4 as Z,b5 as $,cm as G,cn as Q,bt as X,B as Y,W as ee}from"./index-58c1d6b6.js";import{C as te}from"./confirm-dialog-e89759f5.js";import{e as ae}from"./utils-74d4caeb.js";import{u as le}from"./use-table-06eb58b1.js";import{I as r,a as oe,b as se}from"./invoice-details-3fd7ba60.js";import{T as ne}from"./TableContainer-a6313ec7.js";import"./DialogTitle-fb5136bb.js";import"./DialogContent-41485218.js";const ie=[{id:"invoiceNumber",label:"Customer"},{id:"createDate",label:"Create"},{id:"dueDate",label:"Due"},{id:"price",label:"Amount"},{id:"status",label:"Status"},{id:""}],C={name:"",service:[],status:"all",startDate:null,endDate:null};function re(){const i=H(),c=O(),a=le({defaultOrderBy:"createDate"}),d=V(),[l,m]=s.useState([]),S=async()=>{try{const{data:t}=await v.get("invoice");m(t)}catch{}};s.useEffect(()=>{S()},[]);const[n,w]=s.useState(C),y=a.dense?56:76,f=!!n.name||!!n.service.length||n.status!=="all"||!!n.startDate&&!!n.endDate,T=!l.length&&f||!l.length,u=t=>l.filter(o=>o.status===t).length,I=[{value:"all",label:"All",color:"default",count:l.length},{value:"paid",label:"Paid",color:"success",count:u("paid")},{value:"pending",label:"Pending",color:"warning",count:u("pending")},{value:"overdue",label:"Overdue",color:"error",count:u("overdue")},{value:"draft",label:"Draft",color:"default",count:u("draft")}],j=s.useCallback((t,o)=>{a.onResetPage(),w(h=>({...h,[t]:o}))},[a]),F=s.useCallback(t=>{v.delete("invoice",{data:{id:t}}).then(h=>{alert("Invoice in deleted")});const o=l.filter(h=>h.id!==t);m(o),a.onUpdatePageDeleteRow(l.length)},[l.length,a,l]),A=s.useCallback(()=>{v.delete("invoice",{data:{id:a.selected}}).then(o=>{alert("Invoice in deleted")});const t=l.filter(o=>!a.selected.includes(o.id));m(t),a.onUpdatePageDeleteRows({totalRows:l.length,totalRowsInPage:l.length,totalRowsFiltered:l.length})},[l.length,l.length,a,l]),k=s.useCallback(t=>{c.push(p.dashboard.invoice.edit(t))},[c]),B=s.useCallback(t=>{c.push(p.dashboard.invoice.details(t))},[c]),E=s.useCallback((t,o)=>{j("status",o)},[j]),L=s.useCallback(()=>{w(C)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(z,{px:5,children:[e.jsx(N,{heading:"Invoice",links:[{name:"Dashboard",href:p.dashboard.root},{name:"Invoice",href:p.dashboard.invoice.root}]}),e.jsx(R,{sx:{mb:{xs:3,md:5}},children:e.jsx(P,{children:e.jsxs(D,{direction:"row",divider:e.jsx(U,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[e.jsx(r,{title:"Total",total:0,percent:0,price:0,icon:"solar:bill-list-bold-duotone",color:i.palette.info.main}),e.jsx(r,{title:"Paid",total:0,percent:0,price:0,icon:"solar:file-check-bold-duotone",color:i.palette.success.main}),e.jsx(r,{title:"Pending",total:0,percent:0,price:0,icon:"solar:sort-by-time-bold-duotone",color:i.palette.warning.main}),e.jsx(r,{title:"Overdue",total:0,percent:0,price:0,icon:"solar:bell-bing-bold-duotone",color:i.palette.error.main}),e.jsx(r,{title:"Draft",total:0,percent:0,price:0,icon:"solar:file-corrupted-bold-duotone",color:i.palette.text.secondary})]})})}),e.jsxs(R,{children:[e.jsx(W,{value:n.status,onChange:E,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${_(i.palette.grey[500],.08)}`},children:I.map(t=>e.jsx(q,{value:t.value,label:t.label,iconPosition:"end",icon:e.jsx(J,{variant:(t.value==="all"||t.value===n.status)&&"filled"||"soft",color:t.color,children:"0"})},t.value))}),f&&e.jsx(oe,{filters:n,onFilters:j,onResetFilters:L,results:l.length,sx:{p:2.5,pt:0}}),e.jsxs(ne,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(K,{dense:a.dense,numSelected:a.selected.length,rowCount:l.length,onSelectAllRows:t=>a.onSelectAllRows(t,l.map(o=>o.id)),action:e.jsxs(D,{direction:"row",children:[e.jsx(g,{title:"Sent",children:e.jsx(x,{color:"primary",children:e.jsx(b,{icon:"iconamoon:send-fill"})})}),e.jsx(g,{title:"Download",children:e.jsx(x,{color:"primary",children:e.jsx(b,{icon:"eva:download-outline"})})}),e.jsx(g,{title:"Print",children:e.jsx(x,{color:"primary",children:e.jsx(b,{icon:"solar:printer-minimalistic-bold"})})}),e.jsx(g,{title:"Delete",children:e.jsx(x,{color:"primary",onClick:d.onTrue,children:e.jsx(b,{icon:"solar:trash-bin-trash-bold"})})})]})}),e.jsx(P,{children:e.jsxs(M,{size:a.dense?"small":"medium",sx:{minWidth:800},children:[e.jsx(Z,{order:a.order,orderBy:a.orderBy,headLabel:ie,rowCount:l.length,numSelected:a.selected.length,onSort:a.onSort,onSelectAllRows:t=>a.onSelectAllRows(t,l.map(o=>o.id))}),e.jsxs($,{children:[l.slice(a.page*a.rowsPerPage,a.page*a.rowsPerPage+a.rowsPerPage).map(t=>e.jsx(se,{row:t,selected:a.selected.includes(t.id),onSelectRow:()=>a.onSelectRow(t.id),onViewRow:()=>B(t.id),onEditRow:()=>k(t.id),onDeleteRow:()=>F(t.id)},t.id)),e.jsx(G,{height:y,emptyRows:ae(a.page,a.rowsPerPage,l.length)}),e.jsx(Q,{notFound:T})]})]})})]}),e.jsx(X,{count:l.length,page:a.page,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage,dense:a.dense,onChangeDense:a.onChangeDense})]})]}),e.jsx(te,{open:d.value,onClose:d.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",a.selected.length," "]})," items?"]}),action:e.jsx(Y,{variant:"contained",color:"error",onClick:()=>{A(),d.onFalse()},children:"Delete"})})]})}function me(){return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx("title",{children:" Dashboard: Invoice List"})}),e.jsx(re,{})]})}export{me as default};
