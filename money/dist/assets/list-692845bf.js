import{j as t,b6 as y,b7 as k,S as D,a4 as d,az as F,aA as L,a_ as x,p,aS as B,br as A,B as w,R as O,aK as P,aR as E,bs as I,bm as v,aJ as V,aZ as z,b3 as U,b4 as _,b5 as H,bt as N,W}from"./index-58c1d6b6.js";import{d as q,e as K}from"./product-details-description-6d0b6f21.js";import{b as G}from"./_product-fa61ef0b.js";import{S as u,u as J,f as M,e as Z}from"./lightbox-38eaca70.js";import{g as $}from"./utils-74d4caeb.js";import{u as Q}from"./use-table-06eb58b1.js";import{C as X}from"./confirm-dialog-e89759f5.js";import{T as Y}from"./TableContainer-a6313ec7.js";import"./DialogTitle-fb5136bb.js";import"./DialogContent-41485218.js";function ee({...o}){return t.jsx(y,{...o,children:t.jsx(k,{colSpan:12,children:t.jsxs(D,{spacing:3,direction:"row",alignItems:"center",children:[t.jsx(u,{sx:{borderRadius:1.5,width:48,height:48,flexShrink:0}}),t.jsx(u,{sx:{width:1,height:12}}),t.jsx(u,{sx:{width:180,height:12}}),t.jsx(u,{sx:{width:160,height:12}}),t.jsx(u,{sx:{width:140,height:12}}),t.jsx(u,{sx:{width:120,height:12}})]})})})}function te(){const o=Z.product.list,{data:e,isLoading:a,error:l,isValidating:c}=J(o,M);return d.useMemo(()=>({products:(e==null?void 0:e.products)||[],productsLoading:a,productsError:l,productsValidating:c,productsEmpty:!a&&!(e!=null&&e.products.length)}),[e==null?void 0:e.products,l,a,c])}const se=[{id:"name",label:"Product"},{id:"createdAt",label:"Create at",width:160},{id:"inventoryType",label:"Stock",width:160},{id:"price",label:"Price",width:140},{id:"sales Price",label:"Sales Price",width:140},{id:"publish",label:"Publish",width:110},{id:"",width:88}],oe=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],ae={name:"",stock:[]};function re(){const o=F(),e=Q(),[a,l]=d.useState([]),[c,g]=d.useState(ae),{productsLoading:n}=te();d.useEffect(()=>{(async()=>{try{const{data:{products:r}}=await x.get("products",{params:{perPage:1e4}});l(r)}catch{alert("error Occure")}})()},[]);const i=L(),h=ne({inputData:a,comparator:$(e.order,e.orderBy),filters:c}),m=h.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),f=e.dense?60:80,j=d.useCallback((s,r)=>{e.onResetPage(),g(b=>({...b,[s]:r}))},[e]),R=d.useCallback(async s=>{try{await x.delete(`products/${s}`);const r=a.filter(b=>b.id!==s);l(r),e.onUpdatePageDeleteRow(m.length)}catch(r){alert(r.response.data.message)}},[m.length,e,a]),C=d.useCallback(async()=>{try{await x.delete("products",{data:{ids:e.selected}});const s=a.filter(r=>!e.selected.includes(r.id));l(s),e.onUpdatePageDeleteRows({totalRows:a.length,totalRowsInPage:m.length,totalRowsFiltered:h.length})}catch(s){alert(s.response.data.message)}},[h.length,m.length,e,a]),S=d.useCallback(s=>{o.push(p.dashboard.product.edit(s))},[o]),T=d.useCallback(s=>{o.push(p.dashboard.product.details(s))},[o]);return t.jsxs(t.Fragment,{children:[t.jsxs(B,{px:5,children:[t.jsx(A,{heading:"Products",links:[{name:"Dashboard",href:p.dashboard.root},{name:"Products",href:p.dashboard.product.root}],action:t.jsx(w,{component:O,href:p.dashboard.product.new,variant:"contained",startIcon:t.jsx(P,{icon:"mingcute:add-line"}),children:"New Product"}),sx:{mb:{xs:3,md:5}}}),t.jsxs(E,{children:[t.jsx(q,{filters:c,onFilters:j,stockOptions:G,publishOptions:oe}),t.jsxs(Y,{sx:{position:"relative",overflow:"unset"},children:[t.jsx(I,{dense:e.dense,numSelected:e.selected.length,rowCount:a.length,onSelectAllRows:s=>e.onSelectAllRows(s,a.map(r=>r.id)),action:t.jsx(v,{title:"Delete",children:t.jsx(V,{color:"primary",onClick:i.onTrue,children:t.jsx(P,{icon:"solar:trash-bin-trash-bold"})})})}),t.jsx(z,{children:t.jsxs(U,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[t.jsx(_,{order:e.order,orderBy:e.orderBy,headLabel:se,rowCount:a.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:s=>e.onSelectAllRows(s,a.map(r=>r.id))}),t.jsx(H,{children:n?[...Array(e.rowsPerPage)].map((s,r)=>t.jsx(ee,{sx:{height:f}},r)):t.jsx(t.Fragment,{children:h.map(s=>t.jsx(K,{row:s,selected:e.selected.includes(s.id),onSelectRow:()=>e.onSelectRow(s.id),onDeleteRow:()=>R(s.id),onEditRow:()=>S(s.id),onViewRow:()=>T(s.id)},s.id))})})]})})]}),t.jsx(N,{count:h.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),t.jsx(X,{open:i.value,onClose:i.onFalse,title:"Delete",content:t.jsxs(t.Fragment,{children:["Are you sure want to delete ",t.jsxs("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:t.jsx(w,{variant:"contained",color:"error",onClick:()=>{C(),i.onFalse()},children:"Delete"})})]})}function ne({inputData:o,comparator:e,filters:a}){const{name:l,stock:c}=a,g=o.map((n,i)=>[n,i]);return g.sort((n,i)=>{const h=e(n[0],i[0]);return h!==0?h:n[1]-i[1]}),o=g.map(n=>n[0]),l&&(o=o.filter(n=>n.name.toLowerCase().indexOf(l.toLowerCase())!==-1)),c.length&&(o=o.filter(n=>c[0]==="in stock"?!!n.quantity:!n.quantity)),o}function xe(){return t.jsxs(t.Fragment,{children:[t.jsx(W,{children:t.jsx("title",{children:" Dashboard: Product List"})}),t.jsx(re,{})]})}export{xe as default};
