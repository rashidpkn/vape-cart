import{ae as t,bE as F,bF as L,aw as E,D as l,b_ as A,aQ as B,bu as I,bw as P,aB as p,aE as O,by as v,az as f,aA as V,aC as j,aL as z,cw as H,ci as U,b4 as _,bH as W,bI as N,bJ as q,bK as K,cx as G,b7 as J}from"./index-9d4fa08a.js";import{i as M,j as Q}from"./product-details-description-f7b5b618.js";import{g as $}from"./_product-590f1ea5.js";import{S as g,u as X,f as Y,e as Z}from"./axios-d4d7c4e7.js";import{g as ee}from"./utils-74d4caeb.js";import{u as te}from"./use-table-2bdc093f.js";import{C as se}from"./confirm-dialog-c6f0c300.js";import{T as oe}from"./TableContainer-382a91b5.js";import"./color-picker-e48be28a.js";import"./Fab-a72710e5.js";import"./Slider-4a54cd88.js";import"./DialogTitle-660fce4f.js";import"./DialogContent-2ef5fed7.js";import"./lightbox-82bdc06e.js";function ae({...o}){return t.jsx(F,{...o,children:t.jsx(L,{colSpan:12,children:t.jsxs(E,{spacing:3,direction:"row",alignItems:"center",children:[t.jsx(g,{sx:{borderRadius:1.5,width:48,height:48,flexShrink:0}}),t.jsx(g,{sx:{width:1,height:12}}),t.jsx(g,{sx:{width:180,height:12}}),t.jsx(g,{sx:{width:160,height:12}}),t.jsx(g,{sx:{width:140,height:12}}),t.jsx(g,{sx:{width:120,height:12}})]})})})}function re(){const o=Z.product.list,{data:e,isLoading:d,error:a,isValidating:i}=X(o,Y);return l.useMemo(()=>({products:(e==null?void 0:e.products)||[],productsLoading:d,productsError:a,productsValidating:i,productsEmpty:!d&&!(e!=null&&e.products.length)}),[e==null?void 0:e.products,a,d,i])}const ne=[{id:"name",label:"Product"},{id:"createdAt",label:"Create at",width:160},{id:"inventoryType",label:"Stock",width:160},{id:"price",label:"Price",width:140},{id:"sales Price",label:"Sales Price",width:140},{id:"publish",label:"Publish",width:110},{id:"",width:88}],le=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],ie={name:"",stock:[]};function de(){const o=A(),e=te(),d=B(),[a,i]=l.useState([]),[c,n]=l.useState(ie),{productsLoading:h}=re(),[u,C]=l.useState([]);l.useEffect(()=>{(async()=>{try{const{data:{products:r}}=await P.get("products",{params:{perPage:1e4}});C(r)}catch{alert("error Occure")}})()},[]);const b=I();l.useEffect(()=>{u.length&&i(u)},[u]);const m=ce({inputData:a,comparator:ee(e.order,e.orderBy),filters:c}),x=m.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),R=e.dense?60:80,S=l.useCallback((s,r)=>{e.onResetPage(),n(w=>({...w,[s]:r}))},[e]),T=l.useCallback(async s=>{try{await P.delete(`products/${s}`);const r=a.filter(w=>w.id!==s);i(r),e.onUpdatePageDeleteRow(x.length)}catch(r){alert(r.response.data.message)}},[x.length,e,a]),y=l.useCallback(async()=>{try{await P.delete("products",{data:{ids:e.selected}});const s=a.filter(r=>!e.selected.includes(r.id));i(s),e.onUpdatePageDeleteRows({totalRows:a.length,totalRowsInPage:x.length,totalRowsFiltered:m.length})}catch(s){alert(s.response.data.message)}},[m.length,x.length,e,a]),k=l.useCallback(s=>{o.push(p.dashboard.product.edit(s))},[o]),D=l.useCallback(s=>{o.push(p.dashboard.product.details(s))},[o]);return t.jsxs(t.Fragment,{children:[t.jsxs(O,{maxWidth:d.themeStretch?!1:"lg",children:[t.jsx(v,{heading:"Products",links:[{name:"Dashboard",href:p.dashboard.root},{name:"Products",href:p.dashboard.product.root}],action:t.jsx(f,{component:V,href:p.dashboard.product.new,variant:"contained",startIcon:t.jsx(j,{icon:"mingcute:add-line"}),children:"New Product"}),sx:{mb:{xs:3,md:5}}}),t.jsxs(z,{children:[t.jsx(M,{filters:c,onFilters:S,stockOptions:$,publishOptions:le}),t.jsxs(oe,{sx:{position:"relative",overflow:"unset"},children:[t.jsx(H,{dense:e.dense,numSelected:e.selected.length,rowCount:a.length,onSelectAllRows:s=>e.onSelectAllRows(s,a.map(r=>r.id)),action:t.jsx(U,{title:"Delete",children:t.jsx(_,{color:"primary",onClick:b.onTrue,children:t.jsx(j,{icon:"solar:trash-bin-trash-bold"})})})}),t.jsx(W,{children:t.jsxs(N,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[t.jsx(q,{order:e.order,orderBy:e.orderBy,headLabel:ne,rowCount:a.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:s=>e.onSelectAllRows(s,a.map(r=>r.id))}),t.jsx(K,{children:h?[...Array(e.rowsPerPage)].map((s,r)=>t.jsx(ae,{sx:{height:R}},r)):t.jsx(t.Fragment,{children:m.map(s=>t.jsx(Q,{row:s,selected:e.selected.includes(s.id),onSelectRow:()=>e.onSelectRow(s.id),onDeleteRow:()=>T(s.id),onEditRow:()=>k(s.id),onViewRow:()=>D(s.id)},s.id))})})]})})]}),t.jsx(G,{count:m.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),t.jsx(se,{open:b.value,onClose:b.onFalse,title:"Delete",content:t.jsxs(t.Fragment,{children:["Are you sure want to delete ",t.jsxs("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:t.jsx(f,{variant:"contained",color:"error",onClick:()=>{y(),b.onFalse()},children:"Delete"})})]})}function ce({inputData:o,comparator:e,filters:d}){const{name:a,stock:i}=d,c=o.map((n,h)=>[n,h]);return c.sort((n,h)=>{const u=e(n[0],h[0]);return u!==0?u:n[1]-h[1]}),o=c.map(n=>n[0]),a&&(o=o.filter(n=>n.name.toLowerCase().indexOf(a.toLowerCase())!==-1)),i.length&&(o=o.filter(n=>i[0]==="in stock"?!!n.quantity:!n.quantity)),o}function Te(){return t.jsxs(t.Fragment,{children:[t.jsx(J,{children:t.jsx("title",{children:" Dashboard: Product List"})}),t.jsx(de,{})]})}export{Te as default};
