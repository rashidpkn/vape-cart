import{j as e,b6 as f,b7 as r,cp as j,a4 as n,a_ as p,aS as A,W as T,br as C,p as g,aR as v,bp as L,aM as S,bq as P,c2 as D,bs as O,aZ as k,b3 as w,b4 as B,b5 as F,cn as R}from"./index-b8ace7df.js";import{u as E}from"./use-table-cd3d492e.js";import{T as N}from"./TableContainer-7461e89f.js";function y({row:o,orders:d}){const a=d.filter(t=>t.customer.name===o);return e.jsxs(f,{hover:!0,children:[e.jsx(r,{children:o}),e.jsx(r,{children:a[0].shippingAddress.phoneNumber}),e.jsx(r,{children:a[0].shippingAddress.fullAddress}),e.jsx(r,{children:a.length}),e.jsx(r,{children:a.reduce((t,i)=>t+i.totalAmount,0)}),e.jsx(r,{children:(a.reduce((t,i)=>t+i.totalAmount,0)/a.length).toFixed(2)}),e.jsx(r,{children:j(a.reverse()[0].createdAt)})]})}const H=[{id:"name",label:"Name"},{id:"phoneNumber",label:"Phone Number"},{id:"Address",label:"Address"},{id:"Lifetime Purchase Time",label:"Lifetime Purchase Time"},{id:"Lifetime Purchase Amount",label:"Lifetime Purchase Amount"},{id:"Avarage order value",label:"Avarage Order Value"},{id:"Last Date Of Order",label:"Last Date Of Order",width:200}],V={name:"",role:[],status:"All"};function q(){const o=E(),[d,a]=n.useState([]),[t,i]=n.useState([]),m=n.useCallback(async()=>{const{data:s}=await p.get("/orders");a(s),i([...new Set(s.map(l=>l.customer.name))])},[]);n.useEffect(()=>{m()},[]);const[c,h]=n.useState(V),u=n.useCallback((s,l)=>{o.onResetPage(),h(x=>({...x,[s]:l}))},[o]),b=n.useCallback((s,l)=>{u("status",l)},[u]);return e.jsxs(A,{px:5,children:[e.jsx(T,{children:e.jsx("title",{children:"Dashboard: Customer"})}),e.jsx(C,{heading:"Customer",links:[{name:"Dashboard",href:g.dashboard.root},{name:"Customer",href:"/dashboard/customer"}],sx:{mb:{xs:3,md:5}}}),e.jsxs(v,{children:[e.jsx(L,{value:c.status,onChange:b,sx:{px:2.5,boxShadow:s=>`inset 0 -2px 0 0 ${S(s.palette.grey[500],.08)}`},children:["All","VIP","Recurring Customer","Blacklisted"].map(s=>e.jsx(P,{style:{color:`${s==="Blacklisted"&&"#f00"}`},iconPosition:"end",value:s,label:s,icon:e.jsxs(D,{variant:(s==="all"||s===c.status)&&"filled"||"soft",children:[s==="All"&&t.length,s!=="All"&&0]})},s))}),e.jsxs(N,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(O,{}),e.jsx(k,{children:e.jsxs(w,{size:o.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(B,{headLabel:H}),e.jsxs(F,{children:[t.map((s,l)=>c.status==="All"&&e.jsx(y,{row:s,orders:d},l)),e.jsx(R,{notFound:!t})]})]})})]})]})]})}export{q as default};
