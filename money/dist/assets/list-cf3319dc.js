import{aQ as B,c0 as D,bu as L,D as r,bv as A,aB as x,ae as s,aE as E,by as U,az as P,aA as k,aC as j,aL as I,aN as N,am as O,aO as H,a$ as _,dX as z,cB as W,cn as q,b4 as $,bH as J,bI as K,bJ as Q,bK as V,dn as X,dp as G,cC as M,cb as Y,cc as Z,cd as ee,b7 as se}from"./index-493afd28.js";import"./user-new-edit-form-74a23ed4.js";import{C as te}from"./confirm-dialog-e289d466.js";import{g as ae,e as oe}from"./utils-74d4caeb.js";import{u as ne}from"./use-table-971f3c89.js";import{e as le,f as re,g as ie}from"./profile-followers-27cc1696.js";import{T as de}from"./TableContainer-b78614fc.js";import"./Alert-a48a7131.js";import"./AvatarGroup-be68fbec.js";import"./Fab-f849b899.js";import"./lightbox-f08bc057.js";const ce=[{value:"all",label:"All"}],he=[{id:"name",label:"Name"},{id:"phoneNumber",label:"Phone Number",width:180},{id:"Store Name",label:"Store Name",width:120},{id:"tradeLicense",label:"Trade License",width:180},{id:"contactPersonInTouch",label:"Contact Person In Touch",width:220},{id:"",width:88}],w={name:"",role:[],status:"all"};function ue(){const e=ne(),p=B(),u=D(),i=L(),[o,c]=r.useState([]),g=async()=>{const t=await Y(Z(ee,"users")),n=[];t.forEach(h=>{n.push(h.data())}),c(n)};r.useEffect(()=>{g()},[]);const[a,d]=r.useState(w),l=ge({inputData:o,comparator:ae(e.order,e.orderBy),filters:a}),m=l.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),C=e.dense?52:72,f=!A(w,a),R=!l.length&&f||!l.length,b=r.useCallback((t,n)=>{e.onResetPage(),d(h=>({...h,[t]:n}))},[e]),T=r.useCallback(t=>{const n=o.filter(h=>h.id!==t);c(n),e.onUpdatePageDeleteRow(m.length)},[m.length,e,o]),S=r.useCallback(()=>{const t=o.filter(n=>!e.selected.includes(n.id));c(t),e.onUpdatePageDeleteRows({totalRows:o.length,totalRowsInPage:m.length,totalRowsFiltered:l.length})},[l.length,m.length,e,o]),F=r.useCallback(t=>{u.push(x.dashboard.user.edit(t))},[u]),v=r.useCallback((t,n)=>{b("status",n)},[b]),y=r.useCallback(()=>{d(w)},[]);return s.jsxs(s.Fragment,{children:[s.jsxs(E,{maxWidth:p.themeStretch?!1:"lg",children:[s.jsx(U,{heading:"Store",links:[{name:"Dashboard",href:x.dashboard.root},{name:"Store",href:x.dashboard.user.root}],action:s.jsx(P,{component:k,href:x.dashboard.user.new,variant:"contained",startIcon:s.jsx(j,{icon:"mingcute:add-line"}),children:"New User"}),sx:{mb:{xs:3,md:5}}}),s.jsxs(I,{children:[s.jsx(N,{value:a.status,onChange:v,sx:{px:2.5,boxShadow:t=>`inset 0 -2px 0 0 ${O(t.palette.grey[500],.08)}`},children:ce.map(t=>s.jsx(H,{iconPosition:"end",value:t.value,label:t.label,icon:s.jsx(_,{variant:(t.value==="all"||t.value===a.status)&&"filled"||"soft",children:t.value==="all"&&o.length})},t.value))}),s.jsx(le,{filters:a,onFilters:b,roleOptions:z}),f&&s.jsx(re,{filters:a,onFilters:b,onResetFilters:y,results:l.length,sx:{p:2.5,pt:0}}),s.jsxs(de,{sx:{position:"relative",overflow:"unset"},children:[s.jsx(W,{dense:e.dense,numSelected:e.selected.length,rowCount:o.length,onSelectAllRows:t=>e.onSelectAllRows(t,o.map(n=>n.id)),action:s.jsx(q,{title:"Delete",children:s.jsx($,{color:"primary",onClick:i.onTrue,children:s.jsx(j,{icon:"solar:trash-bin-trash-bold"})})})}),s.jsx(J,{children:s.jsxs(K,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[s.jsx(Q,{order:e.order,orderBy:e.orderBy,headLabel:he,rowCount:o.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:t=>e.onSelectAllRows(t,o.map(n=>n.id))}),s.jsxs(V,{children:[l.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage).map(t=>s.jsx(ie,{row:t,selected:e.selected.includes(t.id),onSelectRow:()=>e.onSelectRow(t.id),onDeleteRow:()=>T(t.id),onEditRow:()=>F(t.id)},t.id)),s.jsx(X,{height:C,emptyRows:oe(e.page,e.rowsPerPage,o.length)}),s.jsx(G,{notFound:R})]})]})})]}),s.jsx(M,{count:l.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),s.jsx(te,{open:i.value,onClose:i.onFalse,title:"Delete",content:s.jsxs(s.Fragment,{children:["Are you sure want to delete ",s.jsxs("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:s.jsx(P,{variant:"contained",color:"error",onClick:()=>{S(),i.onFalse()},children:"Delete"})})]})}function ge({inputData:e,comparator:p,filters:u}){const{name:i,status:o,role:c}=u,g=e.map((a,d)=>[a,d]);return g.sort((a,d)=>{const l=p(a[0],d[0]);return l!==0?l:a[1]-d[1]}),e=g.map(a=>a[0]),i&&(e=e.filter(a=>a.name.toLowerCase().indexOf(i.toLowerCase())!==-1)),o!=="all"&&(e=e.filter(a=>a.status===o)),c.length&&(e=e.filter(a=>c.includes(a.role))),e}function Se(){return s.jsxs(s.Fragment,{children:[s.jsx(se,{children:s.jsx("title",{children:" Dashboard: User List"})}),s.jsx(ue,{})]})}export{Se as default};
