import{n as ut,O as bt,a_ as xt,a$ as ft,b0 as It,b1 as Ot,B as W,f as Ft,c as Tt,y as st}from"./index-b380339e.js";const _=t=>t*1e3,B=t=>t/1e3,ht=(t,n,e)=>(((1-3*e+3*n)*t+(3*e-6*n))*t+3*n)*t,At=1e-7,wt=12;function Pt(t,n,e,s,c){let o,r,d=0;do r=n+(e-n)/2,o=ht(r,s,c)-t,o>0?e=r:n=r;while(Math.abs(o)>At&&++d<wt);return r}function E(t,n,e,s){if(t===n&&e===s)return ut;const c=o=>Pt(o,0,1,t,e);return o=>o===0||o===1?o:ht(c(o),n,s)}const St=E(.42,0,1,1),Bt=E(0,0,.58,1),dt=E(.42,0,.58,1),Gt=t=>Array.isArray(t)&&typeof t[0]!="number",pt=t=>n=>n<=.5?t(2*n)/2:(2-t(2*(1-n)))/2,mt=t=>n=>1-t(1-n),C=t=>1-Math.sin(Math.acos(t)),Rt=mt(C),qt=pt(C),gt=E(.33,1.53,.69,.99),H=mt(gt),Et=pt(H),Kt=t=>(t*=2)<1?.5*H(t):.5*(2-Math.pow(2,-10*(t-1))),Nt={linear:ut,easeIn:St,easeInOut:dt,easeOut:Bt,circIn:C,circInOut:qt,circOut:Rt,backIn:H,backInOut:Et,backOut:gt,anticipate:Kt},ot=t=>{if(Array.isArray(t)){bt(t.length===4);const[n,e,s,c]=t;return E(n,e,s,c)}else if(typeof t=="string")return Nt[t];return t};function kt(t,n){return t.map(e=>e*n)}function zt(t,n){return t.map(()=>n||dt).splice(0,t.length-1)}function N({duration:t=300,keyframes:n,times:e,ease:s="easeInOut"}){const c=Gt(s)?s.map(ot):ot(s),o={done:!1,value:n[0]},r=kt(e&&e.length===n.length?e:xt(n),t),d=ft(r,n,{ease:Array.isArray(c)?c:zt(n,c)});return{calculatedDuration:t,next:D=>(o.value=d(D),o.done=D>=t,o)}}const Lt=5;function vt(t,n,e){const s=Math.max(n-Lt,0);return It(e-t(s),n-s)}const V=.001,Vt=.01,it=10,Wt=.05,_t=1;function jt({duration:t=800,bounce:n=.25,velocity:e=0,mass:s=1}){let c,o;Ot(t<=_(it));let r=1-n;r=W(Wt,_t,r),t=W(Vt,it,B(t)),r<1?(c=a=>{const O=a*r,v=O*t,p=O-e,l=j(a,r),m=Math.exp(-v);return V-p/l*m},o=a=>{const v=a*r*t,p=v*e+e,l=Math.pow(r,2)*Math.pow(a,2)*t,m=Math.exp(-v),b=j(Math.pow(a,2),r);return(-c(a)+V>0?-1:1)*((p-l)*m)/b}):(c=a=>{const O=Math.exp(-a*t),v=(a-e)*t+1;return-V+O*v},o=a=>{const O=Math.exp(-a*t),v=(e-a)*(t*t);return O*v});const d=5/t,D=Ht(c,o,d);if(t=_(t),isNaN(D))return{stiffness:100,damping:10,duration:t};{const a=Math.pow(D,2)*s;return{stiffness:a,damping:r*2*Math.sqrt(s*a),duration:t}}}const Ct=12;function Ht(t,n,e){let s=e;for(let c=1;c<Ct;c++)s=s-t(s)/n(s);return s}function j(t,n){return t*Math.sqrt(1-n*n)}const Jt=["duration","bounce"],Qt=["stiffness","damping","mass"];function rt(t,n){return n.some(e=>t[e]!==void 0)}function Ut(t){let n={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!rt(t,Qt)&&rt(t,Jt)){const e=jt(t);n={...n,...e,velocity:0,mass:1},n.isResolvedFromDuration=!0}return n}function Mt({keyframes:t,restDelta:n,restSpeed:e,...s}){const c=t[0],o=t[t.length-1],r={done:!1,value:c},{stiffness:d,damping:D,mass:a,velocity:O,duration:v,isResolvedFromDuration:p}=Ut(s),l=O?-B(O):0,m=D/(2*Math.sqrt(d*a)),b=o-c,I=B(Math.sqrt(d/a)),T=Math.abs(b)<5;e||(e=T?.01:2),n||(n=T?.005:.5);let g;if(m<1){const f=j(I,m);g=x=>{const h=Math.exp(-m*I*x);return o-h*((l+m*I*b)/f*Math.sin(f*x)+b*Math.cos(f*x))}}else if(m===1)g=f=>o-Math.exp(-I*f)*(b+(l+I*b)*f);else{const f=I*Math.sqrt(m*m-1);g=x=>{const h=Math.exp(-m*I*x),A=Math.min(f*x,300);return o-h*((l+m*I*b)*Math.sinh(A)+f*b*Math.cosh(A))/f}}return{calculatedDuration:p&&v||null,next:f=>{const x=g(f);if(p)r.done=f>=v;else{let h=l;f!==0&&(m<1?h=vt(g,f,x):h=0);const A=Math.abs(h)<=e,M=Math.abs(o-x)<=n;r.done=A&&M}return r.value=r.done?o:x,r}}}function at({keyframes:t,velocity:n=0,power:e=.8,timeConstant:s=325,bounceDamping:c=10,bounceStiffness:o=500,modifyTarget:r,min:d,max:D,restDelta:a=.5,restSpeed:O}){const v=t[0],p={done:!1,value:v},l=i=>d!==void 0&&i<d||D!==void 0&&i>D,m=i=>d===void 0?D:D===void 0||Math.abs(d-i)<Math.abs(D-i)?d:D;let b=e*n;const I=v+b,T=r===void 0?I:r(I);T!==I&&(b=T-v);const g=i=>-b*Math.exp(-i/s),f=i=>T+g(i),x=i=>{const y=g(i),P=f(i);p.done=Math.abs(y)<=a,p.value=p.done?T:P};let h,A;const M=i=>{l(p.value)&&(h=i,A=Mt({keyframes:[p.value,m(p.value)],velocity:vt(f,i,p.value),damping:c,stiffness:o,restDelta:a,restSpeed:O}))};return M(0),{calculatedDuration:null,next:i=>{let y=!1;return!A&&h===void 0&&(y=!0,x(i),M(i)),h!==void 0&&i>h?A.next(i-h):(!y&&x(i),p)}}}const Xt=t=>{const n=({timestamp:e})=>t(e);return{start:()=>Ft.update(n,!0),stop:()=>Tt(n),now:()=>st.isProcessing?st.timestamp:performance.now()}},ct=2e4;function lt(t){let n=0;const e=50;let s=t.next(n);for(;!s.done&&n<ct;)n+=e,s=t.next(n);return n>=ct?1/0:n}const Zt={decay:at,inertia:at,tween:N,keyframes:N,spring:Mt};function $t({autoplay:t=!0,delay:n=0,driver:e=Xt,keyframes:s,type:c="keyframes",repeat:o=0,repeatDelay:r=0,repeatType:d="loop",onPlay:D,onStop:a,onComplete:O,onUpdate:v,...p}){let l=1,m=!1,b,I;const T=()=>{I=new Promise(u=>{b=u})};T();let g;const f=Zt[c]||N;let x;f!==N&&typeof s[0]!="number"&&(x=ft([0,100],s,{clamp:!1}),s=[0,100]);const h=f({...p,keyframes:s});let A;d==="mirror"&&(A=f({...p,keyframes:[...s].reverse(),velocity:-(p.velocity||0)}));let M="idle",i=null,y=null,P=null;h.calculatedDuration===null&&o&&(h.calculatedDuration=lt(h));const{calculatedDuration:k}=h;let G=1/0,S=1/0;k!==null&&(G=k+r,S=G*(o+1)-r);let F=0;const z=u=>{if(y===null)return;l>0&&(y=Math.min(y,u)),l<0&&(y=Math.min(u-S/l,y)),i!==null?F=i:F=Math.round(u-y)*l;const R=F-n*(l>=0?1:-1),Z=l>=0?R<0:R>S;F=Math.max(R,0),M==="finished"&&i===null&&(F=S);let Y=F,$=h;if(o){const L=F/G;let K=Math.floor(L),w=L%1;!w&&L>=1&&(w=1),w===1&&K--,K=Math.min(K,o+1);const nt=!!(K%2);nt&&(d==="reverse"?(w=1-w,r&&(w-=r/G)):d==="mirror"&&($=A));let et=W(0,1,w);F>S&&(et=d==="reverse"&&nt?1:0),Y=et*G}const q=Z?{done:!1,value:s[0]}:$.next(Y);x&&(q.value=x(q.value));let{done:tt}=q;!Z&&k!==null&&(tt=l>=0?F>=S:F<=0);const Dt=i===null&&(M==="finished"||M==="running"&&tt);return v&&v(q.value),Dt&&yt(),q},J=()=>{g&&g.stop(),g=void 0},Q=()=>{M="idle",J(),b(),T(),y=P=null},yt=()=>{M="finished",O&&O(),J(),b()},U=()=>{if(m)return;g||(g=e(z));const u=g.now();D&&D(),i!==null?y=u-i:(!y||M==="finished")&&(y=u),M==="finished"&&T(),P=y,i=null,M="running",g.start()};t&&U();const X={then(u,R){return I.then(u,R)},get time(){return B(F)},set time(u){u=_(u),F=u,i!==null||!g||l===0?i=u:y=g.now()-u/l},get duration(){const u=h.calculatedDuration===null?lt(h):h.calculatedDuration;return B(u)},get speed(){return l},set speed(u){u===l||!g||(l=u,X.time=B(F))},get state(){return M},play:U,pause:()=>{M="paused",i=F},stop:()=>{m=!0,M!=="idle"&&(M="idle",a&&a(),Q())},cancel:()=>{P!==null&&z(P),Q()},complete:()=>{M="finished"},sample:u=>(y=0,z(u))};return X}export{$t as a,Rt as c,B as m,_ as s};
