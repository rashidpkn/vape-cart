import{a4 as t,bq as f,a$ as j,j as s,aT as E,p as y,c1 as T,b0 as o,S as g,aS as C,b5 as q,bW as P,b8 as i,b9 as e,b7 as F,b1 as N,b2 as R,b3 as k,W as w}from"./index-f9c7bd8e.js";import{a as v,b as B}from"./order-details-toolbar-eb54559c.js";function I(){var r;const[d,p]=t.useState([]),u=async()=>{const n=await N(R(k,"users")),l=[];n.forEach(c=>{l.push(c.data())}),p(l)};t.useEffect(()=>{u()},[]);const b=f(),{id:x}=b,[a,S]=t.useState({}),D=async()=>{try{const{data:n}=await j.get(`orders/${x}`);S(n),h(n.status)}catch{}};t.useEffect(()=>{D()},[]);const[A,h]=t.useState(a.status),m=t.useCallback(async n=>{await j.patch(`/orders/status/${x}`,{status:n}),h(n)},[]);return s.jsxs(E,{px:5,children:[s.jsx(v,{backLink:y.dashboard.order.root,orderNumber:a.orderNumber,createdAt:a.createdAt,status:A,onChangeStatus:m,statusOptions:T}),s.jsxs(o,{container:!0,spacing:3,children:[s.jsx(o,{xs:12,md:8,children:s.jsx(g,{spacing:3,direction:{xs:"column-reverse",md:"column"},children:s.jsx(C,{children:s.jsxs(q,{children:[s.jsx(P,{children:s.jsxs(i,{children:[s.jsx(e,{children:"Product Details"}),s.jsx(e,{children:"Partner"}),s.jsx(e,{children:"Quantity"}),s.jsx(e,{children:"Unit Price"}),s.jsx(e,{children:"Total Value"}),s.jsx(e,{children:"Commission"}),s.jsx(e,{children:"Net"})]})}),s.jsxs(F,{children:[(r=a==null?void 0:a.items)==null?void 0:r.map(n=>{var l;return s.jsxs(i,{children:[s.jsx(e,{children:n.name}),s.jsxs(e,{children:["   ",(l=d==null?void 0:d.find(c=>c.uid===n.userId))==null?void 0:l.displayName]}),s.jsxs(e,{children:["x",n.quantity]}),s.jsxs(e,{children:["AED ",n.price]}),s.jsxs(e,{children:["AED ",n.price*n.quantity]}),s.jsxs(e,{children:["AED ",(n.price*n.quantity*.3).toFixed(2)]}),s.jsxs(e,{children:["AED ",(n.price*n.quantity*.7).toFixed(2)]})]})}),s.jsxs(i,{children:[s.jsx(e,{colSpan:3}),s.jsx(e,{children:"Subtotal"}),s.jsxs(e,{children:["AED ",a==null?void 0:a.subTotal]})]}),s.jsxs(i,{children:[s.jsx(e,{colSpan:3}),s.jsx(e,{children:"Discount"}),s.jsxs(e,{children:["AED ",a==null?void 0:a.discount]})]}),s.jsxs(i,{children:[s.jsx(e,{colSpan:3}),s.jsx(e,{children:"Total"}),s.jsxs(e,{children:["AED ",a==null?void 0:a.totalAmount]})]}),s.jsxs(i,{children:[s.jsx(e,{colSpan:3}),s.jsx(e,{children:"VAT 5%"}),s.jsxs(e,{children:["AED ",((a==null?void 0:a.totalAmount)*.05).toFixed(2)]})]}),s.jsxs(i,{children:[s.jsx(e,{colSpan:3}),s.jsx(e,{children:"Shipping"}),s.jsxs(e,{children:["AED ",a==null?void 0:a.shipping]})]}),s.jsxs(i,{children:[s.jsx(e,{colSpan:3}),s.jsx(e,{children:"Refunded"}),s.jsxs(e,{children:["AED ",a==null?void 0:a.refunded]})]}),s.jsxs(i,{children:[s.jsx(e,{colSpan:3}),s.jsx(e,{children:"Grand Total"}),s.jsxs(e,{children:["AED ",(a.totalAmount*1.05+(a==null?void 0:a.shipping)-(a==null?void 0:a.refunded)).toFixed(2)]})]})]})]})})})}),s.jsx(o,{xs:12,md:4,children:s.jsx(B,{customer:a.customer,delivery:a.delivery,payment:a.payment,shippingAddress:a.shippingAddress})})]})]})}function $(){return s.jsxs(s.Fragment,{children:[s.jsx(w,{children:s.jsx("title",{children:" Dashboard: Order Details"})}),s.jsx(I,{})]})}export{$ as default};
