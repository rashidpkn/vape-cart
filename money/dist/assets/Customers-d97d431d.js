import{ae as e,bE as f,bF as l,cd as j,D as r,bw as p,aq as A,by as T,aB as g,aL as C,aN as v,am as L,aO as O,a$ as P,cx as S,bH as B,bI as D,bJ as F,bK as k,dg as w}from"./index-0d34de13.js";import{u as E}from"./use-table-4ab373ac.js";import{T as N}from"./TableContainer-5f928392.js";function y({row:n,orders:i}){const a=i.filter(t=>t.customer.name===n);return e.jsxs(f,{hover:!0,children:[e.jsx(l,{children:n}),e.jsx(l,{children:a[0].shippingAddress.phoneNumber}),e.jsx(l,{children:a[0].shippingAddress.fullAddress}),e.jsx(l,{children:a.length}),e.jsx(l,{children:a.reduce((t,o)=>t+o.totalAmount,0)}),e.jsx(l,{children:(a.reduce((t,o)=>t+o.totalAmount,0)/a.length).toFixed(2)}),e.jsx(l,{children:j(a.reverse()[0].createdAt)})]})}const R=[{id:"name",label:"Name"},{id:"phoneNumber",label:"Phone Number"},{id:"Address",label:"Address"},{id:"Lifetime Purchase Time",label:"Lifetime Purchase Time"},{id:"Lifetime Purchase Amount",label:"Lifetime Purchase Amount"},{id:"Avarage order value",label:"Avarage Order Value"},{id:"Last Date Of Order",label:"Last Date Of Order",width:200}],H={name:"",role:[],status:"All"};function q(){const n=E(),[i,a]=r.useState([]),[t,o]=r.useState([]),m=r.useCallback(async()=>{const{data:s}=await p.get("/orders");a(s),o([...new Set(s.map(d=>d.customer.name))])},[]);r.useEffect(()=>{m()},[]);const[c,h]=r.useState(H),u=r.useCallback((s,d)=>{n.onResetPage(),h(b=>({...b,[s]:d}))},[n]),x=r.useCallback((s,d)=>{u("status",d)},[u]);return e.jsxs(A,{px:5,children:[e.jsx(T,{heading:"Customer",links:[{name:"Dashboard",href:g.dashboard.root},{name:"Customer",href:"/dashboard/customer"}],sx:{mb:{xs:3,md:5}}}),e.jsxs(C,{children:[e.jsx(v,{value:c.status,onChange:x,sx:{px:2.5,boxShadow:s=>`inset 0 -2px 0 0 ${L(s.palette.grey[500],.08)}`},children:["All","VIP","Recurring Customer","Blacklisted"].map(s=>e.jsx(O,{style:{color:`${s==="Blacklisted"&&"#f00"}`},iconPosition:"end",value:s,label:s,icon:e.jsxs(P,{variant:(s==="all"||s===c.status)&&"filled"||"soft",children:[s==="All"&&t.length,s!=="All"&&0]})},s))}),e.jsxs(N,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(S,{}),e.jsx(B,{children:e.jsxs(D,{size:n.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(F,{headLabel:R}),e.jsxs(k,{children:[t.map(s=>e.jsx(y,{row:s,orders:i},s.id)),e.jsx(w,{notFound:!t})]})]})})]})]})]})}export{q as default};
