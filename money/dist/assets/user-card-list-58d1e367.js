import{bM as H,aB as G,aC as b,a4 as f,aD as M,aG as $,j as e,co as V,aF as Q,cp as J,cq as K,aS as v,bS as X,cr as Y,aY as w,aH as y,bT as Z,cs as q,aK as m,ct as U,B as S,aL as ee,P as l,aA as I,aU as N,b7 as ae,b8 as C,bW as D,b9 as E,b$ as B,bo as se,aJ as P,aX as L,bH as oe,S as T,c6 as le,c7 as ie,c8 as ne,cu as te,bP as re,aI as de,bU as A,c5 as ce,u as pe,bq as xe,aR as me,cv as he,cw as ue,aM as je,cd as be,g as k,cg as ye,a_ as F,b0 as ge,b1 as fe,b2 as ve}from"./index-ad831b55.js";import{A as Ce}from"./Alert-f8914497.js";function O({currentUser:a,open:i,onClose:t}){const{enqueueSnackbar:n}=H(),d=G().shape({name:b().required("Name is required"),email:b().required("Email is required").email("Email must be a valid email address"),phoneNumber:b().required("Phone number is required"),address:b().required("Address is required"),country:b().required("Country is required"),company:b().required("Company is required"),state:b().required("State is required"),city:b().required("City is required"),role:b().required("Role is required")}),c=f.useMemo(()=>({name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||"",phoneNumber:(a==null?void 0:a.phoneNumber)||"",address:(a==null?void 0:a.address)||"",country:(a==null?void 0:a.country)||"",state:(a==null?void 0:a.state)||"",city:(a==null?void 0:a.city)||"",zipCode:(a==null?void 0:a.zipCode)||"",status:a==null?void 0:a.status,company:(a==null?void 0:a.company)||"",role:(a==null?void 0:a.role)||""}),[a]),s=M({resolver:$(d),defaultValues:c}),{reset:o,handleSubmit:h,formState:{isSubmitting:j}}=s,g=h(async r=>{try{await new Promise(p=>setTimeout(p,500)),o(),t(),n("Update success!"),console.info("DATA",r)}catch(p){console.error(p)}});return e.jsx(V,{fullWidth:!0,maxWidth:!1,open:i,onClose:t,PaperProps:{sx:{maxWidth:720}},children:e.jsxs(Q,{methods:s,onSubmit:g,children:[e.jsx(J,{children:"Quick Update"}),e.jsxs(K,{children:[e.jsx(Ce,{variant:"outlined",severity:"info",sx:{mb:3},children:"Account is waiting for confirmation"}),e.jsxs(v,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(X,{name:"status",label:"Status",children:Y.map(r=>e.jsx(w,{value:r.value,children:r.label},r.value))}),e.jsx(v,{sx:{display:{xs:"none",sm:"block"}}}),e.jsx(y,{name:"name",label:"Full Name"}),e.jsx(y,{name:"email",label:"Email Address"}),e.jsx(y,{name:"phoneNumber",label:"Phone Number"}),e.jsx(Z,{name:"country",label:"Country",options:q.map(r=>r.label),getOptionLabel:r=>r,renderOption:(r,p)=>{const{code:u,label:x,phone:W}=q.filter(_=>_.label===p)[0];return x?f.createElement("li",{...r,key:x},e.jsx(m,{icon:`circle-flags:${u.toLowerCase()}`,width:28,sx:{mr:1}},x),x," (",u,") +",W):null}}),e.jsx(y,{name:"state",label:"State/Region"}),e.jsx(y,{name:"city",label:"City"}),e.jsx(y,{name:"address",label:"Address"}),e.jsx(y,{name:"zipCode",label:"Zip/Code"}),e.jsx(y,{name:"company",label:"Company"}),e.jsx(y,{name:"role",label:"Role"})]})]}),e.jsxs(U,{children:[e.jsx(S,{variant:"outlined",onClick:t,children:"Cancel"}),e.jsx(ee,{type:"submit",variant:"contained",loading:j,children:"Update"})]})]})})}O.propTypes={currentUser:l.object,onClose:l.func,open:l.bool};function we({row:a,selected:i,onEditRow:t,onSelectRow:n,onDeleteRow:d}){const{displayName:c,avatarUrl:s,storeName:o,tradeLicense:h,contactPersonInTouch:j,email:g,phoneNumber:r}=a,p=I(),u=I(),x=N();return e.jsxs(e.Fragment,{children:[e.jsxs(ae,{hover:!0,selected:i,children:[e.jsx(C,{padding:"checkbox",children:e.jsx(D,{checked:i,onClick:n})}),e.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(E,{alt:c,src:s,sx:{mr:2}}),e.jsx(B,{primary:c,secondary:g,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}})]}),e.jsx(C,{sx:{whiteSpace:"nowrap"},children:r}),e.jsx(C,{sx:{whiteSpace:"nowrap"},children:o}),e.jsx(C,{sx:{whiteSpace:"nowrap"},children:e.jsx("a",{href:h,target:"_blank",rel:"noopener noreferrer",children:e.jsx(S,{children:"View Trade Licence"})})}),e.jsx(C,{children:j}),e.jsxs(C,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:[e.jsx(se,{title:"Quick Edit",placement:"top",arrow:!0,children:e.jsx(P,{color:u.value?"inherit":"default",onClick:u.onTrue,children:e.jsx(m,{icon:"solar:pen-bold"})})}),e.jsx(P,{color:x.open?"inherit":"default",onClick:x.onOpen,children:e.jsx(m,{icon:"eva:more-vertical-fill"})})]})]}),e.jsx(O,{currentUser:a,open:u.value,onClose:u.onFalse}),e.jsxs(L,{open:x.open,onClose:x.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(w,{onClick:()=>{p.onTrue(),x.onClose()},sx:{color:"error.main"},children:[e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),e.jsxs(w,{onClick:()=>{t(),x.onClose()},children:[e.jsx(m,{icon:"solar:pen-bold"}),"Edit"]})]}),e.jsx(oe,{open:p.value,onClose:p.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(S,{variant:"contained",color:"error",onClick:d,children:"Delete"})})]})}we.propTypes={onDeleteRow:l.func,onEditRow:l.func,onSelectRow:l.func,row:l.object,selected:l.bool};function Te({filters:a,onFilters:i,roleOptions:t}){const n=N(),d=f.useCallback(s=>{i("name",s.target.value)},[i]),c=f.useCallback(s=>{i("role",typeof s.target.value=="string"?s.target.value.split(","):s.target.value)},[i]);return e.jsxs(e.Fragment,{children:[e.jsxs(T,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsxs(le,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(ie,{children:"Role"}),e.jsx(ne,{multiple:!0,value:a.role,onChange:c,input:e.jsx(te,{label:"Role"}),renderValue:s=>s.map(o=>o).join(", "),MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:t.map(s=>e.jsxs(w,{value:s,children:[e.jsx(D,{disableRipple:!0,size:"small",checked:a.role.includes(s)}),s]},s))})]}),e.jsxs(T,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(re,{fullWidth:!0,value:a.name,onChange:d,placeholder:"Search...",InputProps:{startAdornment:e.jsx(de,{position:"start",children:e.jsx(m,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(P,{onClick:n.onOpen,children:e.jsx(m,{icon:"eva:more-vertical-fill"})})]})]}),e.jsxs(L,{open:n.open,onClose:n.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(w,{onClick:()=>{n.onClose()},children:[e.jsx(m,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(w,{onClick:()=>{n.onClose()},children:[e.jsx(m,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(w,{onClick:()=>{n.onClose()},children:[e.jsx(m,{icon:"solar:export-bold"}),"Export"]})]})]})}Te.propTypes={filters:l.object,onFilters:l.func,roleOptions:l.array};function Se({filters:a,onFilters:i,onResetFilters:t,results:n,...d}){const c=()=>{i("status","all")},s=o=>{const h=a.role.filter(j=>j!==o);i("role",h)};return e.jsxs(T,{spacing:1.5,...d,children:[e.jsxs(v,{sx:{typography:"body2"},children:[e.jsx("strong",{children:n}),e.jsx(v,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(T,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[a.status!=="all"&&e.jsx(R,{label:"Status:",children:e.jsx(A,{size:"small",label:a.status,onDelete:c})}),!!a.role.length&&e.jsx(R,{label:"Role:",children:a.role.map(o=>e.jsx(A,{label:o,size:"small",onDelete:()=>s(o)},o))}),e.jsx(S,{color:"error",onClick:t,startIcon:e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}Se.propTypes={filters:l.object,onFilters:l.func,onResetFilters:l.func,results:l.number};function R({label:a,children:i,sx:t,...n}){return e.jsxs(T,{component:ce,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...t},...n,children:[e.jsx(v,{component:"span",sx:{typography:"subtitle2"},children:a}),e.jsx(T,{spacing:1,direction:"row",flexWrap:"wrap",children:i})]})}R.propTypes={children:l.node,label:l.string,sx:l.object};function z({user:a,products:i=[],orders:t=[]}){const n=pe(),d=xe(),{storeName:c,coverUrl:s,displayName:o,totalFollowers:h,uid:j}=a;return e.jsxs(me,{sx:{textAlign:"center"},onClick:()=>{d(`/dashboard/store/${a.uid}/edit`)},children:[e.jsxs(v,{sx:{position:"relative"},children:[e.jsx(he,{sx:{left:0,right:0,zIndex:10,mx:"auto",bottom:-26,position:"absolute"}}),e.jsx(E,{alt:c,src:"/logo/logo_single.webp",sx:{width:64,height:64,zIndex:11,left:0,right:0,bottom:-32,mx:"auto",position:"absolute",cursor:"pointer"}}),e.jsx(ue,{src:"https://api-prod-minimal-v510.vercel.app/assets/images/cover/cover_15.jpg",alt:s,ratio:"16/9",overlay:je(n.palette.grey[900],.48)})]}),e.jsx(B,{sx:{mt:7,mb:1},primary:c,secondary:o,primaryTypographyProps:{typography:"subtitle1"},secondaryTypographyProps:{component:"span",mt:.5}}),e.jsx(be,{sx:{borderStyle:"dashed"}}),e.jsxs(v,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",sx:{py:3,typography:"subtitle1"},children:[e.jsxs("div",{children:[e.jsx(k,{variant:"caption",component:"div",sx:{mb:.5,color:"text.secondary"},children:"Traffic"}),ye(h)]}),e.jsxs("div",{children:[e.jsx(k,{variant:"caption",component:"div",sx:{mb:.5,color:"text.secondary"},children:"Product"}),i.filter(g=>g.userId===a.uid).length]}),e.jsxs("div",{children:[e.jsx(k,{variant:"caption",component:"div",sx:{mb:.5,color:"text.secondary"},children:"Revenue"}),t==null?void 0:t.reduce((g,r)=>{var p,u;return((u=(p=r.items)==null?void 0:p[0])==null?void 0:u.userId)===j?g+r.subTotal:g},0)]})]})]})}z.propTypes={user:l.object};function ke(){const[a,i]=f.useState([]),[t,n]=f.useState([]),[d,c]=f.useState([]),s=async()=>{const o=await ge(fe(ve,"users")),h=[];o.forEach(j=>{h.push(j.data())}),c(h)};return f.useEffect(()=>{F.get("/products",{params:{perPage:1e4}}).then(o=>{i(o.data.products)}),F.get("/orders").then(o=>{n(o.data)}),s()},[]),e.jsx(v,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},children:d==null?void 0:d.map(o=>e.jsx(z,{user:o,products:a,orders:t},o.uid))})}ke.propTypes={users:l.array};export{ke as U,Te as a,Se as b,we as c};
