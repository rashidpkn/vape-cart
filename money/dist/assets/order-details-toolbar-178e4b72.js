import{bu as q,c9 as Q,ae as e,bE as _,bF as w,b2 as re,aq as l,aY as E,bs as L,cR as M,bB as T,a$ as V,b4 as v,aC as p,bt as se,aw as s,aV as oe,ca as G,b6 as F,az as k,as as o,dm as J,D as C,aQ as ae,c0 as le,bw as U,aB as z,aE as ie,by as ce,aL as W,aN as de,am as xe,aO as he,cT as pe,cU as ue,ce as me,cB as je,cn as ge,bH as K,bI as ye,bJ as be,bK as we,dn as fe,dp as Ce,cC as Te,cb as Se,cc as ve,dq as B,cd as Pe,b3 as O,ac as H,aD as De,aP as $,aA as ke,ch as Ie}from"./index-493afd28.js";import{C as Y}from"./confirm-dialog-e289d466.js";import{g as Re,e as Oe}from"./utils-74d4caeb.js";import{u as Fe}from"./use-table-971f3c89.js";import"./custom-date-range-picker-6fb51815.js";import{T as Be}from"./TableContainer-b78614fc.js";function X({row:n,selected:i,onViewRow:y,onSelectRow:a,onDeleteRow:u}){const{id:m,items:h,status:c,createdAt:r,customer:x,totalQuantity:f,subTotal:b}=n,j=q(),I=q(),g=Q(),P=e.jsxs(_,{hover:!0,selected:i,children:[e.jsx(w,{padding:"checkbox",children:e.jsx(re,{checked:i,onClick:a})}),e.jsx(w,{children:e.jsxs(l,{onClick:y,sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:["#",m]})}),e.jsxs(w,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(E,{alt:x.name,src:x.avatarUrl,sx:{mr:2}}),e.jsx(L,{primary:x.name,secondary:x.email,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}})]}),e.jsx(w,{children:e.jsx(L,{primary:M(new Date(r),"dd MMM yyyy"),secondary:M(new Date(r),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsxs(w,{align:"center",children:[" ",f," "]}),e.jsxs(w,{children:[" ",T(b)," "]}),e.jsxs(w,{children:[" ",T(b*.2)," "]}),e.jsx(w,{children:e.jsx(V,{variant:"soft",color:c==="completed"&&"success"||c==="pending"&&"warning"||c==="cancelled"&&"error"||"default",children:c})}),e.jsxs(w,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:[e.jsx(v,{color:I.value?"inherit":"default",onClick:I.onToggle,sx:{...I.value&&{bgcolor:"action.hover"}},children:e.jsx(p,{icon:"eva:arrow-ios-downward-fill"})}),e.jsx(v,{color:g.open?"inherit":"default",onClick:g.onOpen,children:e.jsx(p,{icon:"eva:more-vertical-fill"})})]})]}),N=e.jsx(_,{children:e.jsx(w,{sx:{p:0,border:"none"},colSpan:8,children:e.jsx(se,{in:I.value,timeout:"auto",unmountOnExit:!0,sx:{bgcolor:"background.neutral"},children:e.jsx(s,{component:oe,sx:{m:1.5},children:h.map(S=>e.jsxs(s,{direction:"row",alignItems:"center",sx:{p:R=>R.spacing(1.5,2,1.5,1.5),"&:not(:last-of-type)":{borderBottom:R=>`solid 2px ${R.palette.background.neutral}`}},children:[e.jsx(E,{src:S.images[0],variant:"rounded",sx:{width:48,height:48,mr:2}}),e.jsx(L,{primary:S.name,secondary:S.id,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),e.jsxs(l,{children:["x",S.quantity]}),e.jsx(l,{sx:{width:110,textAlign:"right"},children:T(S.salePrice)})]},S.id))})})})});return e.jsxs(e.Fragment,{children:[P,N,e.jsxs(G,{open:g.open,onClose:g.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(F,{onClick:()=>{y(),g.onClose()},children:[e.jsx(p,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(F,{onClick:()=>{j.onTrue(),g.onClose()},sx:{color:"error.main"},children:[e.jsx(p,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),e.jsx(Y,{open:j.value,onClose:j.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(k,{variant:"contained",color:"error",onClick:u,children:"Delete"})})]})}X.propTypes={onDeleteRow:o.func,onSelectRow:o.func,onViewRow:o.func,row:o.object,selected:o.bool};o.object,o.func,o.func,o.number;o.node,o.string,o.object;[...J];const Le=[{value:"all",label:"All"},...J],Ee=[{id:"orderNumber",label:"Order",width:116},{id:"name",label:"Customer"},{id:"createdAt",label:"Date",width:140},{id:"totalQuantity",label:"Items",width:120,align:"center"},{id:"totalAmount",label:"Price",width:140},{id:"commission",label:"Commission",width:140},{id:"status",label:"Status",width:110},{id:"",width:88}],Ne={name:"",status:"all",startDate:null,endDate:null};function Qe(){const[n,i]=C.useState([]),[y,a]=C.useState([]),[u,m]=C.useState(""),h=async()=>{try{const{data:t}=await U.get("/orders");i(t.reverse())}catch(t){console.log(t.message)}},c=async()=>{const t=await Se(ve(Pe,"users")),d=[];t.forEach(A=>{d.push(A.data())}),a(d)};C.useEffect(()=>{h(),c()},[]);const r=Fe({defaultOrderBy:"orderNumber"}),x=ae(),f=le(),b=q(),[j,I]=C.useState(Ne);j.startDate&&j.endDate&&j.startDate.getTime()>j.endDate.getTime();const g=Ae({inputData:n,comparator:Re(r.order,r.orderBy),filters:j}),P=g.slice(r.page*r.rowsPerPage,r.page*r.rowsPerPage+r.rowsPerPage),N=r.dense?52:72,S=!!j.name||j.status!=="all"||!!j.startDate&&!!j.endDate,R=!g.length&&S||!g.length,Z=C.useCallback(t=>{U.delete("orders",{data:{id:t}});const d=n.filter(A=>A.id!==t);i(d),r.onUpdatePageDeleteRow(P.length)},[P.length,r,n]),ee=C.useCallback(()=>{U.delete("orders",{data:{id:r.selected}});const t=n.filter(d=>!r.selected.includes(d.id));i(t),r.onUpdatePageDeleteRows({totalRows:n.length,totalRowsInPage:P.length,totalRowsFiltered:g.length})},[g.length,P.length,r,n]),ne=C.useCallback(t=>{f.push(z.dashboard.order.details(t))},[f]),[D,te]=C.useState("all");return e.jsxs(e.Fragment,{children:[e.jsxs(ie,{maxWidth:x.themeStretch?!1:"lg",children:[e.jsx(ce,{heading:"Orders",links:[{name:"Dashboard",href:z.dashboard.root},{name:"Orders",href:z.dashboard.order.root}],sx:{mb:{xs:3,md:5}}}),e.jsxs(W,{children:[e.jsx(de,{value:D,onChange:(t,d)=>te(d),sx:{px:2.5,boxShadow:t=>`inset 0 -2px 0 0 ${xe(t.palette.grey[500],.08)}`},children:Le.map(t=>e.jsx(he,{iconPosition:"end",value:t.value,label:t.label,icon:e.jsxs(V,{variant:(t.value==="all"||t.value===j.status)&&"filled"||"soft",color:t.value==="completed"&&"success"||t.value==="pending"&&"warning"||t.value==="cancelled"&&"error"||"default",children:[t.value==="all"&&n.length,t.value==="pending"&&n.filter(d=>d.status==="Order received"||d.status==="pending").length,t.value==="completed"&&n.filter(d=>d.status==="completed").length,t.value==="cancelled"&&n.filter(d=>d.status==="cancelled").length,t.value==="refunded"&&n.filter(d=>d.status==="refunded").length]})},t.value))}),e.jsx(l,{p:1,children:e.jsxs(pe,{children:[e.jsx(ue,{id:"demo-simple-select-label",children:"Partners"}),e.jsxs(me,{label:"Partners",value:u,onChange:t=>m(t.target.value),placeholder:"Partners",sx:{minWidth:"200px"},size:"small",children:[e.jsx(F,{value:"",children:"Select a partner"}),y.map(t=>e.jsx(F,{value:t.uid,children:t.displayName}))]})]})}),e.jsxs(Be,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(je,{dense:r.dense,numSelected:r.selected.length,rowCount:n.length,onSelectAllRows:t=>r.onSelectAllRows(t,n.map(d=>d.id)),action:e.jsx(ge,{title:"Delete",children:e.jsx(v,{color:"primary",onClick:b.onTrue,children:e.jsx(p,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(K,{children:e.jsxs(ye,{size:r.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(be,{order:r.order,orderBy:r.orderBy,headLabel:Ee,rowCount:n.length,numSelected:r.selected.length,onSort:r.onSort,onSelectAllRows:t=>r.onSelectAllRows(t,n.map(d=>d.id))}),e.jsxs(we,{children:[g.filter(t=>(D==="all"||D==="pending"&&(t.status==="pending"||t.status==="Order received")||D==="completed"&&t.status==="completed"||D==="cancelled"&&t.status==="cancelled"||D==="refunded"&&t.status==="refunded")&&(u?t.items.find(d=>d.userId===u):!0)).map(t=>e.jsx(X,{row:t,selected:r.selected.includes(t.id),onSelectRow:()=>r.onSelectRow(t.id),onDeleteRow:()=>Z(t.id),onViewRow:()=>ne(t.id)},t.id)),e.jsx(fe,{height:N,emptyRows:Oe(r.page,r.rowsPerPage,n.length)}),e.jsx(Ce,{notFound:R})]})]})})]}),e.jsx(Te,{count:g.length,page:r.page,rowsPerPage:r.rowsPerPage,onPageChange:r.onChangePage,onRowsPerPageChange:r.onChangeRowsPerPage,onChangeDense:r.onChangeDense})]})]}),e.jsx(Y,{open:b.value,onClose:b.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",r.selected.length," "]})," items?"]}),action:e.jsx(k,{variant:"contained",color:"error",onClick:()=>{ee(),b.onFalse()},children:"Delete"})})]})}function Ae({inputData:n,comparator:i,filters:y,dateError:a}){const{status:u,name:m,startDate:h,endDate:c}=y,r=n.map((x,f)=>[x,f]);return r.sort((x,f)=>{const b=i(x[0],f[0]);return b!==0?b:x[1]-f[1]}),n=r.map(x=>x[0]),m&&(n=n.filter(x=>x.orderNumber.toLowerCase().indexOf(m.toLowerCase())!==-1||x.customer.name.toLowerCase().indexOf(m.toLowerCase())!==-1||x.customer.email.toLowerCase().indexOf(m.toLowerCase())!==-1)),u!=="all"&&(n=n.filter(x=>x.status===u)),a||h&&c&&(n=n.filter(x=>B(x.createdAt)>=B(h)&&B(x.createdAt)<=B(c))),n}function Ue({customer:n,delivery:i,payment:y,shippingAddress:a}){const u=e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Customer Info",action:e.jsx(v,{children:e.jsx(p,{icon:"solar:pen-bold"})})}),e.jsxs(s,{direction:"row",sx:{p:3},children:[e.jsx(E,{alt:n==null?void 0:n.name,src:n==null?void 0:n.avatarUrl,sx:{width:48,height:48,mr:2}}),e.jsxs(s,{spacing:.5,alignItems:"flex-start",sx:{typography:"body2"},children:[e.jsx(H,{variant:"subtitle2",children:n==null?void 0:n.name}),e.jsx(l,{sx:{color:"text.secondary"},children:n==null?void 0:n.email}),e.jsx(k,{size:"small",color:"error",startIcon:e.jsx(p,{icon:"mingcute:add-line"}),sx:{mt:1},children:"Add to Blacklist"})]})]})]}),m=e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Delivery",action:e.jsx(v,{children:e.jsx(p,{icon:"solar:pen-bold"})})}),e.jsxs(s,{spacing:1.5,sx:{p:3,typography:"body2"},children:[e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(l,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Ship by"}),i==null?void 0:i.shipBy]}),e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(l,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Speedy"}),i==null?void 0:i.speedy]}),e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(l,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Tracking No."}),e.jsx(De,{underline:"always",color:"inherit",children:i==null?void 0:i.trackingNumber})]})]})]}),h=e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Shipping",action:e.jsx(v,{children:e.jsx(p,{icon:"solar:pen-bold"})})}),e.jsxs(s,{spacing:1.5,sx:{p:3,typography:"body2"},children:[e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(l,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Suite"}),a==null?void 0:a.fullAddress.split(",")[0]]}),e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(l,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Street Address"}),a==null?void 0:a.fullAddress.split(",")[1]]}),e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(l,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"City"}),a==null?void 0:a.fullAddress.split(",")[2]]}),e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(l,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Country"}),a==null?void 0:a.fullAddress.split(",")[4]]}),e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(l,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Phone number"}),a==null?void 0:a.phoneNumber]})]})]}),c=e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Payment",action:e.jsx(v,{children:e.jsx(p,{icon:"solar:pen-bold"})})}),e.jsxs(s,{direction:"row",alignItems:"center",sx:{p:3,typography:"body2"},children:[e.jsx(l,{component:"span",sx:{color:"text.secondary",flexGrow:1},children:"Type"}),"Cash",e.jsx(p,{icon:"la:money-bill-wave",width:24,sx:{ml:.5,color:"#85bb65"}})]})]});return e.jsxs(W,{children:[u,e.jsx($,{sx:{borderStyle:"dashed"}}),m,e.jsx($,{sx:{borderStyle:"dashed"}}),h,e.jsx($,{sx:{borderStyle:"dashed"}}),c]})}Ue.propTypes={customer:o.object,delivery:o.object,payment:o.object,shippingAddress:o.object};function ze({items:n=[],shipping:i,discount:y,taxes:a,subTotal:u,totalAmount:m}){const h=e.jsxs(s,{spacing:2,alignItems:"flex-end",sx:{my:3,textAlign:"right",typography:"body2"},children:[e.jsxs(s,{direction:"row",children:[e.jsx(l,{sx:{color:"text.secondary"},children:"Subtotal"}),e.jsx(l,{sx:{width:160,typography:"subtitle2"},children:T(u)||"-"})]}),e.jsxs(s,{direction:"row",children:[e.jsx(l,{sx:{color:"text.secondary"},children:"Shipping"}),e.jsx(l,{sx:{width:160,...i&&{color:"error.main"}},children:i?`- ${T(i)}`:"-"})]}),e.jsxs(s,{direction:"row",children:[e.jsx(l,{sx:{color:"text.secondary"},children:"Discount"}),e.jsx(l,{sx:{width:160,...y&&{color:"error.main"}},children:y?`- ${T(y)}`:"-"})]}),e.jsxs(s,{direction:"row",children:[e.jsx(l,{sx:{color:"text.secondary"},children:"Taxes"}),e.jsx(l,{sx:{width:160},children:a?T(a):"-"})]}),e.jsxs(s,{direction:"row",sx:{typography:"subtitle1"},children:[e.jsx(l,{children:"Total"}),e.jsx(l,{sx:{width:160},children:T(m)||"-"})]})]});return e.jsxs(W,{children:[e.jsx(O,{title:"Details"}),e.jsxs(s,{sx:{px:3},children:[e.jsx(K,{children:n==null?void 0:n.map(c=>e.jsxs(s,{direction:"row",alignItems:"center",sx:{py:3,minWidth:640,borderBottom:r=>`dashed 2px ${r.palette.background.neutral}`},children:[e.jsx(E,{src:c.images[0],variant:"rounded",sx:{width:48,height:48,mr:2}}),e.jsx(L,{primary:c.name,secondary:c.id,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),e.jsxs(l,{sx:{typography:"body2"},children:["x",c.quantity]}),e.jsx(l,{sx:{width:110,textAlign:"right",typography:"subtitle2"},children:T(c.salePrice)})]},c.id))}),h]})]})}ze.propTypes={discount:o.number,items:o.array,shipping:o.number,subTotal:o.number,taxes:o.number,totalAmount:o.number};function $e({status:n,backLink:i,createdAt:y,orderNumber:a,statusOptions:u,onChangeStatus:m}){const h=Q();return e.jsxs(e.Fragment,{children:[e.jsxs(s,{spacing:3,direction:{xs:"column",md:"row"},sx:{mb:{xs:3,md:5}},children:[e.jsxs(s,{spacing:1,direction:"row",alignItems:"flex-start",children:[e.jsx(v,{component:ke,href:i,children:e.jsx(p,{icon:"eva:arrow-ios-back-fill"})}),e.jsxs(s,{spacing:.5,children:[e.jsxs(s,{spacing:1,direction:"row",alignItems:"center",children:[e.jsxs(H,{variant:"h4",children:[" Order ",a," "]}),e.jsx(V,{variant:"soft",color:n==="completed"&&"success"||n==="pending"&&"warning"||n==="cancelled"&&"error"||"default",children:n})]}),e.jsx(H,{variant:"body2",sx:{color:"text.disabled"},children:Ie(y)})]})]}),e.jsxs(s,{flexGrow:1,spacing:1.5,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[e.jsx(k,{color:"inherit",variant:"outlined",endIcon:e.jsx(p,{icon:"eva:arrow-ios-downward-fill"}),onClick:h.onOpen,sx:{textTransform:"capitalize"},children:n}),e.jsx(k,{color:"inherit",variant:"outlined",startIcon:e.jsx(p,{icon:"solar:printer-minimalistic-bold"}),children:"Print"}),e.jsx(k,{color:"inherit",variant:"contained",startIcon:e.jsx(p,{icon:"solar:pen-bold"}),children:"Edit"})]})]}),e.jsx(G,{open:h.open,onClose:h.onClose,arrow:"top-right",sx:{width:140},children:u.map(c=>e.jsx(F,{selected:c.value===n,onClick:()=>{h.onClose(),m(c.value)},children:c.label},c.value))})]})}$e.propTypes={backLink:o.string,createdAt:o.instanceOf(Date),onChangeStatus:o.func,orderNumber:o.string,status:o.string,statusOptions:o.array};export{Qe as O,$e as a,ze as b,Ue as c};
