import{j as e,b8 as j,b9 as l,cg as f,bz as p,a4 as o,a$ as A,aT as T,W as C,bB as g,p as v,aS as L,bv as S,aN as _,bw as w,c5 as P,b4 as B,bE as D,a_ as O,b5 as k,b6 as y,b7 as E,cd as F}from"./index-63ee6fc8.js";function N({row:n,orders:d}){const a=d.filter(t=>t.customer.name===n);return e.jsxs(j,{hover:!0,children:[e.jsxs(l,{children:[a[0].customer.first_name," ",a[0].customer.last_name]}),e.jsx(l,{children:a[0].customer.phone_number}),e.jsxs(l,{children:[a[0].customer.address_line_1," ",e.jsx("br",{})," ",a[0].customer.address_line_2," ",e.jsx("br",{})," ",a[0].customer.city," ",e.jsx("br",{})," ",a[0].customer.country]}),e.jsx(l,{children:a.length}),e.jsx(l,{children:a.reduce((t,i)=>t+i.totalAmount,0)}),e.jsx(l,{children:(a.reduce((t,i)=>t+i.totalAmount,0)/a.length).toFixed(2)}),e.jsx(l,{children:f(a.reverse()[0].createdAt)})]})}const R=[{id:"name",label:"Name"},{id:"phoneNumber",label:"Phone Number"},{id:"Address",label:"Address"},{id:"Lifetime Purchase Time",label:"Lifetime Purchase Time"},{id:"Lifetime Purchase Amount",label:"Lifetime Purchase Amount"},{id:"Avarage order value",label:"Avarage Order Value"},{id:"Last Date Of Order",label:"Last Date Of Order",width:200}],$={name:"",role:[],status:"All"};function H(){const n=p(),[d,a]=o.useState([]),[t,i]=o.useState([]),m=o.useCallback(async()=>{const{data:s}=await A.get("/orders");a(s),i([...new Set(s.map(r=>r.customer.name))])},[]);o.useEffect(()=>{m()},[]);const[c,h]=o.useState($),u=o.useCallback((s,r)=>{n.onResetPage(),h(x=>({...x,[s]:r}))},[n]),b=o.useCallback((s,r)=>{u("status",r)},[u]);return e.jsxs(T,{px:5,children:[e.jsx(C,{children:e.jsx("title",{children:"Dashboard: Customer"})}),e.jsx(g,{heading:"Customer",links:[{name:"Dashboard",href:v.dashboard.root},{name:"Customer",href:"/dashboard/customer"}],sx:{mb:{xs:3,md:5}}}),e.jsxs(L,{children:[e.jsx(S,{value:c.status,onChange:b,sx:{px:2.5,boxShadow:s=>`inset 0 -2px 0 0 ${_(s.palette.grey[500],.08)}`},children:["All","VIP","Recurring Customer","Blacklisted"].map(s=>e.jsx(w,{style:{color:`${s==="Blacklisted"&&"#f00"}`},iconPosition:"end",value:s,label:s,icon:e.jsxs(P,{variant:(s==="all"||s===c.status)&&"filled"||"soft",children:[s==="All"&&t.length,s!=="All"&&0]})},s))}),e.jsxs(B,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(D,{}),e.jsx(O,{children:e.jsxs(k,{size:n.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(y,{headLabel:R}),e.jsxs(E,{children:[t.map((s,r)=>c.status==="All"&&e.jsx(N,{row:s,orders:d},r)),e.jsx(F,{notFound:!t})]})]})})]})]})]})}export{H as default};
