import{au as y,c3 as v,ae as e,aL as b,aq as A,ac as j,aw as m,aC as C,c4 as M,as as l,c5 as P,D as w,b3 as S,aj as R,c6 as W,b6 as B,bH as E,bw as N,aQ as Y,aG as h,c7 as G,c8 as J,c9 as q,b7 as H}from"./index-2f846590.js";import{C as D,u as U}from"./chart-8a650367.js";function f({title:s,percent:o,total:d,chart:u,sx:c,...i}){const a=y(),{colors:t=[a.palette.primary.light,a.palette.primary.main],series:r,options:p}=u,x={colors:t.map(g=>g[1]),fill:{type:"gradient",gradient:{colorStops:[{offset:0,color:t[0]},{offset:100,color:t[1]}]}},chart:{sparkline:{enabled:!0}},plotOptions:{bar:{columnWidth:"68%",borderRadius:2}},tooltip:{x:{show:!1},y:{formatter:g=>v(g),title:{formatter:()=>""}},marker:{show:!1}},...p};return e.jsxs(b,{sx:{display:"flex",alignItems:"center",p:3,...c},...i,children:[e.jsxs(A,{sx:{flexGrow:1},children:[e.jsx(j,{variant:"subtitle2",children:s}),e.jsxs(m,{direction:"row",alignItems:"center",sx:{mt:2,mb:1},children:[e.jsx(C,{width:24,icon:o<0?"solar:double-alt-arrow-down-bold-duotone":"solar:double-alt-arrow-up-bold-duotone",sx:{mr:1,color:"success.main",...o<0&&{color:"error.main"}}}),e.jsxs(j,{component:"div",variant:"subtitle2",children:[o>0&&"+",M(o)]})]}),e.jsx(j,{variant:"h3",children:v(d)})]}),e.jsx(D,{type:"bar",series:[{data:r}],options:x,width:60,height:36})]})}f.propTypes={chart:l.object,percent:l.number,sx:l.object,title:l.string,total:l.number};function T({title:s,subheader:o,chart:d,...u}){const c=y(),{colors:i=[[c.palette.primary.light,c.palette.primary.main],[c.palette.warning.light,c.palette.warning.main]],categories:a,series:t,options:r}=d,p=P(),[x,g]=w.useState("2024"),k=U({colors:i.map(n=>n[1]),fill:{type:"gradient",gradient:{colorStops:i.map(n=>[{offset:0,color:n[0]},{offset:100,color:n[1]}])}},xaxis:{categories:a},...r}),F=w.useCallback(n=>{p.onClose(),g(n)},[p]);return e.jsxs(e.Fragment,{children:[e.jsxs(b,{...u,children:[e.jsx(S,{title:s,subheader:o,action:e.jsxs(R,{onClick:p.onOpen,sx:{pl:1,py:.5,pr:.5,borderRadius:1,typography:"subtitle2",bgcolor:"background.neutral"},children:[x,e.jsx(C,{width:16,icon:p.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:.5}})]})}),t.map(n=>e.jsx(A,{sx:{mt:3,mx:3},children:n.year===x&&e.jsx(D,{dir:"ltr",type:"line",series:n.data,options:k,height:364})},n.year))]}),e.jsx(W,{open:p.open,onClose:p.onClose,sx:{width:140},children:t.map(n=>e.jsx(B,{selected:n.year===x,onClick:()=>F(n.year),children:n.year},n.year))})]})}T.propTypes={chart:l.object,subheader:l.string,title:l.string};function I({title:s,subheader:o,list:d,...u}){return e.jsxs(b,{...u,children:[e.jsx(S,{title:s,subheader:o}),e.jsx(E,{children:e.jsx(m,{spacing:3,sx:{p:3},children:d.map((c,i)=>e.jsx(O,{country:c,index:i},i))})})]})}I.propTypes={list:l.array,subheader:l.string,title:l.string};function O({country:s,index:o}){return e.jsxs(m,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(m,{direction:"row",alignItems:"center",children:o+1}),e.jsx(m,{direction:"row",alignItems:"center",children:e.jsx(j,{variant:"subtitle2",noWrap:!0,children:s.displayName})}),e.jsx(m,{direction:"row",alignItems:"center",children:e.jsx(j,{variant:"subtitle2",noWrap:!0,children:s.storeName})})]})}O.propTypes={country:l.object};function L(){const[s,o]=w.useState([]),[d,u]=w.useState([]),c=async()=>{const a=await G(J(q,"users")),t=[];a.forEach(r=>{t.push(r.data())}),u(t.reverse())};w.useEffect(()=>{c(),N.get("/orders").then(a=>{o(a.data)})},[]);const i=y();return Y(),e.jsx(A,{px:5,children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{xs:12,md:4,children:e.jsx(f,{title:"Total Active Partners",percent:0,total:d.length,chart:{series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(f,{title:"Total Revenue",percent:0,total:s.reduce((a,t)=>a+t.totalAmount,0),chart:{colors:[i.palette.info.light,i.palette.info.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(f,{title:"Total Completed Orders",percent:0,total:s.filter(a=>a.status==="completed").length,chart:{colors:[i.palette.warning.light,i.palette.warning.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:6,lg:8,children:e.jsx(T,{title:"Sales and Revenue",chart:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],series:[{year:"2023",data:[{name:"Revenue",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(a=>s.reduce((t,r)=>new Date(r.createdAt).getFullYear()===2023&&new Date(r.createdAt).getMonth()===a?t+r.totalAmount:t,0)*5/100)},{name:"Sales",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(a=>s.reduce((t,r)=>new Date(r.createdAt).getFullYear()===2023&&new Date(r.createdAt).getMonth()===a?t+r.totalAmount:t,0))}]},{year:"2024",data:[{name:"Revenue",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(a=>s.reduce((t,r)=>new Date(r.createdAt).getFullYear()===2024&&new Date(r.createdAt).getMonth()===a?t+r.totalAmount:t,0)*5/100)},{name:"Sales",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(a=>s.reduce((t,r)=>new Date(r.createdAt).getFullYear()===2024&&new Date(r.createdAt).getMonth()===a?t+r.totalAmount:t,0))}]}]}})}),e.jsx(h,{xs:12,md:6,lg:4,children:e.jsx(I,{title:"Top  Partners",list:d})})]})})}function _(){return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx("title",{children:" Dashboard: App"})}),e.jsx(L,{})]})}export{_ as default};
