import{aA as R,bz as S,a4 as c,bA as T,aB as y,a$ as p,p as g,j as t,aT as k,bB as B,aS as D,bC as F,bD as A,b4 as L,bE as O,bp as E,aK as I,aL as v,a_ as H,b5 as _,b6 as U,b7 as z,bF as V,bG as q,bH as G,bI as K,B as N,bJ as W,W as $}from"./index-6f20dcd5.js";const J=[{id:"name",label:"Product"},{id:"createdAt",label:"Create at",width:160},{id:"inventoryType",label:"Stock",width:160},{id:"price",label:"Price",width:140},{id:"sales Price",label:"Sales Price",width:140},{id:"publish",label:"Publish",width:110},{id:"",width:88}],M=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],Q={name:"",stock:[]};function X(){const l=R(),e=S(),[r,i]=c.useState([]),[h,u]=c.useState(Q),{productsLoading:o}=T();c.useEffect(()=>{(async()=>{try{const{data:{products:a}}=await p.get("products",{params:{perPage:1e4}});i(a)}catch{alert("error Occure")}})()},[]);const n=y(),d=Y({inputData:r,comparator:W(e.order,e.orderBy),filters:h}),b=d.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),w=e.dense?60:80,m=c.useCallback((s,a)=>{e.onResetPage(),u(P=>({...P,[s]:a}))},[e]),x=c.useCallback(async s=>{try{await p.delete(`products/${s}`);const a=r.filter(P=>P.id!==s);i(a),e.onUpdatePageDeleteRow(b.length)}catch(a){alert(a.response.data.message)}},[b.length,e,r]),C=c.useCallback(async()=>{try{await p.delete("products",{data:{ids:e.selected}});const s=r.filter(a=>!e.selected.includes(a.id));i(s),e.onUpdatePageDeleteRows({totalRows:r.length,totalRowsInPage:b.length,totalRowsFiltered:d.length})}catch(s){alert(s.response.data.message)}},[d.length,b.length,e,r]),j=c.useCallback(s=>{l.push(g.dashboard.product.edit(s))},[l]),f=c.useCallback(s=>{l.push(g.dashboard.product.details(s))},[l]);return t.jsxs(t.Fragment,{children:[t.jsxs(k,{px:5,children:[t.jsx(B,{heading:"Products",links:[{name:"Dashboard",href:g.dashboard.root},{name:"Products",href:g.dashboard.product.root}],sx:{mb:{xs:3,md:5}}}),t.jsxs(D,{children:[t.jsx(F,{filters:h,onFilters:m,stockOptions:A,publishOptions:M}),t.jsxs(L,{sx:{position:"relative",overflow:"unset"},children:[t.jsx(O,{dense:e.dense,numSelected:e.selected.length,rowCount:r.length,onSelectAllRows:s=>e.onSelectAllRows(s,r.map(a=>a.id)),action:t.jsx(E,{title:"Delete",children:t.jsx(I,{color:"primary",onClick:n.onTrue,children:t.jsx(v,{icon:"solar:trash-bin-trash-bold"})})})}),t.jsx(H,{children:t.jsxs(_,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[t.jsx(U,{order:e.order,orderBy:e.orderBy,headLabel:J,rowCount:r.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:s=>e.onSelectAllRows(s,r.map(a=>a.id))}),t.jsx(z,{children:o?[...Array(e.rowsPerPage)].map((s,a)=>t.jsx(V,{sx:{height:w}},a)):t.jsx(t.Fragment,{children:d.map(s=>t.jsx(q,{row:s,selected:e.selected.includes(s.id),onSelectRow:()=>e.onSelectRow(s.id),onDeleteRow:()=>x(s.id),onEditRow:()=>j(s.id),onViewRow:()=>f(s.id)},s.id))})})]})})]}),t.jsx(G,{count:d.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),t.jsx(K,{open:n.value,onClose:n.onFalse,title:"Delete",content:t.jsxs(t.Fragment,{children:["Are you sure want to delete ",t.jsxs("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:t.jsx(N,{variant:"contained",color:"error",onClick:()=>{C(),n.onFalse()},children:"Delete"})})]})}function Y({inputData:l,comparator:e,filters:r}){const{name:i,stock:h}=r,u=l.map((o,n)=>[o,n]);return u.sort((o,n)=>{const d=e(o[0],n[0]);return d!==0?d:o[1]-n[1]}),l=u.map(o=>o[0]),i&&(l=l.filter(o=>o.name.toLowerCase().indexOf(i.toLowerCase())!==-1)),h.length&&(l=l.filter(o=>h[0]==="in stock"?!!o.quantity:!o.quantity)),l}function ee(){return t.jsxs(t.Fragment,{children:[t.jsx($,{children:t.jsx("title",{children:" Dashboard: Product List"})}),t.jsx(X,{})]})}export{ee as default};
