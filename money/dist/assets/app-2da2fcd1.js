import{u as y,aM as v,j as e,aN as A,aO as b,g as j,S as m,aK as S,aP as R,P as l,aQ as k,a4 as f,aR as C,aS as F,aT as W,aU as N,aV as Y,aW as B,aX as E,aY as h,aZ as J,a_ as U,a$ as G,W as V}from"./index-519398e3.js";import{C as D,u as _}from"./chart-8464593c.js";function w({title:s,percent:o,total:d,chart:u,sx:c,...i}){const r=y(),{colors:t=[r.palette.primary.light,r.palette.primary.main],series:a,options:p}=u,x={colors:t.map(g=>g[1]),fill:{type:"gradient",gradient:{colorStops:[{offset:0,color:t[0]},{offset:100,color:t[1]}]}},chart:{sparkline:{enabled:!0}},plotOptions:{bar:{columnWidth:"68%",borderRadius:2}},tooltip:{x:{show:!1},y:{formatter:g=>v(g),title:{formatter:()=>""}},marker:{show:!1}},...p};return e.jsxs(A,{sx:{display:"flex",alignItems:"center",p:3,...c},...i,children:[e.jsxs(b,{sx:{flexGrow:1},children:[e.jsx(j,{variant:"subtitle2",children:s}),e.jsxs(m,{direction:"row",alignItems:"center",sx:{mt:2,mb:1},children:[e.jsx(S,{width:24,icon:o<0?"solar:double-alt-arrow-down-bold-duotone":"solar:double-alt-arrow-up-bold-duotone",sx:{mr:1,color:"success.main",...o<0&&{color:"error.main"}}}),e.jsxs(j,{component:"div",variant:"subtitle2",children:[o>0&&"+",R(o)]})]}),e.jsx(j,{variant:"h3",children:v(d)})]}),e.jsx(D,{type:"bar",series:[{data:a}],options:x,width:60,height:36})]})}w.propTypes={chart:l.object,percent:l.number,sx:l.object,title:l.string,total:l.number};function T({title:s,subheader:o,chart:d,...u}){const c=y(),{colors:i=[[c.palette.primary.light,c.palette.primary.main],[c.palette.warning.light,c.palette.warning.main]],categories:r,series:t,options:a}=d,p=k(),[x,g]=f.useState("2024"),P=_({colors:i.map(n=>n[1]),fill:{type:"gradient",gradient:{colorStops:i.map(n=>[{offset:0,color:n[0]},{offset:100,color:n[1]}])}},xaxis:{categories:r},...a}),M=f.useCallback(n=>{p.onClose(),g(n)},[p]);return e.jsxs(e.Fragment,{children:[e.jsxs(A,{...u,children:[e.jsx(C,{title:s,subheader:o,action:e.jsxs(F,{onClick:p.onOpen,sx:{pl:1,py:.5,pr:.5,borderRadius:1,typography:"subtitle2",bgcolor:"background.neutral"},children:[x,e.jsx(S,{width:16,icon:p.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:.5}})]})}),t.map(n=>e.jsx(b,{sx:{mt:3,mx:3},children:n.year===x&&e.jsx(D,{dir:"ltr",type:"line",series:n.data,options:P,height:364})},n.year))]}),e.jsx(W,{open:p.open,onClose:p.onClose,sx:{width:140},children:t.map(n=>e.jsx(N,{selected:n.year===x,onClick:()=>M(n.year),children:n.year},n.year))})]})}T.propTypes={chart:l.object,subheader:l.string,title:l.string};function I({title:s,subheader:o,list:d,...u}){return e.jsxs(A,{...u,children:[e.jsx(C,{title:s,subheader:o}),e.jsx(Y,{children:e.jsx(m,{spacing:3,sx:{p:3},children:d.map((c,i)=>e.jsx(O,{country:c,index:i},i))})})]})}I.propTypes={list:l.array,subheader:l.string,title:l.string};function O({country:s,index:o}){return e.jsxs(m,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(m,{direction:"row",alignItems:"center",children:o+1}),e.jsx(m,{direction:"row",alignItems:"center",children:e.jsx(j,{variant:"subtitle2",noWrap:!0,children:s.displayName})}),e.jsx(m,{direction:"row",alignItems:"center",children:e.jsx(j,{variant:"subtitle2",noWrap:!0,children:s.storeName})})]})}O.propTypes={country:l.object};function q(){const[s,o]=f.useState([]),[d,u]=f.useState([]),c=async()=>{const r=await J(U(G,"users")),t=[];r.forEach(a=>{t.push(a.data())}),u(t.reverse())};f.useEffect(()=>{c(),B.get("/orders").then(r=>{o(r.data)})},[]);const i=y();return E(),e.jsx(b,{px:5,children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{xs:12,md:4,children:e.jsx(w,{title:"Total Active Partners",percent:0,total:d.length,chart:{series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(w,{title:"Total Revenue",percent:0,total:s.reduce((r,t)=>r+t.totalAmount,0),chart:{colors:[i.palette.info.light,i.palette.info.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(w,{title:"Total Completed Orders",percent:0,total:s.filter(r=>r.status==="completed").length,chart:{colors:[i.palette.warning.light,i.palette.warning.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:6,lg:8,children:e.jsx(T,{title:"Sales and Revenue",chart:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],series:[{year:"2023",data:[{name:"Revenue",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(r=>s.reduce((t,a)=>new Date(a.createdAt).getFullYear()===2023&&new Date(a.createdAt).getMonth()===r?t+a.totalAmount:t,0)*5/100)},{name:"Sales",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(r=>s.reduce((t,a)=>new Date(a.createdAt).getFullYear()===2023&&new Date(a.createdAt).getMonth()===r?t+a.totalAmount:t,0))}]},{year:"2024",data:[{name:"Revenue",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(r=>s.reduce((t,a)=>new Date(a.createdAt).getFullYear()===2024&&new Date(a.createdAt).getMonth()===r?t+a.totalAmount:t,0)*5/100)},{name:"Sales",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(r=>s.reduce((t,a)=>new Date(a.createdAt).getFullYear()===2024&&new Date(a.createdAt).getMonth()===r?t+a.totalAmount:t,0))}]}]}})}),e.jsx(h,{xs:12,md:6,lg:4,children:e.jsx(I,{title:"Top  Partners",list:d})})]})})}function Q(){return e.jsxs(e.Fragment,{children:[e.jsx(V,{children:e.jsx("title",{children:" Dashboard: App"})}),e.jsx(q,{})]})}export{Q as default};
