import{bq as Z,aA as $,aU as G,j as e,b7 as W,b8 as m,bW as ee,aS as d,b9 as H,b$ as _,c0 as q,c1 as N,c2 as V,c3 as ne,aJ as v,aK as j,c4 as se,S as o,c5 as ae,B as R,aX as Q,aY as D,bH as J,P as i,a4 as k,by as re,az as te,bI as le,a_ as E,p as U,bA as oe,aR as K,bu as ie,aM as de,bv as ce,c6 as he,c7 as xe,c8 as pe,b3 as ge,bD as je,bo as ue,aZ as be,b4 as ye,b5 as me,b6 as we,c9 as fe,ca as Ce,cb as ve,bG as Se,b_ as Te,b0 as Pe,b1 as ke,cc as A,b2 as Ie,aV as O,g as M,e as Re,cd as z,R as De,ce as Ae}from"./index-ad831b55.js";function X({row:n,store:t=[],selected:w,onViewRow:C,onSelectRow:u,onDeleteRow:b}){const{id:x,items:p,status:a,createdAt:l,customer:g,totalQuantity:y,subTotal:f}=n;Z();const S=$(),T=$(),P=G(),L=e.jsxs(W,{hover:!0,selected:w,children:[e.jsx(m,{padding:"checkbox",children:e.jsx(ee,{checked:w,onClick:u})}),e.jsx(m,{children:e.jsx(d,{onClick:C,sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:`#${x.toString().padStart(3,"0")}`})}),e.jsxs(m,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(H,{alt:g.name,src:g.avatarUrl,sx:{mr:2}}),e.jsx(_,{primary:g.name,secondary:g.email,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}})]}),e.jsx(m,{width:"300px",children:p.map(h=>{var I;return e.jsxs("p",{style:{whiteSpace:"nowrap"},children:[" ",(I=t.find(c=>h.userId===c.uid))==null?void 0:I.displayName,"  "]},h.id)})}),e.jsx(m,{children:e.jsx(_,{primary:q(new Date(l),"dd MMM yyyy"),secondary:q(new Date(l),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsxs(m,{align:"center",children:[" ",y," "]}),e.jsxs(m,{children:[" ",N(f)," "]}),e.jsxs(m,{children:[" ",N(f*.3)," "]}),e.jsx(m,{children:e.jsx(V,{variant:"soft",color:a==="completed"&&"success"||a==="pending"&&"warning"||a==="cancelled"&&"error"||"default",children:a})}),e.jsxs(m,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:[a==="pending"&&e.jsx(ne,{to:`/dashboard/order/${x}/edit`,children:e.jsx(v,{color:T.value?"inherit":"default",sx:{...T.value&&{bgcolor:"action.hover"}},children:e.jsx(j,{icon:"material-symbols:edit-outline"})})}),e.jsx(v,{color:T.value?"inherit":"default",onClick:T.onToggle,sx:{...T.value&&{bgcolor:"action.hover"}},children:e.jsx(j,{icon:"eva:arrow-ios-downward-fill"})}),e.jsx(v,{color:P.open?"inherit":"default",onClick:P.onOpen,children:e.jsx(j,{icon:"eva:more-vertical-fill"})})]})]}),F=e.jsx(W,{children:e.jsx(m,{sx:{p:0,border:"none"},colSpan:10,children:e.jsx(se,{in:T.value,timeout:"auto",unmountOnExit:!0,sx:{bgcolor:"background.neutral"},children:e.jsx(o,{component:ae,sx:{m:1.5},children:p.map(h=>{var I;return e.jsxs(o,{direction:"row",alignItems:"center",sx:{p:c=>c.spacing(1.5,2,1.5,1.5),"&:not(:last-of-type)":{borderBottom:c=>`solid 2px ${c.palette.background.neutral}`}},children:[e.jsx(H,{src:h.images[0],variant:"rounded",sx:{width:48,height:48,mr:2}}),e.jsx(_,{primary:h.name,secondary:h.id,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),e.jsx(d,{sx:{m:5},children:(I=t==null?void 0:t.find(c=>c.uid===h.userId))==null?void 0:I.displayName}),e.jsxs(d,{children:["x",h.quantity]}),e.jsx(d,{sx:{width:110,textAlign:"right"},children:N(h.price)}),e.jsx(d,{sx:{mx:3},children:e.jsx(R,{variant:"contained",color:"info",children:h==null?void 0:h.status})})]},h.id)})})})})});return e.jsxs(e.Fragment,{children:[L,F,e.jsxs(Q,{open:P.open,onClose:P.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(D,{onClick:()=>{C(),P.onClose()},children:[e.jsx(j,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(D,{onClick:()=>{S.onTrue(),P.onClose()},sx:{color:"error.main"},children:[e.jsx(j,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),e.jsx(J,{open:S.value,onClose:S.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(R,{variant:"contained",color:"error",onClick:b,children:"Delete"})})]})}X.propTypes={onDeleteRow:i.func,onSelectRow:i.func,onViewRow:i.func,row:i.object,selected:i.bool};const Oe=[{value:"all",label:"All"},...Te],Le=[{id:"orderNumber",label:"Order",width:116},{id:"name",label:"Customer"},{id:"partners",label:"Partners"},{id:"createdAt",label:"Date",width:140},{id:"totalQuantity",label:"Items",width:120,align:"center"},{id:"totalAmount",label:"Price",width:140},{id:"commission",label:"Commission",width:140},{id:"status",label:"Status",width:110},{id:"",width:88}],Fe={name:"",status:"all",startDate:null,endDate:null};function Ue(){const[n,t]=k.useState([]),[w,C]=k.useState([]),[u,b]=k.useState(""),x=async()=>{try{const{data:s}=await E.get("/orders");t(s.reverse())}catch(s){console.log(s.message)}},p=async()=>{const s=await Pe(ke(Ie,"users")),r=[];s.forEach(B=>{r.push(B.data())}),C(r)};k.useEffect(()=>{x(),p()},[]);const a=re({defaultOrderBy:"orderNumber"}),l=te(),g=$(),y=Fe,f=Be({inputData:n,comparator:le(a.order,a.orderBy),filters:y}),S=f.slice(a.page*a.rowsPerPage,a.page*a.rowsPerPage+a.rowsPerPage),T=a.dense?52:72,P=!!y.name||y.status!=="all"||!!y.startDate&&!!y.endDate,L=!f.length&&P||!f.length,F=k.useCallback(s=>{E.delete("orders",{data:{id:s}});const r=n.filter(B=>B.id!==s);t(r),a.onUpdatePageDeleteRow(S.length)},[S.length,a,n]),h=k.useCallback(()=>{E.delete("orders",{data:{id:a.selected}});const s=n.filter(r=>!a.selected.includes(r.id));t(s),a.onUpdatePageDeleteRows({totalRows:n.length,totalRowsInPage:S.length,totalRowsFiltered:f.length})},[f.length,S.length,a,n]),I=k.useCallback(s=>{l.push(U.dashboard.order.details(s))},[l]),[c,Y]=k.useState("all");return e.jsxs(e.Fragment,{children:[e.jsxs(d,{px:5,children:[e.jsx(oe,{heading:"Orders",links:[{name:"Dashboard",href:U.dashboard.root},{name:"Orders",href:U.dashboard.order.root}],sx:{mb:{xs:3,md:5}}}),e.jsxs(K,{children:[e.jsx(ie,{value:c,onChange:(s,r)=>Y(r),sx:{px:2.5,boxShadow:s=>`inset 0 -2px 0 0 ${de(s.palette.grey[500],.08)}`},children:Oe.map(s=>e.jsx(ce,{iconPosition:"end",value:s.value,label:s.label,icon:e.jsxs(V,{variant:(s.value==="all"||s.value===y.status)&&"filled"||"soft",color:s.value==="processing"&&"info"||s.value==="completed"&&"success"||s.value==="pending"&&"warning"||s.value==="cancelled"&&"error"||"default",children:[s.value==="all"&&n.length,s.value==="processing"&&n.filter(r=>r.status==="processing").length,s.value==="pending"&&n.filter(r=>r.status==="Order received"||r.status==="pending").length,s.value==="In Transit"&&n.filter(r=>r.status==="In Transit").length,s.value==="completed"&&n.filter(r=>r.status==="completed").length,s.value==="cancelled"&&n.filter(r=>r.status==="cancelled").length,s.value==="refunded"&&n.filter(r=>r.status==="refunded").length]})},s.value))}),e.jsx(d,{p:1,children:e.jsxs(he,{children:[e.jsx(xe,{id:"demo-simple-select-label",children:"Partners"}),e.jsxs(pe,{label:"Partners",value:u,onChange:s=>b(s.target.value),placeholder:"Partners",sx:{minWidth:"200px"},size:"small",children:[e.jsx(D,{value:"",children:"Select a partner"}),w.map(s=>e.jsx(D,{value:s.uid,children:s.displayName},s.uid))]})]})}),e.jsxs(ge,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(je,{dense:a.dense,numSelected:a.selected.length,rowCount:n.length,onSelectAllRows:s=>a.onSelectAllRows(s,n.map(r=>r.id)),action:e.jsx(ue,{title:"Delete",children:e.jsx(v,{color:"primary",onClick:g.onTrue,children:e.jsx(j,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(be,{children:e.jsxs(ye,{size:a.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(me,{order:a.order,orderBy:a.orderBy,headLabel:Le,rowCount:n.length,numSelected:a.selected.length,onSort:a.onSort,onSelectAllRows:s=>a.onSelectAllRows(s,n.map(r=>r.id))}),e.jsxs(we,{children:[f.filter(s=>(c==="all"||c==="processing"&&s.status==="processing"||c==="pending"&&(s.status==="pending"||s.status==="Order received")||c==="completed"&&s.status==="completed"||c==="cancelled"&&s.status==="cancelled"||c==="In Transit"&&s.status==="In Transit"||c==="refunded"&&s.status==="refunded")&&(u?s.items.find(r=>r.userId===u):!0)).map(s=>e.jsx(X,{store:w,row:s,selected:a.selected.includes(s.id),onSelectRow:()=>a.onSelectRow(s.id),onDeleteRow:()=>F(s.id),onViewRow:()=>I(s.id)},s.id)),e.jsx(fe,{height:T,emptyRows:Ce(a.page,a.rowsPerPage,n.length)}),e.jsx(ve,{notFound:L})]})]})})]}),e.jsx(Se,{count:f.length,page:a.page,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage,onChangeDense:a.onChangeDense})]})]}),e.jsx(J,{open:g.value,onClose:g.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",a.selected.length," "]})," items?"]}),action:e.jsx(R,{variant:"contained",color:"error",onClick:()=>{h(),g.onFalse()},children:"Delete"})})]})}function Be({inputData:n,comparator:t,filters:w,dateError:C}){const{status:u,name:b,startDate:x,endDate:p}=w,a=n.map((l,g)=>[l,g]);return a.sort((l,g)=>{const y=t(l[0],g[0]);return y!==0?y:l[1]-g[1]}),n=a.map(l=>l[0]),b&&(n=n.filter(l=>l.orderNumber.toLowerCase().indexOf(b.toLowerCase())!==-1||l.customer.name.toLowerCase().indexOf(b.toLowerCase())!==-1||l.customer.email.toLowerCase().indexOf(b.toLowerCase())!==-1)),u!=="all"&&(n=n.filter(l=>l.status===u)),C||x&&p&&(n=n.filter(l=>A(l.createdAt)>=A(x)&&A(l.createdAt)<=A(p))),n}function _e({customer:n,delivery:t,payment:w,shippingAddress:C}){const u=e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Customer Info",action:e.jsx(v,{children:e.jsx(j,{icon:"solar:pen-bold"})})}),e.jsxs(o,{direction:"row",sx:{p:3},children:[e.jsx(H,{alt:n==null?void 0:n.name,src:n==null?void 0:n.avatarUrl,sx:{width:48,height:48,mr:2}}),e.jsxs(o,{spacing:.5,alignItems:"flex-start",sx:{typography:"body2"},children:[e.jsxs(M,{variant:"subtitle2",children:[n==null?void 0:n.first_name," ",n==null?void 0:n.last_name]}),e.jsx(d,{sx:{color:"text.secondary"},children:n==null?void 0:n.email}),e.jsx(R,{size:"small",color:"error",startIcon:e.jsx(j,{icon:"mingcute:add-line"}),sx:{mt:1},children:"Add to Blacklist"})]})]})]}),b=e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Delivery",action:e.jsx(v,{children:e.jsx(j,{icon:"solar:pen-bold"})})}),e.jsxs(o,{spacing:1.5,sx:{p:3,typography:"body2"},children:[e.jsxs(o,{direction:"row",alignItems:"center",children:[e.jsx(d,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Ship by"}),t==null?void 0:t.shipBy]}),e.jsxs(o,{direction:"row",alignItems:"center",children:[e.jsx(d,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Speedy"}),t==null?void 0:t.speedy]}),e.jsxs(o,{direction:"row",alignItems:"center",children:[e.jsx(d,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Tracking No."}),e.jsx(Re,{underline:"always",color:"inherit",children:t==null?void 0:t.trackingNumber})]})]})]}),x=e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Shipping",action:e.jsx(v,{children:e.jsx(j,{icon:"solar:pen-bold"})})}),e.jsxs(o,{spacing:1.5,sx:{p:3,typography:"body2"},children:[e.jsxs(o,{direction:"row",alignItems:"center",children:[e.jsx(d,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Name"}),n==null?void 0:n.first_name," ",n==null?void 0:n.last_name]}),e.jsxs(o,{direction:"row",alignItems:"center",children:[e.jsx(d,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Address Line 1"}),n==null?void 0:n.address_line_1]}),e.jsxs(o,{direction:"row",alignItems:"center",children:[e.jsx(d,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Address Line 2"}),n==null?void 0:n.address_line_2]}),e.jsxs(o,{direction:"row",alignItems:"center",children:[e.jsx(d,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"City"}),n==null?void 0:n.city]}),e.jsxs(o,{direction:"row",alignItems:"center",children:[e.jsx(d,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Country"}),n==null?void 0:n.country]}),e.jsxs(o,{direction:"row",alignItems:"center",children:[e.jsx(d,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Phone Number"}),n==null?void 0:n.phone_number]})]})]}),p=e.jsxs(e.Fragment,{children:[e.jsx(O,{title:"Payment",action:e.jsx(v,{children:e.jsx(j,{icon:"solar:pen-bold"})})}),e.jsxs(o,{direction:"row",alignItems:"center",sx:{p:3,typography:"body2"},children:[e.jsx(d,{component:"span",sx:{color:"text.secondary",flexGrow:1},children:"Type"}),"Cash",e.jsx(j,{icon:"la:money-bill-wave",width:24,sx:{ml:.5,color:"#85bb65"}})]})]});return e.jsxs(K,{children:[u,e.jsx(z,{sx:{borderStyle:"dashed"}}),b,e.jsx(z,{sx:{borderStyle:"dashed"}}),x,e.jsx(z,{sx:{borderStyle:"dashed"}}),p]})}_e.propTypes={customer:i.object,delivery:i.object,payment:i.object,shippingAddress:i.object};i.number,i.array,i.number,i.number,i.number,i.number;function Ne({status:n,backLink:t,createdAt:w,orderNumber:C,statusOptions:u,onChangeStatus:b}){const x=G();return e.jsxs(e.Fragment,{children:[e.jsxs(o,{spacing:3,direction:{xs:"column",md:"row"},sx:{mb:{xs:3,md:5}},children:[e.jsxs(o,{spacing:1,direction:"row",alignItems:"flex-start",children:[e.jsx(v,{component:De,href:t,children:e.jsx(j,{icon:"eva:arrow-ios-back-fill"})}),e.jsxs(o,{spacing:.5,children:[e.jsxs(o,{spacing:1,direction:"row",alignItems:"center",children:[e.jsxs(M,{variant:"h4",children:[" Order ",C," "]}),e.jsx(V,{variant:"soft",color:n==="completed"&&"success"||n==="pending"&&"warning"||n==="cancelled"&&"error"||"default",children:n})]}),e.jsx(M,{variant:"body2",sx:{color:"text.disabled"},children:Ae(w)})]})]}),e.jsx(o,{flexGrow:1,spacing:1.5,direction:"row",alignItems:"center",justifyContent:"flex-end",children:e.jsx(R,{color:"inherit",variant:"outlined",endIcon:e.jsx(j,{icon:"eva:arrow-ios-downward-fill"}),onClick:x.onOpen,sx:{textTransform:"capitalize"},children:n})})]}),e.jsx(Q,{open:x.open,onClose:x.onClose,arrow:"top-right",sx:{width:140},children:u.map(p=>e.jsx(D,{selected:p.value===n,onClick:()=>{x.onClose(),b(p.value)},children:p.label},p.value))})]})}Ne.propTypes={backLink:i.string,createdAt:i.string,onChangeStatus:i.func,orderNumber:i.string,status:i.string,statusOptions:i.array};export{Ue as O,Ne as a,_e as b};
