import{D as l,c0 as V,af as e,aJ as E,b1 as I,ao as S,aj as Y,aA as k,c5 as K,b4 as N,c1 as Q,c2 as R,c3 as H,aq as t,c4 as q,bC as X,aW as Z,ab as ee,as as W,b_ as P,au as te,am as O,ac as T,b$ as se,aO as ae,aC as re,aE as h,b5 as ne}from"./index-bb3ecc03.js";import{u as G,C as A}from"./chart-f3d40f88.js";import{a as w}from"./api-3aac980b.js";import{b as oe,T as ie,a as v}from"./table-pagination-custom-9e066bb8.js";import{T as le,a as ce,b as de}from"./TableContainer-cd1ab181.js";import"./color-picker-430bfbcb.js";import"./axios-e0d8a382.js";function M({title:s,subheader:i,chart:c,...x}){const[p,d]=l.useState([]),[n,m]=l.useState("Vape Amazon"),f=async()=>{const a=await R(H(q,"users")),o=[];a.forEach(U=>{o.push(U.data())}),d(o.reverse()),m(o[0].storeName)};l.useEffect(()=>{f()},[]);const[g,r]=l.useState([]);l.useEffect(()=>{w.get("store-analytics",{params:{storeName:n}}).then(o=>{r(o.data)});const a=setInterval(()=>{w.get("store-analytics",{params:{storeName:n}}).then(o=>{r(o.data)})},5e3);return()=>{clearInterval(a)}},[n]);const{colors:u,categories:y,options:L}=c,b=V(),[C,_]=l.useState(new Date().getFullYear().toString()),$=G({colors:u,legend:{position:"top",horizontalAlign:"right"},xaxis:{categories:y},...L}),z=l.useCallback(a=>{b.onClose(),_(a)},[b]);return e.jsxs(e.Fragment,{children:[e.jsxs(E,{...x,children:[e.jsx(I,{title:s,subheader:i,action:e.jsxs(S,{display:"flex",gap:3,children:[e.jsxs(Y,{onClick:b.onOpen,sx:{pl:1,py:.5,pr:.5,borderRadius:1,typography:"subtitle2",bgcolor:"background.neutral"},children:[C,e.jsx(k,{width:16,icon:b.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:.5}})]}),!!p.length&&e.jsx(K,{size:"small",value:n,onChange:a=>m(a.target.value),children:p.map(a=>e.jsxs(N,{value:a.storeName,children:[" ",a.storeName]},a.uid))})]})}),[{year:"2024",data:[{name:"Traffic",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(a=>g.filter(o=>o.storeName===n&&new Date(o.createdAt).getMonth()===a).length)},{name:"Revenue",data:[0,0,0,0,0,0,0,0,0,0,0,0]}]}].map(a=>e.jsx(S,{sx:{mt:3,mx:3},children:a.year===C&&e.jsx(A,{dir:"ltr",type:"area",series:a.data,options:$,height:364})},a.year))]}),e.jsx(Q,{open:b.open,onClose:b.onClose,sx:{width:140},children:[{year:"2024",data:[{name:"Traffic",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(a=>g.filter(o=>o.storeName===n&&new Date(o.createdAt).getMonth()===a).length)},{name:"Revenue",data:[0,0,0,0,0,0,0,0,0,0,0,0]}]}].map(a=>e.jsx(N,{selected:a.year===C,onClick:()=>z(a.year),children:a.year},a.year))})]})}M.propTypes={chart:t.object,subheader:t.string,title:t.string};function F({title:s,subheader:i,tableData:c,tableLabels:x,...p}){return e.jsxs(E,{...p,children:[e.jsx(I,{title:s,subheader:i,sx:{mb:3}}),e.jsx(le,{sx:{overflow:"unset"},children:e.jsx(X,{children:e.jsxs(ce,{sx:{minWidth:640},children:[e.jsx(oe,{headLabel:x}),e.jsx(de,{children:c==null?void 0:c.map(d=>e.jsx(J,{row:d},d.id))})]})})})]})}F.propTypes={subheader:t.string,tableData:t.array,tableLabels:t.array,title:t.string};function J({row:s}){return e.jsxs(ie,{children:[e.jsxs(v,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Z,{alt:s.name,src:`https://delhi-vape.com${s.images[0]}`,sx:{mr:2}}),s.name]}),e.jsx(v,{children:s.salePrice}),e.jsx(v,{children:s.storeName}),e.jsx(v,{children:s.quantity})]})}J.propTypes={row:t.object};const B=400,D=72;ee(A)(({theme:s})=>({height:B,"& .apexcharts-canvas, .apexcharts-inner, svg, foreignObject":{height:"100% !important"},"& .apexcharts-legend":{height:D,borderTop:`dashed 1px ${s.palette.divider}`,top:`calc(${B-D}px) !important`}}));t.object,t.string,t.string,t.number;t.array,t.string,t.string;t.object;function j({title:s,percent:i,total:c,chart:x,sx:p,...d}){const n=W(),{colors:m=[n.palette.primary.light,n.palette.primary.main],series:f,options:g}=x,r=G({colors:[m[1]],fill:{type:"gradient",gradient:{colorStops:[{offset:0,color:m[0]},{offset:100,color:m[1]}]}},chart:{animations:{enabled:!0},sparkline:{enabled:!0}},tooltip:{x:{show:!1},y:{formatter:y=>P(y),title:{formatter:()=>""}},marker:{show:!1}},...g}),u=e.jsxs(te,{direction:"row",alignItems:"center",sx:{mt:2,mb:1},children:[e.jsx(k,{icon:i<0?"eva:trending-down-fill":"eva:trending-up-fill",sx:{mr:1,p:.5,width:24,height:24,borderRadius:"50%",color:"success.main",bgcolor:O(n.palette.success.main,.16),...i<0&&{color:"error.main",bgcolor:O(n.palette.error.main,.16)}}}),e.jsxs(T,{variant:"subtitle2",component:"div",noWrap:!0,children:[i>0&&"+",se(i),e.jsx(S,{component:"span",sx:{color:"text.secondary",typography:"body2"},children:" than last week"})]})]});return e.jsxs(E,{sx:{display:"flex",alignItems:"center",p:3,...p},...d,children:[e.jsxs(S,{sx:{flexGrow:1},children:[e.jsx(T,{variant:"subtitle2",paragraph:!0,children:s}),e.jsx(T,{variant:"h3",gutterBottom:!0,children:P(c)}),u]}),e.jsx(A,{type:"line",series:[{data:f}],options:r,width:96,height:64})]})}j.propTypes={chart:t.object,percent:t.number,sx:t.object,title:t.string,total:t.number};t.array,t.string,t.string;t.object;t.number,t.number,t.object,t.string;function he(){var g;const s=W(),[i,c]=l.useState([]),[x,p]=l.useState([]),[d,n]=l.useState([]),m=async()=>{const r=await R(H(q,"users")),u=[];r.forEach(y=>{u.push(y.data())}),p(u.reverse())};l.useEffect(()=>{m(),w.get("orders").then(r=>{c(r.data)}),w.get("products").then(r=>{n(r.data)})},[]);const f=ae();return e.jsx(re,{maxWidth:f.themeStretch?!1:"xl",children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{xs:12,md:4,children:e.jsx(j,{title:"Active Store",percent:0,total:x.length,chart:{series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(j,{title:"Total Order Completed",percent:0,total:i.filter(r=>r.status==="completed").length,chart:{colors:[s.palette.info.light,s.palette.info.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(j,{title:"Customers",percent:0,total:0,chart:{colors:[s.palette.warning.light,s.palette.warning.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(j,{title:"Daily Signup",percent:0,total:0,chart:{colors:[s.palette.warning.light,s.palette.warning.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(j,{title:"Total Product",percent:0,total:d.count,chart:{colors:[s.palette.warning.light,s.palette.warning.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(j,{title:"Order Cancelled",percent:0,total:i.filter(r=>r.status==="cancelled").length,chart:{colors:[s.palette.warning.light,s.palette.warning.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:12,lg:12,children:e.jsx(F,{title:"Top Selling Products",tableData:(g=d.products)==null?void 0:g.sort((r,u)=>-r.quantity+u.quantity),tableLabels:[{id:"Product",label:"Product"},{id:"price",label:"Price"},{id:"Store Name",label:"Store Name"},{id:"Count",label:"Count"}]})}),e.jsx(h,{xs:12,md:12,lg:12,children:e.jsx(M,{title:"Store Traffic",subheader:"",chart:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}})})]})})}function fe(){return e.jsxs(e.Fragment,{children:[e.jsx(ne,{children:e.jsx("title",{children:" Dashboard: E-Commerce"})}),e.jsx(he,{})]})}export{fe as default};
