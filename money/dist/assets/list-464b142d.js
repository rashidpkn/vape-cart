import{au as V,aQ as H,b_ as _,bu as W,D as n,bw as v,aB as m,ae as e,aE as z,by as U,aL as D,bH as R,aw as C,aP as $,aN as J,am as K,aO as Q,a$ as q,dj as G,cw as M,ci as b,b4 as x,aC as p,bI as X,bJ as Y,bK as Z,dg as ee,dh as te,cx as ae,az as oe,b7 as le}from"./index-f563320b.js";import{C as se}from"./confirm-dialog-dae06a71.js";import{e as ne}from"./utils-74d4caeb.js";import{u as ie}from"./use-table-3e26ed35.js";import{I as r,a as re,b as ce,c as de}from"./invoice-details-87ed8ff6.js";import{T as ue}from"./TableContainer-bbfbdd52.js";import"./DialogTitle-44aa972f.js";import"./DialogContent-91fcb202.js";import"./address-list-dialog-c2dda5ce.js";const he=[{id:"invoiceNumber",label:"Customer"},{id:"createDate",label:"Create"},{id:"dueDate",label:"Due"},{id:"price",label:"Amount"},{id:"status",label:"Status"},{id:""}],P={name:"",service:[],status:"all",startDate:null,endDate:null};function ge(){const i=V(),T=H(),c=_(),a=ie({defaultOrderBy:"createDate"}),d=W(),[o,j]=n.useState([]),S=async()=>{try{const{data:t}=await v.get("invoice");console.log(t),j(t)}catch{}};n.useEffect(()=>{S()},[]);const[s,w]=n.useState(P),I=s.startDate&&s.endDate?s.startDate.getTime()>s.endDate.getTime():!1,y=a.dense?56:76,f=!!s.name||!!s.service.length||s.status!=="all"||!!s.startDate&&!!s.endDate,F=!o.length&&f||!o.length,u=t=>o.filter(l=>l.status===t).length,E=[{value:"all",label:"All",color:"default",count:o.length},{value:"paid",label:"Paid",color:"success",count:u("paid")},{value:"pending",label:"Pending",color:"warning",count:u("pending")},{value:"overdue",label:"Overdue",color:"error",count:u("overdue")},{value:"draft",label:"Draft",color:"default",count:u("draft")}],h=n.useCallback((t,l)=>{a.onResetPage(),w(g=>({...g,[t]:l}))},[a]),k=n.useCallback(t=>{v.delete("invoice",{data:{id:t}}).then(g=>{alert("Invoice in deleted")});const l=o.filter(g=>g.id!==t);j(l),a.onUpdatePageDeleteRow(o.length)},[o.length,a,o]),A=n.useCallback(()=>{v.delete("invoice",{data:{id:a.selected}}).then(l=>{alert("Invoice in deleted")});const t=o.filter(l=>!a.selected.includes(l.id));j(t),a.onUpdatePageDeleteRows({totalRows:o.length,totalRowsInPage:o.length,totalRowsFiltered:o.length})},[o.length,o.length,a,o]),B=n.useCallback(t=>{c.push(m.dashboard.invoice.edit(t))},[c]),L=n.useCallback(t=>{c.push(m.dashboard.invoice.details(t))},[c]),O=n.useCallback((t,l)=>{h("status",l)},[h]),N=n.useCallback(()=>{w(P)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(z,{maxWidth:T.themeStretch?!1:"lg",children:[e.jsx(U,{heading:"Invoice",links:[{name:"Dashboard",href:m.dashboard.root},{name:"Invoice",href:m.dashboard.invoice.root}]}),e.jsx(D,{sx:{mb:{xs:3,md:5}},children:e.jsx(R,{children:e.jsxs(C,{direction:"row",divider:e.jsx($,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[e.jsx(r,{title:"Total",total:0,percent:0,price:0,icon:"solar:bill-list-bold-duotone",color:i.palette.info.main}),e.jsx(r,{title:"Paid",total:0,percent:0,price:0,icon:"solar:file-check-bold-duotone",color:i.palette.success.main}),e.jsx(r,{title:"Pending",total:0,percent:0,price:0,icon:"solar:sort-by-time-bold-duotone",color:i.palette.warning.main}),e.jsx(r,{title:"Overdue",total:0,percent:0,price:0,icon:"solar:bell-bing-bold-duotone",color:i.palette.error.main}),e.jsx(r,{title:"Draft",total:0,percent:0,price:0,icon:"solar:file-corrupted-bold-duotone",color:i.palette.text.secondary})]})})}),e.jsxs(D,{children:[e.jsx(J,{value:s.status,onChange:O,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${K(i.palette.grey[500],.08)}`},children:E.map(t=>e.jsx(Q,{value:t.value,label:t.label,iconPosition:"end",icon:e.jsx(q,{variant:(t.value==="all"||t.value===s.status)&&"filled"||"soft",color:t.color,children:"0"})},t.value))}),e.jsx(re,{filters:s,onFilters:h,dateError:I,serviceOptions:G.map(t=>t.name)}),f&&e.jsx(ce,{filters:s,onFilters:h,onResetFilters:N,results:o.length,sx:{p:2.5,pt:0}}),e.jsxs(ue,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(M,{dense:a.dense,numSelected:a.selected.length,rowCount:o.length,onSelectAllRows:t=>a.onSelectAllRows(t,o.map(l=>l.id)),action:e.jsxs(C,{direction:"row",children:[e.jsx(b,{title:"Sent",children:e.jsx(x,{color:"primary",children:e.jsx(p,{icon:"iconamoon:send-fill"})})}),e.jsx(b,{title:"Download",children:e.jsx(x,{color:"primary",children:e.jsx(p,{icon:"eva:download-outline"})})}),e.jsx(b,{title:"Print",children:e.jsx(x,{color:"primary",children:e.jsx(p,{icon:"solar:printer-minimalistic-bold"})})}),e.jsx(b,{title:"Delete",children:e.jsx(x,{color:"primary",onClick:d.onTrue,children:e.jsx(p,{icon:"solar:trash-bin-trash-bold"})})})]})}),e.jsx(R,{children:e.jsxs(X,{size:a.dense?"small":"medium",sx:{minWidth:800},children:[e.jsx(Y,{order:a.order,orderBy:a.orderBy,headLabel:he,rowCount:o.length,numSelected:a.selected.length,onSort:a.onSort,onSelectAllRows:t=>a.onSelectAllRows(t,o.map(l=>l.id))}),e.jsxs(Z,{children:[o.slice(a.page*a.rowsPerPage,a.page*a.rowsPerPage+a.rowsPerPage).map(t=>e.jsx(de,{row:t,selected:a.selected.includes(t.id),onSelectRow:()=>a.onSelectRow(t.id),onViewRow:()=>L(t.id),onEditRow:()=>B(t.id),onDeleteRow:()=>k(t.id)},t.id)),e.jsx(ee,{height:y,emptyRows:ne(a.page,a.rowsPerPage,o.length)}),e.jsx(te,{notFound:F})]})]})})]}),e.jsx(ae,{count:o.length,page:a.page,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage,dense:a.dense,onChangeDense:a.onChangeDense})]})]}),e.jsx(se,{open:d.value,onClose:d.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",a.selected.length," "]})," items?"]}),action:e.jsx(oe,{variant:"contained",color:"error",onClick:()=>{A(),d.onFalse()},children:"Delete"})})]})}function Re(){return e.jsxs(e.Fragment,{children:[e.jsx(le,{children:e.jsx("title",{children:" Dashboard: Invoice List"})}),e.jsx(ge,{})]})}export{Re as default};
