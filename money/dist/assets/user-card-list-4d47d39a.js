import{by as G,aB as $,aC as b,a4 as f,aD as H,aG as Q,j as e,ca as V,aF as M,aO as v,bE as Z,cY as J,aU as w,aH as y,bF as K,cZ as I,aK as h,B as S,aL as Y,P as l,aA as q,aQ as N,b3 as X,b4 as C,bI as D,b5 as E,b$ as B,bn as U,aJ as P,aT as O,S as T,c4 as ee,c5 as ae,c6 as oe,c7 as se,bB as le,aI as ie,bG as F,cm as ne,u as te,bp as re,aN as de,c_ as ce,ci as pe,b6 as xe,ce as me,g as k,cd as he,aW as A,aZ as ue,a_ as je,a$ as be}from"./index-519398e3.js";import{C as ye}from"./confirm-dialog-d0bc3927.js";import{D as ge,a as fe}from"./DialogTitle-e2cecead.js";import{D as ve}from"./DialogContent-bcfe164c.js";import{A as Ce}from"./Alert-a48ae8fe.js";function L({currentUser:a,open:i,onClose:t}){const{enqueueSnackbar:n}=G(),d=$().shape({name:b().required("Name is required"),email:b().required("Email is required").email("Email must be a valid email address"),phoneNumber:b().required("Phone number is required"),address:b().required("Address is required"),country:b().required("Country is required"),company:b().required("Company is required"),state:b().required("State is required"),city:b().required("City is required"),role:b().required("Role is required")}),c=f.useMemo(()=>({name:(a==null?void 0:a.name)||"",email:(a==null?void 0:a.email)||"",phoneNumber:(a==null?void 0:a.phoneNumber)||"",address:(a==null?void 0:a.address)||"",country:(a==null?void 0:a.country)||"",state:(a==null?void 0:a.state)||"",city:(a==null?void 0:a.city)||"",zipCode:(a==null?void 0:a.zipCode)||"",status:a==null?void 0:a.status,company:(a==null?void 0:a.company)||"",role:(a==null?void 0:a.role)||""}),[a]),o=H({resolver:Q(d),defaultValues:c}),{reset:s,handleSubmit:u,formState:{isSubmitting:x}}=o,g=u(async r=>{try{await new Promise(p=>setTimeout(p,500)),s(),t(),n("Update success!"),console.info("DATA",r)}catch(p){console.error(p)}});return e.jsx(V,{fullWidth:!0,maxWidth:!1,open:i,onClose:t,PaperProps:{sx:{maxWidth:720}},children:e.jsxs(M,{methods:o,onSubmit:g,children:[e.jsx(ge,{children:"Quick Update"}),e.jsxs(ve,{children:[e.jsx(Ce,{variant:"outlined",severity:"info",sx:{mb:3},children:"Account is waiting for confirmation"}),e.jsxs(v,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(Z,{name:"status",label:"Status",children:J.map(r=>e.jsx(w,{value:r.value,children:r.label},r.value))}),e.jsx(v,{sx:{display:{xs:"none",sm:"block"}}}),e.jsx(y,{name:"name",label:"Full Name"}),e.jsx(y,{name:"email",label:"Email Address"}),e.jsx(y,{name:"phoneNumber",label:"Phone Number"}),e.jsx(K,{name:"country",label:"Country",options:I.map(r=>r.label),getOptionLabel:r=>r,renderOption:(r,p)=>{const{code:j,label:m,phone:_}=I.filter(W=>W.label===p)[0];return m?f.createElement("li",{...r,key:m},e.jsx(h,{icon:`circle-flags:${j.toLowerCase()}`,width:28,sx:{mr:1}},m),m," (",j,") +",_):null}}),e.jsx(y,{name:"state",label:"State/Region"}),e.jsx(y,{name:"city",label:"City"}),e.jsx(y,{name:"address",label:"Address"}),e.jsx(y,{name:"zipCode",label:"Zip/Code"}),e.jsx(y,{name:"company",label:"Company"}),e.jsx(y,{name:"role",label:"Role"})]})]}),e.jsxs(fe,{children:[e.jsx(S,{variant:"outlined",onClick:t,children:"Cancel"}),e.jsx(Y,{type:"submit",variant:"contained",loading:x,children:"Update"})]})]})})}L.propTypes={currentUser:l.object,onClose:l.func,open:l.bool};function we({row:a,selected:i,onEditRow:t,onSelectRow:n,onDeleteRow:d}){const{displayName:c,avatarUrl:o,storeName:s,tradeLicense:u,contactPersonInTouch:x,email:g,phoneNumber:r}=a,p=q(),j=q(),m=N();return e.jsxs(e.Fragment,{children:[e.jsxs(X,{hover:!0,selected:i,children:[e.jsx(C,{padding:"checkbox",children:e.jsx(D,{checked:i,onClick:n})}),e.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(E,{alt:c,src:o,sx:{mr:2}}),e.jsx(B,{primary:c,secondary:g,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}})]}),e.jsx(C,{sx:{whiteSpace:"nowrap"},children:r}),e.jsx(C,{sx:{whiteSpace:"nowrap"},children:s}),e.jsx(C,{sx:{whiteSpace:"nowrap"},children:e.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",children:e.jsx(S,{children:"View Trade Licence"})})}),e.jsx(C,{children:x}),e.jsxs(C,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:[e.jsx(U,{title:"Quick Edit",placement:"top",arrow:!0,children:e.jsx(P,{color:j.value?"inherit":"default",onClick:j.onTrue,children:e.jsx(h,{icon:"solar:pen-bold"})})}),e.jsx(P,{color:m.open?"inherit":"default",onClick:m.onOpen,children:e.jsx(h,{icon:"eva:more-vertical-fill"})})]})]}),e.jsx(L,{currentUser:a,open:j.value,onClose:j.onFalse}),e.jsxs(O,{open:m.open,onClose:m.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(w,{onClick:()=>{p.onTrue(),m.onClose()},sx:{color:"error.main"},children:[e.jsx(h,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),e.jsxs(w,{onClick:()=>{t(),m.onClose()},children:[e.jsx(h,{icon:"solar:pen-bold"}),"Edit"]})]}),e.jsx(ye,{open:p.value,onClose:p.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(S,{variant:"contained",color:"error",onClick:d,children:"Delete"})})]})}we.propTypes={onDeleteRow:l.func,onEditRow:l.func,onSelectRow:l.func,row:l.object,selected:l.bool};function Te({filters:a,onFilters:i,roleOptions:t}){const n=N(),d=f.useCallback(o=>{i("name",o.target.value)},[i]),c=f.useCallback(o=>{i("role",typeof o.target.value=="string"?o.target.value.split(","):o.target.value)},[i]);return e.jsxs(e.Fragment,{children:[e.jsxs(T,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsxs(ee,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(ae,{children:"Role"}),e.jsx(oe,{multiple:!0,value:a.role,onChange:c,input:e.jsx(se,{label:"Role"}),renderValue:o=>o.map(s=>s).join(", "),MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:t.map(o=>e.jsxs(w,{value:o,children:[e.jsx(D,{disableRipple:!0,size:"small",checked:a.role.includes(o)}),o]},o))})]}),e.jsxs(T,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(le,{fullWidth:!0,value:a.name,onChange:d,placeholder:"Search...",InputProps:{startAdornment:e.jsx(ie,{position:"start",children:e.jsx(h,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(P,{onClick:n.onOpen,children:e.jsx(h,{icon:"eva:more-vertical-fill"})})]})]}),e.jsxs(O,{open:n.open,onClose:n.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(w,{onClick:()=>{n.onClose()},children:[e.jsx(h,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(w,{onClick:()=>{n.onClose()},children:[e.jsx(h,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(w,{onClick:()=>{n.onClose()},children:[e.jsx(h,{icon:"solar:export-bold"}),"Export"]})]})]})}Te.propTypes={filters:l.object,onFilters:l.func,roleOptions:l.array};function Se({filters:a,onFilters:i,onResetFilters:t,results:n,...d}){const c=()=>{i("status","all")},o=s=>{const u=a.role.filter(x=>x!==s);i("role",u)};return e.jsxs(T,{spacing:1.5,...d,children:[e.jsxs(v,{sx:{typography:"body2"},children:[e.jsx("strong",{children:n}),e.jsx(v,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(T,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[a.status!=="all"&&e.jsx(R,{label:"Status:",children:e.jsx(F,{size:"small",label:a.status,onDelete:c})}),!!a.role.length&&e.jsx(R,{label:"Role:",children:a.role.map(s=>e.jsx(F,{label:s,size:"small",onDelete:()=>o(s)},s))}),e.jsx(S,{color:"error",onClick:t,startIcon:e.jsx(h,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}Se.propTypes={filters:l.object,onFilters:l.func,onResetFilters:l.func,results:l.number};function R({label:a,children:i,sx:t,...n}){return e.jsxs(T,{component:ne,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...t},...n,children:[e.jsx(v,{component:"span",sx:{typography:"subtitle2"},children:a}),e.jsx(T,{spacing:1,direction:"row",flexWrap:"wrap",children:i})]})}R.propTypes={children:l.node,label:l.string,sx:l.object};function z({user:a,products:i=[],orders:t=[]}){const n=te(),d=re(),{storeName:c,coverUrl:o,displayName:s,totalFollowers:u,uid:x}=a;return e.jsxs(de,{sx:{textAlign:"center"},onClick:()=>{d(`/dashboard/store/${a.uid}/edit`)},children:[e.jsxs(v,{sx:{position:"relative"},children:[e.jsx(ce,{sx:{left:0,right:0,zIndex:10,mx:"auto",bottom:-26,position:"absolute"}}),e.jsx(E,{alt:c,src:"/logo/logo_single.webp",sx:{width:64,height:64,zIndex:11,left:0,right:0,bottom:-32,mx:"auto",position:"absolute",cursor:"pointer"}}),e.jsx(pe,{src:"https://api-prod-minimal-v510.vercel.app/assets/images/cover/cover_15.jpg",alt:o,ratio:"16/9",overlay:xe(n.palette.grey[900],.48)})]}),e.jsx(B,{sx:{mt:7,mb:1},primary:c,secondary:s,primaryTypographyProps:{typography:"subtitle1"},secondaryTypographyProps:{component:"span",mt:.5}}),e.jsx(me,{sx:{borderStyle:"dashed"}}),e.jsxs(v,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",sx:{py:3,typography:"subtitle1"},children:[e.jsxs("div",{children:[e.jsx(k,{variant:"caption",component:"div",sx:{mb:.5,color:"text.secondary"},children:"Traffic"}),he(u)]}),e.jsxs("div",{children:[e.jsx(k,{variant:"caption",component:"div",sx:{mb:.5,color:"text.secondary"},children:"Product"}),i.filter(g=>g.userId===a.uid).length]}),e.jsxs("div",{children:[e.jsx(k,{variant:"caption",component:"div",sx:{mb:.5,color:"text.secondary"},children:"Revenue"}),t==null?void 0:t.reduce((g,r)=>{var p,j;return((j=(p=r.items)==null?void 0:p[0])==null?void 0:j.userId)===x?g+r.subTotal:g},0)]})]})]})}z.propTypes={user:l.object};function ke(){const[a,i]=f.useState([]),[t,n]=f.useState([]),[d,c]=f.useState([]),o=async()=>{const s=await ue(je(be,"users")),u=[];s.forEach(x=>{u.push(x.data())}),c(u.filter(x=>x.email!=="info@vape-dubai.com"))};return f.useEffect(()=>{A.get("/products",{params:{perPage:1e4}}).then(s=>{i(s.data.products)}),A.get("/orders").then(s=>{n(s.data)}),o()},[]),e.jsx(v,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},children:d==null?void 0:d.map(s=>e.jsx(z,{user:s,products:a,orders:t},s.uid))})}ke.propTypes={users:l.array};export{ke as U,Te as a,Se as b,we as c};
