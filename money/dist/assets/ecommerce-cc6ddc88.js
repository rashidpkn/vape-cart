import{D as l,bw as w,c5 as $,ae as e,aL as E,b3 as D,aq as S,aj as V,aC as k,ca as K,b6 as N,c6 as Q,c7 as H,c8 as R,as as t,c9 as q,bH as X,bI as Z,bJ as ee,bK as te,bE as se,bF as v,aY as ae,ab as re,au as G,c3 as P,aw as ne,am as I,ac as T,c4 as oe,aQ as ie,aE as le,aG as h,b7 as ce}from"./index-375c29a3.js";import{u as F,C as A}from"./chart-523d782d.js";import{T as de}from"./TableContainer-06cda7ee.js";import"./color-picker-f549cb42.js";function L({title:s,subheader:i,chart:c,...x}){const[p,d]=l.useState([]),[n,m]=l.useState("Vape Amazon"),f=async()=>{const a=await H(R(q,"users")),o=[];a.forEach(_=>{o.push(_.data())}),d(o.reverse()),m(o[0].storeName)};l.useEffect(()=>{f()},[]);const[g,r]=l.useState([]);l.useEffect(()=>{w.get("store-analytics",{params:{storeName:n}}).then(o=>{r(o.data)});const a=setInterval(()=>{w.get("store-analytics",{params:{storeName:n}}).then(o=>{r(o.data)})},5e3);return()=>{clearInterval(a)}},[n]);const{colors:u,categories:y,options:J}=c,b=$(),[C,z]=l.useState(new Date().getFullYear().toString()),U=F({colors:u,legend:{position:"top",horizontalAlign:"right"},xaxis:{categories:y},...J}),Y=l.useCallback(a=>{b.onClose(),z(a)},[b]);return e.jsxs(e.Fragment,{children:[e.jsxs(E,{...x,children:[e.jsx(D,{title:s,subheader:i,action:e.jsxs(S,{display:"flex",gap:3,children:[e.jsxs(V,{onClick:b.onOpen,sx:{pl:1,py:.5,pr:.5,borderRadius:1,typography:"subtitle2",bgcolor:"background.neutral"},children:[C,e.jsx(k,{width:16,icon:b.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:.5}})]}),!!p.length&&e.jsx(K,{size:"small",value:n,onChange:a=>m(a.target.value),children:p.map(a=>e.jsxs(N,{value:a.storeName,children:[" ",a.storeName]},a.uid))})]})}),[{year:"2024",data:[{name:"Traffic",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(a=>g.filter(o=>o.storeName===n&&new Date(o.createdAt).getMonth()===a).length)},{name:"Revenue",data:[0,0,0,0,0,0,0,0,0,0,0,0]}]}].map(a=>e.jsx(S,{sx:{mt:3,mx:3},children:a.year===C&&e.jsx(A,{dir:"ltr",type:"area",series:a.data,options:U,height:364})},a.year))]}),e.jsx(Q,{open:b.open,onClose:b.onClose,sx:{width:140},children:[{year:"2024",data:[{name:"Traffic",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(a=>g.filter(o=>o.storeName===n&&new Date(o.createdAt).getMonth()===a).length)},{name:"Revenue",data:[0,0,0,0,0,0,0,0,0,0,0,0]}]}].map(a=>e.jsx(N,{selected:a.year===C,onClick:()=>Y(a.year),children:a.year},a.year))})]})}L.propTypes={chart:t.object,subheader:t.string,title:t.string};function M({title:s,subheader:i,tableData:c,tableLabels:x,...p}){return e.jsxs(E,{...p,children:[e.jsx(D,{title:s,subheader:i,sx:{mb:3}}),e.jsx(de,{sx:{overflow:"unset"},children:e.jsx(X,{children:e.jsxs(Z,{sx:{minWidth:640},children:[e.jsx(ee,{headLabel:x}),e.jsx(te,{children:c==null?void 0:c.map(d=>e.jsx(W,{row:d},d.id))})]})})})]})}M.propTypes={subheader:t.string,tableData:t.array,tableLabels:t.array,title:t.string};function W({row:s}){return e.jsxs(se,{children:[e.jsxs(v,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ae,{alt:s.name,src:`https://delhi-vape.com${s.images[0]}`,sx:{mr:2}}),s.name]}),e.jsx(v,{children:s.salePrice}),e.jsx(v,{children:s.storeName}),e.jsx(v,{children:s.quantity})]})}W.propTypes={row:t.object};const O=400,B=72;re(A)(({theme:s})=>({height:O,"& .apexcharts-canvas, .apexcharts-inner, svg, foreignObject":{height:"100% !important"},"& .apexcharts-legend":{height:B,borderTop:`dashed 1px ${s.palette.divider}`,top:`calc(${O-B}px) !important`}}));t.object,t.string,t.string,t.number;t.array,t.string,t.string;t.object;function j({title:s,percent:i,total:c,chart:x,sx:p,...d}){const n=G(),{colors:m=[n.palette.primary.light,n.palette.primary.main],series:f,options:g}=x,r=F({colors:[m[1]],fill:{type:"gradient",gradient:{colorStops:[{offset:0,color:m[0]},{offset:100,color:m[1]}]}},chart:{animations:{enabled:!0},sparkline:{enabled:!0}},tooltip:{x:{show:!1},y:{formatter:y=>P(y),title:{formatter:()=>""}},marker:{show:!1}},...g}),u=e.jsxs(ne,{direction:"row",alignItems:"center",sx:{mt:2,mb:1},children:[e.jsx(k,{icon:i<0?"eva:trending-down-fill":"eva:trending-up-fill",sx:{mr:1,p:.5,width:24,height:24,borderRadius:"50%",color:"success.main",bgcolor:I(n.palette.success.main,.16),...i<0&&{color:"error.main",bgcolor:I(n.palette.error.main,.16)}}}),e.jsxs(T,{variant:"subtitle2",component:"div",noWrap:!0,children:[i>0&&"+",oe(i),e.jsx(S,{component:"span",sx:{color:"text.secondary",typography:"body2"},children:" than last week"})]})]});return e.jsxs(E,{sx:{display:"flex",alignItems:"center",p:3,...p},...d,children:[e.jsxs(S,{sx:{flexGrow:1},children:[e.jsx(T,{variant:"subtitle2",paragraph:!0,children:s}),e.jsx(T,{variant:"h3",gutterBottom:!0,children:P(c)}),u]}),e.jsx(A,{type:"line",series:[{data:f}],options:r,width:96,height:64})]})}j.propTypes={chart:t.object,percent:t.number,sx:t.object,title:t.string,total:t.number};t.array,t.string,t.string;t.object;t.number,t.number,t.object,t.string;function he(){var g;const s=G(),[i,c]=l.useState([]),[x,p]=l.useState([]),[d,n]=l.useState([]),m=async()=>{const r=await H(R(q,"users")),u=[];r.forEach(y=>{u.push(y.data())}),p(u.reverse())};l.useEffect(()=>{m(),w.get("orders").then(r=>{c(r.data)}),w.get("products").then(r=>{n(r.data)})},[]);const f=ie();return e.jsx(le,{maxWidth:f.themeStretch?!1:"xl",children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{xs:12,md:4,children:e.jsx(j,{title:"Active Partners",percent:0,total:x.length,chart:{series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(j,{title:"Total Order Completed",percent:0,total:i.filter(r=>r.status==="completed").length,chart:{colors:[s.palette.info.light,s.palette.info.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(j,{title:"Customers",percent:0,total:0,chart:{colors:[s.palette.warning.light,s.palette.warning.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(j,{title:"Daily Signup",percent:0,total:0,chart:{colors:[s.palette.warning.light,s.palette.warning.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(j,{title:"Total Product",percent:0,total:d.count,chart:{colors:[s.palette.warning.light,s.palette.warning.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(j,{title:"Order Cancelled",percent:0,total:i.filter(r=>r.status==="cancelled").length,chart:{colors:[s.palette.warning.light,s.palette.warning.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:12,lg:12,children:e.jsx(M,{title:"Top Selling Products",tableData:(g=d.products)==null?void 0:g.sort((r,u)=>-r.quantity+u.quantity),tableLabels:[{id:"Product",label:"Product"},{id:"price",label:"Price"},{id:"Store Name",label:"Store Name"},{id:"Count",label:"Count"}]})}),e.jsx(h,{xs:12,md:12,lg:12,children:e.jsx(L,{title:"Store Traffic",subheader:"",chart:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}})})]})})}function ge(){return e.jsxs(e.Fragment,{children:[e.jsx(ce,{children:e.jsx("title",{children:" Dashboard: E-Commerce"})}),e.jsx(he,{})]})}export{ge as default};
