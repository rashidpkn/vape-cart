import{J as r,r as f,j as e,x as O,a3 as H,ar as X,G as h,z as Z,as as N,c as E,A as ee,E as B,n as L,d as I,b6 as M,b7 as re,h as A,L as te,I as ae,ak as se,at as Q,w as j,B as W,M as oe,s as ne,T as w,aK as F,F as q,aO as ie,aP as _,t as V,v as $,aM as le,k as ce,b8 as de,aj as ue}from"./index-eb686811.js";import{C as pe}from"./confirm-dialog-d2ad38cd.js";import{b as he,c as d}from"./TableRow-a509ccfe.js";r.arrayOf(r.string),r.number,r.object;const xe=f.forwardRef(({colors:u,selected:s,onSelectColor:b,limit:k="auto",sx:p,...v},m)=>{const t=typeof s=="string",g=f.useCallback(n=>{if(t)n!==s&&b(n);else{const c=s!=null&&s.includes(n)?s.filter(l=>l!==n):[...s,n];b(c)}},[b,s,t]);return e.jsx(O,{ref:m,direction:"row",display:"inline-flex",sx:{flexWrap:"wrap",...k!=="auto"&&{width:k*36,justifyContent:"flex-end"},...p},...v,children:u==null?void 0:u.map(n=>{const c=t?s===n:s==null?void 0:s.includes(n);return console.log(n),e.jsx(H,{sx:{width:36,height:36,borderRadius:"50%"},onClick:()=>{g(n)},children:e.jsx(O,{alignItems:"center",justifyContent:"center",sx:{width:20,height:20,bgcolor:n,borderRadius:"50%",border:l=>`solid 1px ${X(l.palette.grey[500],.16)}`,...c&&{transform:"scale(1.3)",transition:l=>l.transitions.create("all",{duration:l.transitions.duration.shortest})}},children:e.jsx(h,{width:c?12:0,icon:"eva:checkmark-fill",sx:{transition:l=>l.transitions.create("all",{duration:l.transitions.duration.shortest})}})})},n)})})});xe.propTypes={colors:r.oneOfType([r.string,r.arrayOf(r.string)]),limit:r.number,onSelectColor:r.func,selected:r.oneOfType([r.string,r.arrayOf(r.string)]),sx:r.object};r.object;r.object;r.bool,r.array;r.func,r.string,r.array;r.bool,r.func,r.func,r.bool,r.object,r.func,r.array,r.func,r.array,r.array,r.arrayOf(r.string);r.func,r.oneOf(["min","max"]),r.arrayOf(r.number);r.bool,r.object,r.func,r.number,r.func;r.node,r.string,r.object;r.object,r.string,r.object;function je({row:u,selected:s,onSelectRow:b,onDeleteRow:k,onEditRow:p,fetchProduct:v}){const{id:m,name:t,salePrice:g,category:n,quantity:c,createdAt:l,inventoryType:S,images:z,regularPrice:D,status:C,track:G,type:P}=u,[Y,T]=f.useState(!1),[i,x]=f.useState({name:t,salePrice:g,quantity:c,regularPrice:D,status:C,track:G}),J=async()=>{try{if(i.salePrice){const K=parseFloat(i.regularPrice),U=parseFloat(i.salePrice);if(K<U)return alert("Sale price must be less than the regular price")}let a=parseFloat(i.salePrice)?parseFloat(i.salePrice):parseFloat(i.regularPrice);const o=await ce.post(`/products/quick_edit/${m}`,{...i,salePrice:a});alert("Product Updated"),v(),T(!1)}catch(a){console.log(a)}},R=Z(),y=N();return e.jsxs(e.Fragment,{children:[e.jsxs(he,{hover:!0,selected:s,children:[e.jsx(d,{padding:"checkbox",children:e.jsx(E,{checked:s,onClick:b})}),e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ee,{alt:t,src:z[0],variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(B,{disableTypography:!0,primary:e.jsx(L,{to:`/dashboard/product/${m}/edit`,noWrap:!0,color:"inherit",variant:"subtitle2",style:{cursor:"pointer",color:"black"},children:t}),secondary:e.jsx(I,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:n})})]}),e.jsx(d,{children:e.jsx(B,{primary:M(new Date(l),"dd MMM yyyy"),secondary:M(new Date(l),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsx(d,{children:P}),e.jsxs(d,{sx:{typography:"caption",color:"text.secondary"},children:[e.jsx(re,{value:c*100/c,variant:"determinate",color:S==="out of stock"&&"error"||S==="low stock"&&"warning"||"success",sx:{mb:1,height:6,maxWidth:80}}),!!c&&c," ",S]}),e.jsx(d,{children:P==="Simple"&&A(D)}),e.jsx(d,{children:P==="Simple"&&A(g)}),e.jsx(d,{children:e.jsx(te,{variant:"soft",color:C==="Published"&&"info"||"default",children:C})}),e.jsx(d,{align:"center",children:P==="Simple"&&e.jsx(ae,{icon:"mdi:magic",cursor:"pointer",width:25,color:"#086c9c",onClick:()=>{if(C==="In Revision"){alert("You cannot edit this product while it is under review. Once the admin has completed the review, you will be able to make edits.");return}T(a=>!0)}})}),e.jsx(d,{align:"right",children:e.jsx(se,{color:y.open?"primary":"default",onClick:y.onOpen,children:e.jsx(h,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(Q,{open:y.open,onClose:y.onClose,arrow:"right-top",sx:{width:140},children:[e.jsx(j,{children:e.jsxs(L,{to:`/product/${m}`,target:"_blank",style:{color:"black"},children:[e.jsx(h,{icon:"solar:eye-bold"}),"View"]})}),e.jsxs(j,{onClick:()=>{if(C==="In Revision"){alert("You cannot edit this product while it is under review. Once the admin has completed the review, you will be able to make edits."),y.onClose();return}p()},children:[e.jsx(h,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(j,{onClick:()=>{R.onTrue(),y.onClose()},sx:{color:"error.main"},children:[e.jsx(h,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),e.jsx(pe,{open:R.value,onClose:R.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(W,{variant:"contained",color:"error",onClick:k,children:"Delete"})}),e.jsx(oe,{open:Y,onClose:()=>T(a=>!1),"aria-labelledby":"quickedit-model","aria-describedby":"quickedit-model-description",children:e.jsxs(I,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:650,bgcolor:"background.paper",boxShadow:24,borderRadius:2,p:4},children:[e.jsxs(ne,{id:"quickedit-model",variant:"h6",component:"h2",children:["Quick Edit - ",t]}),e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},mt:5,gap:5,children:[e.jsx(w,{label:"Name",value:i.name,onChange:a=>x(o=>({...o,name:a.target.value}))}),e.jsx(w,{type:"number",label:"Regular Price",value:i.regularPrice,onChange:a=>x(o=>({...o,regularPrice:a.target.value}))}),e.jsx(w,{type:"number",label:"Sale Price",value:i.salePrice,onChange:a=>x(o=>({...o,salePrice:a.target.value}))}),e.jsx(F,{label:"Track Stock",control:e.jsx(E,{checked:i.track,onChange:a=>{x(o=>({...o,track:a.target.checked})),a.target.checked?x(o=>({...o,quantity:c})):x(o=>({...o,quantity:100}))}})}),i.track?e.jsx(w,{type:"number",label:"Quantity",value:i.quantity,onChange:a=>x(o=>({...o,quantity:a.target.value}))}):e.jsx(q,{children:e.jsxs(ie,{defaultValue:"Instock",row:!0,children:[e.jsx(F,{d:!0,value:"Instock",control:e.jsx(_,{defaultChecked:!0}),label:"Instock"}),e.jsx(F,{value:"Outstock",control:e.jsx(_,{}),label:"Outstock"})]})}),e.jsxs(q,{fullWidth:!0,children:[e.jsx(V,{children:"Status"}),e.jsx($,{label:"Status",value:i.status,onChange:a=>x(o=>({...o,status:a.target.value})),children:le.map(a=>e.jsx(j,{value:a,children:a}))})]}),e.jsx(W,{variant:"contained",color:"success",onClick:J,children:"Save Changes"})]})]})})]})}je.propTypes={onDeleteRow:r.func,onEditRow:r.func,onSelectRow:r.func,onViewRow:r.func,row:r.object,selected:r.bool};function be({filters:u,onFilters:s,stockOptions:b,publishOptions:k}){const p=N(),v=f.useCallback(t=>{s("name",t.target.value)},[s]),m=f.useCallback(t=>{s("stock",typeof t.target.value=="string"?t.target.value.split(","):t.target.value)},[s]);return e.jsxs(e.Fragment,{children:[e.jsxs(O,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsxs(q,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(V,{children:"Stock"}),e.jsx($,{value:u.stock,onChange:m,input:e.jsx(de,{label:"Stock"}),renderValue:t=>t.map(g=>g).join(", "),sx:{textTransform:"capitalize"},children:b.map(t=>e.jsxs(j,{value:t.value,children:[e.jsx(E,{disableRipple:!0,size:"small",checked:u.stock.includes(t.value)}),t.label]},t.value))})]}),e.jsx(O,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:e.jsx(w,{fullWidth:!0,value:u.name,onChange:v,placeholder:"Search...",InputProps:{startAdornment:e.jsx(ue,{position:"start",children:e.jsx(h,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})]}),e.jsxs(Q,{open:p.open,onClose:p.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(j,{onClick:()=>{p.onClose()},children:[e.jsx(h,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(j,{onClick:()=>{p.onClose()},children:[e.jsx(h,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(j,{onClick:()=>{p.onClose()},children:[e.jsx(h,{icon:"solar:export-bold"}),"Export"]})]})]})}be.propTypes={filters:r.object,onFilters:r.func,publishOptions:r.array,stockOptions:r.array};export{be as P,je as a};
