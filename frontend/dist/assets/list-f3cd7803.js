import{a8 as e,a9 as O,bk as v,ay as H,D as i,bj as U,aS as _,bb as N,ag as b,aj as V,ae as S,af as W,ah as T,as as z,bA as K,aH as q,be as G,aK as $}from"./index-08ed3728.js";import{C as J}from"./custom-breadcrumbs-848839cc.js";import{b as P,k as M,l as Q,m as X}from"./product-details-description-fa74a732.js";import{T as Y,b as Z,a as ee,c as te}from"./table-pagination-custom-9a2d6d63.js";import"./image-1cde5f2c.js";import{g as se}from"./_product-66794ccf.js";import{a as oe}from"./product-d7a999a0.js";import{u as re,g as ae}from"./use-table-d8065a24.js";import{T as ne}from"./TablePagination-af95449d.js";import{S as u}from"./Skeleton-07f33f31.js";import{C as ie}from"./confirm-dialog-99cca17d.js";import{T as le,a as de,b as ce}from"./TableContainer-9beb4e23.js";import"./axios-04e1c815.js";import"./form-provider-f0166e77.js";import"./upload-avatar-aec51d8c.js";import"./format-number-93b29ff1.js";import"./fade-ba5404aa.js";import"./transition-71675215.js";import"./index-e5bba271.js";import"./Checkbox-5a4ea5ab.js";import"./SwitchBase-3061077d.js";import"./Chip-eab9f24a.js";import"./FormControlLabel-5492b37d.js";import"./FormGroup-074c8234.js";import"./Switch-faf6b78d.js";import"./editor-828a3b00.js";import"./highlight-e06b6fa9.js";import"./Slider-19e62fc7.js";import"./visuallyHidden-14c3de6e.js";import"./RadioGroup-a105d86f.js";import"./Radio-00ce8003.js";import"./Autocomplete-f99b1854.js";import"./Close-06753576.js";import"./yup-c9a93cdf.js";import"./LoadingButton-c28c81c1.js";import"./CircularProgress-09d6016e.js";import"./color-picker-1b5d1b27.js";import"./Fab-e33d0728.js";import"./Pagination-f0f54dbe.js";import"./Rating-b9ae6e86.js";import"./DialogTitle-ec154b98.js";import"./DialogContent-1afa3c54.js";import"./DialogActions-6c9458a0.js";import"./lightbox-dec7b494.js";import"./carousel-arrow-index-8f0c4520.js";import"./use-carousel-01d10574.js";import"./markdown-ad587c54.js";import"./index-66abfed8.js";function he({...o}){return e.jsx(Y,{...o,children:e.jsx(ne,{colSpan:12,children:e.jsxs(O,{spacing:3,direction:"row",alignItems:"center",children:[e.jsx(u,{sx:{borderRadius:1.5,width:48,height:48,flexShrink:0}}),e.jsx(u,{sx:{width:1,height:12}}),e.jsx(u,{sx:{width:180,height:12}}),e.jsx(u,{sx:{width:160,height:12}}),e.jsx(u,{sx:{width:140,height:12}}),e.jsx(u,{sx:{width:120,height:12}})]})})})}const me=[{id:"name",label:"Product"},{id:"createdAt",label:"Create at",width:160},{id:"inventoryType",label:"Stock",width:160},{id:"price",label:"Price",width:140},{id:"publish",label:"Publish",width:110},{id:"",width:88}],pe=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],j={name:"",publish:[],stock:[]};function ue(){const o=v(),t=re(),f=H(),[n,c]=i.useState([]),[l,g]=i.useState(j),{productsLoading:a,productsEmpty:h}=oe(),[m,y]=i.useState([]),{user:{id:k}}=U();i.useEffect(()=>{(async()=>{try{const{data:{products:r,count:p}}=await P.get("products",{params:{userId:k}});y(r)}catch{alert("error Occure")}})()},[]);const x=_();i.useEffect(()=>{m.length&&c(m)},[m]);const d=ge({inputData:n,comparator:ae(t.order,t.orderBy),filters:l}),w=d.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage),F=t.dense?60:80,C=!N(j,l);d.length;const R=i.useCallback((s,r)=>{t.onResetPage(),g(p=>({...p,[s]:r}))},[t]),A=i.useCallback(async s=>{try{const r=await P.delete(`product/${s}`),p=n.filter(L=>L.id!==s);c(p),t.onUpdatePageDeleteRow(w.length)}catch(r){alert(r.response.data.message)}},[w.length,t,n]),D=i.useCallback(async()=>{try{const s=await P.delete("products",{data:{ids:t.selected}}),r=n.filter(p=>!t.selected.includes(p.id));c(r),t.onUpdatePageDeleteRows({totalRows:n.length,totalRowsInPage:w.length,totalRowsFiltered:d.length})}catch(s){alert(s.response.data.message)}},[d.length,w.length,t,n]),B=i.useCallback(s=>{o.push(b.dashboard.product.edit(s))},[o]),E=i.useCallback(s=>{o.push(b.dashboard.product.details(s))},[o]),I=i.useCallback(()=>{g(j)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(V,{maxWidth:f.themeStretch?!1:"lg",children:[e.jsx(J,{heading:"Products",links:[{name:"Dashboard",href:b.dashboard.root},{name:"Products",href:b.dashboard.product.root}],action:e.jsx(S,{component:W,href:b.dashboard.product.new,variant:"contained",startIcon:e.jsx(T,{icon:"mingcute:add-line"}),children:"New Product"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(z,{children:[e.jsx(M,{filters:l,onFilters:R,stockOptions:se,publishOptions:pe}),C&&e.jsx(Q,{filters:l,onFilters:R,onResetFilters:I,results:d.length,sx:{p:2.5,pt:0}}),e.jsxs(le,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(Z,{dense:t.dense,numSelected:t.selected.length,rowCount:n.length,onSelectAllRows:s=>t.onSelectAllRows(s,n.map(r=>r.id)),action:e.jsx(K,{title:"Delete",children:e.jsx(q,{color:"primary",onClick:x.onTrue,children:e.jsx(T,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(G,{children:e.jsxs(de,{size:t.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(ee,{order:t.order,orderBy:t.orderBy,headLabel:me,rowCount:n.length,numSelected:t.selected.length,onSort:t.onSort,onSelectAllRows:s=>t.onSelectAllRows(s,n.map(r=>r.id))}),e.jsx(ce,{children:a?[...Array(t.rowsPerPage)].map((s,r)=>e.jsx(he,{sx:{height:F}},r)):e.jsx(e.Fragment,{children:d.map(s=>e.jsx(X,{row:s,selected:t.selected.includes(s.id),onSelectRow:()=>t.onSelectRow(s.id),onDeleteRow:()=>A(s.id),onEditRow:()=>B(s.id),onViewRow:()=>E(s.id)},s.id))})})]})})]}),e.jsx(te,{count:d.length,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})]}),e.jsx(ie,{open:x.value,onClose:x.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:e.jsx(S,{variant:"contained",color:"error",onClick:()=>{D(),x.onFalse()},children:"Delete"})})]})}function ge({inputData:o,comparator:t,filters:f}){const{name:n,stock:c,publish:l}=f,g=o.map((a,h)=>[a,h]);return g.sort((a,h)=>{const m=t(a[0],h[0]);return m!==0?m:a[1]-h[1]}),o=g.map(a=>a[0]),n&&(o=o.filter(a=>a.name.toLowerCase().indexOf(n.toLowerCase())!==-1)),c.length&&(o=o.filter(a=>c.includes(a.inventoryType))),l.length&&(o=o.filter(a=>l.includes(a.publish))),o}function ct(){return e.jsxs(e.Fragment,{children:[e.jsx($,{children:e.jsx("title",{children:" Dashboard: Product List"})}),e.jsx(ue,{})]})}export{ct as default};
