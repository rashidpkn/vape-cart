import{D as i,af as t,au as O,c1 as v,aN as V,c0 as z,bg as U,bS as W,ay as b,aB as H,aw as S,ax as N,az as T,aI as _,cj as q,aW as G,bX as K,aZ as M}from"./index-b7be9608.js";import{C as X}from"./custom-breadcrumbs-30dcd104.js";import{i as Z,j as $,k as J}from"./product-details-description-5e0180fd.js";import{a as P}from"./api-1100fa52.js";import{T as Q,a as Y,c as ee,b as te,d as se}from"./table-pagination-custom-97218e51.js";import"./image-ff410a5f.js";import{g as oe}from"./_product-35acb143.js";import{u as re,f as ae,e as ne,S as g}from"./axios-4fb564e1.js";import{u as ie,g as le}from"./use-table-2cec7962.js";import{C as ce}from"./confirm-dialog-b2383a03.js";import{T as de,a as he,b as ue}from"./TableContainer-e89fc8c8.js";import"./form-provider-e03139a4.js";import"./format-number-570f4cb9.js";import"./fade-295cf198.js";import"./transition-bee6630b.js";import"./Checkbox-3242b68d.js";import"./SwitchBase-5497b107.js";import"./Chip-6dd3051b.js";import"./Radio-0cbc0ae4.js";import"./Switch-24adfb48.js";import"./Autocomplete-85eb26b3.js";import"./Close-b9deebd5.js";import"./yup-7a986a7c.js";import"./CircularProgress-5167d8ea.js";import"./color-picker-2c3f5354.js";import"./Fab-4d073cf5.js";import"./Slider-bbfd7936.js";import"./Rating-be88d779.js";import"./DialogTitle-cb75bc43.js";import"./DialogContent-27d79729.js";import"./lightbox-d5d85287.js";import"./carousel-arrow-index-bd9ca01e.js";import"./use-carousel-f3c1275a.js";import"./axios-d5068281.js";function pe(){const o=ne.product.list,{data:e,isLoading:d,error:r,isValidating:l}=re(o,ae);return i.useMemo(()=>({products:(e==null?void 0:e.products)||[],productsLoading:d,productsError:r,productsValidating:l,productsEmpty:!d&&!(e!=null&&e.products.length)}),[e==null?void 0:e.products,r,d,l])}function me({...o}){return t.jsx(Q,{...o,children:t.jsx(Y,{colSpan:12,children:t.jsxs(O,{spacing:3,direction:"row",alignItems:"center",children:[t.jsx(g,{sx:{borderRadius:1.5,width:48,height:48,flexShrink:0}}),t.jsx(g,{sx:{width:1,height:12}}),t.jsx(g,{sx:{width:180,height:12}}),t.jsx(g,{sx:{width:160,height:12}}),t.jsx(g,{sx:{width:140,height:12}}),t.jsx(g,{sx:{width:120,height:12}})]})})})}const ge=[{id:"name",label:"Product"},{id:"createdAt",label:"Create at",width:160},{id:"inventoryType",label:"Stock",width:160},{id:"price",label:"Price",width:140},{id:"publish",label:"Publish",width:110},{id:"",width:88}],xe=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],j={name:"",publish:[],stock:[]};function be(){const o=v(),e=ie(),d=V(),[r,l]=i.useState([]),[c,x]=i.useState(j),{productsLoading:n,productsEmpty:u}=pe(),[p,y]=i.useState([]),{user:{id:k}}=z();i.useEffect(()=>{(async()=>{try{const{data:{products:a,count:m}}=await P.get("products",{params:{userId:k}});y(a)}catch{alert("error Occure")}})()},[]);const w=U();i.useEffect(()=>{p.length&&l(p)},[p]);const h=we({inputData:r,comparator:le(e.order,e.orderBy),filters:c}),f=h.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),F=e.dense?60:80,R=!W(j,c);h.length;const C=i.useCallback((s,a)=>{e.onResetPage(),x(m=>({...m,[s]:a}))},[e]),L=i.useCallback(async s=>{try{const a=await P.delete(`product/${s}`),m=r.filter(I=>I.id!==s);l(m),e.onUpdatePageDeleteRow(f.length)}catch(a){alert(a.response.data.message)}},[f.length,e,r]),D=i.useCallback(async()=>{try{const s=await P.delete("products",{data:{ids:e.selected}}),a=r.filter(m=>!e.selected.includes(m.id));l(a),e.onUpdatePageDeleteRows({totalRows:r.length,totalRowsInPage:f.length,totalRowsFiltered:h.length})}catch(s){alert(s.response.data.message)}},[h.length,f.length,e,r]),E=i.useCallback(s=>{o.push(b.dashboard.product.edit(s))},[o]),A=i.useCallback(s=>{o.push(b.dashboard.product.details(s))},[o]),B=i.useCallback(()=>{x(j)},[]);return t.jsxs(t.Fragment,{children:[t.jsxs(H,{maxWidth:d.themeStretch?!1:"lg",children:[t.jsx(X,{heading:"Products",links:[{name:"Dashboard",href:b.dashboard.root},{name:"Products",href:b.dashboard.product.root}],action:t.jsx(S,{component:N,href:b.dashboard.product.new,variant:"contained",startIcon:t.jsx(T,{icon:"mingcute:add-line"}),children:"New Product"}),sx:{mb:{xs:3,md:5}}}),t.jsxs(_,{children:[t.jsx(Z,{filters:c,onFilters:C,stockOptions:oe,publishOptions:xe}),R&&t.jsx($,{filters:c,onFilters:C,onResetFilters:B,results:h.length,sx:{p:2.5,pt:0}}),t.jsxs(de,{sx:{position:"relative",overflow:"unset"},children:[t.jsx(ee,{dense:e.dense,numSelected:e.selected.length,rowCount:r.length,onSelectAllRows:s=>e.onSelectAllRows(s,r.map(a=>a.id)),action:t.jsx(q,{title:"Delete",children:t.jsx(G,{color:"primary",onClick:w.onTrue,children:t.jsx(T,{icon:"solar:trash-bin-trash-bold"})})})}),t.jsx(K,{children:t.jsxs(he,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[t.jsx(te,{order:e.order,orderBy:e.orderBy,headLabel:ge,rowCount:r.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:s=>e.onSelectAllRows(s,r.map(a=>a.id))}),t.jsx(ue,{children:n?[...Array(e.rowsPerPage)].map((s,a)=>t.jsx(me,{sx:{height:F}},a)):t.jsx(t.Fragment,{children:h.map(s=>t.jsx(J,{row:s,selected:e.selected.includes(s.id),onSelectRow:()=>e.onSelectRow(s.id),onDeleteRow:()=>L(s.id),onEditRow:()=>E(s.id),onViewRow:()=>A(s.id)},s.id))})})]})})]}),t.jsx(se,{count:h.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),t.jsx(ce,{open:w.value,onClose:w.onFalse,title:"Delete",content:t.jsxs(t.Fragment,{children:["Are you sure want to delete ",t.jsxs("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:t.jsx(S,{variant:"contained",color:"error",onClick:()=>{D(),w.onFalse()},children:"Delete"})})]})}function we({inputData:o,comparator:e,filters:d}){const{name:r,stock:l,publish:c}=d,x=o.map((n,u)=>[n,u]);return x.sort((n,u)=>{const p=e(n[0],u[0]);return p!==0?p:n[1]-u[1]}),o=x.map(n=>n[0]),r&&(o=o.filter(n=>n.name.toLowerCase().indexOf(r.toLowerCase())!==-1)),l.length&&(o=o.filter(n=>l.includes(n.inventoryType))),c.length&&(o=o.filter(n=>c.includes(n.publish))),o}function Ye(){return t.jsxs(t.Fragment,{children:[t.jsx(M,{children:t.jsx("title",{children:" Dashboard: Product List"})}),t.jsx(be,{})]})}export{Ye as default};
