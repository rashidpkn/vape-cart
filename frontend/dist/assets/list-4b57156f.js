import{aS as T,H as l,ar as S,aT as y,b as P,ao as m,j as t,B as k,aH as D,a as w,aL as F,ap as x,ah as B,aU as A,aV as E,aM as L,aN as I,ai as O,aj as v,ak as H,al as U,aW as N,W as _}from"./index-7327ab00.js";import"./form-provider-41e81275.js";import{c as q,d as W}from"./product-details-description-7b79aff9.js";import{u as z,g as V}from"./use-table-508e20ca.js";import{C as $}from"./confirm-dialog-7fc6a587.js";import{T as K}from"./TableContainer-db95f9ec.js";import"./file-thumbnail-6e25d854.js";import"./fade-295cf198.js";import"./transition-bee6630b.js";import"./image-0175400e.js";import"./Radio-ca1e0722.js";import"./lightbox-7f372fd5.js";import"./Rating-34a14843.js";import"./yup-79c4420f.js";import"./CircularProgress-5f8814b1.js";import"./DialogTitle-778305b8.js";import"./DialogContent-8216996b.js";import"./index-79dc0392.js";import"./use-carousel-f2fb5be4.js";const M=[{id:"name",label:"Product"},{id:"createdAt",label:"Create at",width:160},{id:"Product Type",label:"Product Type",width:160},{id:"inventoryType",label:"Stock",width:160},{id:"price",label:"Price",width:140},{id:"sales Price",label:"Sales Price",width:140},{id:"status",label:"Status",width:110},{id:"quickEdit",label:"Quick Edit",width:110},{id:"",width:88}],Q=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],G={name:"",stock:""};function J(){const s=T(),e=z(),[r,c]=l.useState([]),[h,p]=l.useState(G),{user:{id:o}}=S(),i=async()=>{try{const{data:{products:a}}=await P.get("products",{params:{userId:o,perPage:5e3}});a!=null&&a.length&&c(a)}catch(a){console.log(`Error : ${a}`)}};l.useEffect(()=>{i()},[]);const d=y(),u=X({inputData:r,comparator:V(e.order,e.orderBy),filters:h}),g=u.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage);e.dense;const f=l.useCallback((a,n)=>{e.onResetPage(),p(b=>({...b,[a]:n}))},[e]),j=l.useCallback(async a=>{try{await P.delete(`products/${a}`);const n=r.filter(b=>b.id!==a);c(n),e.onUpdatePageDeleteRow(g.length)}catch(n){alert(n.response.data.message)}},[g.length,e,r]),C=l.useCallback(async()=>{try{await P.delete("products",{data:{ids:e.selected}});const a=r.filter(n=>!e.selected.includes(n.id));c(a),e.onUpdatePageDeleteRows({totalRows:r.length,totalRowsInPage:g.length,totalRowsFiltered:u.length})}catch(a){alert(a.response.data.message)}},[u.length,g.length,e,r]),R=l.useCallback(a=>{s.push(m.dashboard.product.edit(a))},[s]);return l.useCallback(a=>{s.push(m.product.details(a))},[s]),t.jsxs(t.Fragment,{children:[t.jsxs(k,{px:5,children:[t.jsx(D,{heading:"Products",links:[{name:"Dashboard",href:m.dashboard.root},{name:"Products",href:m.dashboard.product.root}],action:t.jsx(w,{component:F,href:m.dashboard.product.new,variant:"contained",startIcon:t.jsx(x,{icon:"mingcute:add-line"}),children:"New Product"}),sx:{mb:{xs:3,md:5}}}),t.jsxs(B,{children:[t.jsx(q,{filters:h,onFilters:f,stockOptions:A,publishOptions:Q}),t.jsxs(K,{sx:{position:"relative",overflow:"unset"},children:[t.jsx(E,{dense:e.dense,numSelected:e.selected.length,rowCount:r.length,onSelectAllRows:a=>e.onSelectAllRows(a,r.map(n=>n.id)),action:t.jsx(L,{title:"Delete",children:t.jsx(I,{color:"primary",onClick:d.onTrue,children:t.jsx(x,{icon:"solar:trash-bin-trash-bold"})})})}),t.jsx(O,{children:t.jsxs(v,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[t.jsx(H,{order:e.order,orderBy:e.orderBy,headLabel:M,rowCount:r.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:a=>e.onSelectAllRows(a,r.map(n=>n.id))}),t.jsx(U,{children:t.jsx(t.Fragment,{children:u.map(a=>t.jsx(W,{row:a,selected:e.selected.includes(a.id),onSelectRow:()=>e.onSelectRow(a.id),onDeleteRow:()=>j(a.id),onEditRow:()=>R(a.id),fetchProduct:i},a.id))})})]})})]}),t.jsx(N,{count:u.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),t.jsx($,{open:d.value,onClose:d.onFalse,title:"Delete",content:t.jsxs(t.Fragment,{children:["Are you sure want to delete ",t.jsxs("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:t.jsx(w,{variant:"contained",color:"error",onClick:()=>{C(),d.onFalse()},children:"Delete"})})]})}function X({inputData:s,comparator:e,filters:r}){const{name:c,stock:h}=r,p=s.map((o,i)=>[o,i]);return p.sort((o,i)=>{const d=e(o[0],i[0]);return d!==0?d:o[1]-i[1]}),s=p.map(o=>o[0]),c&&(s=s.filter(o=>o.name.toLowerCase().indexOf(c.toLowerCase())!==-1)),h.length&&(s=s.filter(o=>h[0]==="in stock"?!!o.quantity:!o.quantity)),s}function Pe(){return t.jsxs(t.Fragment,{children:[t.jsx(_,{children:t.jsx("title",{children:" Dashboard: Product List"})}),t.jsx(J,{})]})}export{Pe as default};
