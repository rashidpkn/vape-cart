import{a7 as H,az as W,bl as _,aT as z,D as n,ah as r,a9 as e,ak as U,af as R,ag as G,ai as c,at as D,bf as C,aa as P,ax as $,av as q,ap as J,aw as K,aG as M,c2 as Q,bB as x,aI as b,aL as X}from"./index-0c2a703b.js";import{C as Y}from"./confirm-dialog-ebab4555.js";import{C as Z}from"./custom-breadcrumbs-2d27857c.js";import{u as ee,e as te}from"./use-table-f0d2e9c8.js";import{b as oe,a as ae,d as se,e as le,c as ne}from"./table-pagination-custom-f46a4e0c.js";import{I as d,a as ie,b as re,c as ce}from"./invoice-details-0efabbf6.js";import{a as v}from"./api-1100fa52.js";import{T as de,a as me,b as pe}from"./TableContainer-e16b26c5.js";import"./DialogTitle-74466561.js";import"./DialogContent-dff8e7c3.js";import"./DialogActions-ffa25fd1.js";import"./TablePagination-dd5e3528.js";import"./Checkbox-59175dc0.js";import"./SwitchBase-ae0b0f64.js";import"./format-number-aaf23d7c.js";import"./CircularProgress-b0e40b76.js";import"./DatePicker-d9595d2f.js";import"./ListItem-9ff5a3a5.js";import"./ListItemSecondaryAction-6e2822e7.js";import"./Chip-3aaf9fe3.js";import"./custom-date-range-picker-e5dae14b.js";import"./form-provider-d4331558.js";import"./upload-avatar-6ed90205.js";import"./fade-ba5404aa.js";import"./transition-71675215.js";import"./index-1edc3c71.js";import"./image-040a56dc.js";import"./FormControlLabel-ddbcf947.js";import"./FormGroup-ee8aef8c.js";import"./Switch-9d2e3a47.js";import"./editor-25b8a849.js";import"./highlight-5d2f9a95.js";import"./Slider-aba0d21e.js";import"./visuallyHidden-14c3de6e.js";import"./RadioGroup-0b7900f0.js";import"./Radio-d48e7c8e.js";import"./Autocomplete-6802852f.js";import"./Close-24ed4d34.js";import"./yup-42b968b0.js";import"./address-list-dialog-04fcf2a8.js";import"./LoadingButton-2ff435f1.js";import"./axios-d5068281.js";const ue=[{id:"invoiceNumber",label:"Customer"},{id:"createDate",label:"Create"},{id:"dueDate",label:"Due"},{id:"price",label:"Amount"},{id:"status",label:"Status"},{id:""}],T={name:"",service:[],status:"all",startDate:null,endDate:null};function he(){const i=H(),I=W(),m=_(),o=ee({defaultOrderBy:"createDate"}),p=z(),[a,j]=n.useState([]),S=async()=>{try{const{data:t}=await v.get("invoice");console.log(t),j(t)}catch{}};n.useEffect(()=>{S()},[]);const[l,f]=n.useState(T),y=l.startDate&&l.endDate?l.startDate.getTime()>l.endDate.getTime():!1,F=o.dense?56:76,w=!!l.name||!!l.service.length||l.status!=="all"||!!l.startDate&&!!l.endDate,k=!a.length&&w||!a.length,u=t=>a.filter(s=>s.status===t).length,A=[{value:"all",label:"All",color:"default",count:a.length},{value:"paid",label:"Paid",color:"success",count:u("paid")},{value:"pending",label:"Pending",color:"warning",count:u("pending")},{value:"overdue",label:"Overdue",color:"error",count:u("overdue")},{value:"draft",label:"Draft",color:"default",count:u("draft")}],h=n.useCallback((t,s)=>{o.onResetPage(),f(g=>({...g,[t]:s}))},[o]),E=n.useCallback(t=>{v.delete("invoice",{data:{id:t}}).then(g=>{alert("Invoice in deleted")});const s=a.filter(g=>g.id!==t);j(s),o.onUpdatePageDeleteRow(a.length)},[a.length,o,a]),B=n.useCallback(()=>{v.delete("invoice",{data:{id:o.selected}}).then(s=>{alert("Invoice in deleted")});const t=a.filter(s=>!o.selected.includes(s.id));j(t),o.onUpdatePageDeleteRows({totalRows:a.length,totalRowsInPage:a.length,totalRowsFiltered:a.length})},[a.length,a.length,o,a]),L=n.useCallback(t=>{m.push(r.dashboard.invoice.edit(t))},[m]),O=n.useCallback(t=>{m.push(r.dashboard.invoice.details(t))},[m]),N=n.useCallback((t,s)=>{h("status",s)},[h]),V=n.useCallback(()=>{f(T)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(U,{maxWidth:I.themeStretch?!1:"lg",children:[e.jsx(Z,{heading:"Invoice",links:[{name:"Dashboard",href:r.dashboard.root},{name:"Invoice",href:r.dashboard.invoice.root}],action:e.jsx(R,{component:G,href:r.dashboard.invoice.new,variant:"contained",startIcon:e.jsx(c,{icon:"mingcute:add-line"}),children:"New Invoice"}),sx:{mb:{xs:3,md:5}}}),e.jsx(D,{sx:{mb:{xs:3,md:5}},children:e.jsx(C,{children:e.jsxs(P,{direction:"row",divider:e.jsx($,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[e.jsx(d,{title:"Total",total:0,percent:0,price:0,icon:"solar:bill-list-bold-duotone",color:i.palette.info.main}),e.jsx(d,{title:"Paid",total:0,percent:0,price:0,icon:"solar:file-check-bold-duotone",color:i.palette.success.main}),e.jsx(d,{title:"Pending",total:0,percent:0,price:0,icon:"solar:sort-by-time-bold-duotone",color:i.palette.warning.main}),e.jsx(d,{title:"Overdue",total:0,percent:0,price:0,icon:"solar:bell-bing-bold-duotone",color:i.palette.error.main}),e.jsx(d,{title:"Draft",total:0,percent:0,price:0,icon:"solar:file-corrupted-bold-duotone",color:i.palette.text.secondary})]})})}),e.jsxs(D,{children:[e.jsx(q,{value:l.status,onChange:N,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${J(i.palette.grey[500],.08)}`},children:A.map(t=>e.jsx(K,{value:t.value,label:t.label,iconPosition:"end",icon:e.jsx(M,{variant:(t.value==="all"||t.value===l.status)&&"filled"||"soft",color:t.color,children:"0"})},t.value))}),e.jsx(ie,{filters:l,onFilters:h,dateError:y,serviceOptions:Q.map(t=>t.name)}),w&&e.jsx(re,{filters:l,onFilters:h,onResetFilters:V,results:a.length,sx:{p:2.5,pt:0}}),e.jsxs(de,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(oe,{dense:o.dense,numSelected:o.selected.length,rowCount:a.length,onSelectAllRows:t=>o.onSelectAllRows(t,a.map(s=>s.id)),action:e.jsxs(P,{direction:"row",children:[e.jsx(x,{title:"Sent",children:e.jsx(b,{color:"primary",children:e.jsx(c,{icon:"iconamoon:send-fill"})})}),e.jsx(x,{title:"Download",children:e.jsx(b,{color:"primary",children:e.jsx(c,{icon:"eva:download-outline"})})}),e.jsx(x,{title:"Print",children:e.jsx(b,{color:"primary",children:e.jsx(c,{icon:"solar:printer-minimalistic-bold"})})}),e.jsx(x,{title:"Delete",children:e.jsx(b,{color:"primary",onClick:p.onTrue,children:e.jsx(c,{icon:"solar:trash-bin-trash-bold"})})})]})}),e.jsx(C,{children:e.jsxs(me,{size:o.dense?"small":"medium",sx:{minWidth:800},children:[e.jsx(ae,{order:o.order,orderBy:o.orderBy,headLabel:ue,rowCount:a.length,numSelected:o.selected.length,onSort:o.onSort,onSelectAllRows:t=>o.onSelectAllRows(t,a.map(s=>s.id))}),e.jsxs(pe,{children:[a.slice(o.page*o.rowsPerPage,o.page*o.rowsPerPage+o.rowsPerPage).map(t=>e.jsx(ce,{row:t,selected:o.selected.includes(t.id),onSelectRow:()=>o.onSelectRow(t.id),onViewRow:()=>O(t.id),onEditRow:()=>L(t.id),onDeleteRow:()=>E(t.id)},t.id)),e.jsx(se,{height:F,emptyRows:te(o.page,o.rowsPerPage,a.length)}),e.jsx(le,{notFound:k})]})]})})]}),e.jsx(ne,{count:a.length,page:o.page,rowsPerPage:o.rowsPerPage,onPageChange:o.onChangePage,onRowsPerPageChange:o.onChangeRowsPerPage,dense:o.dense,onChangeDense:o.onChangeDense})]})]}),e.jsx(Y,{open:p.value,onClose:p.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",o.selected.length," "]})," items?"]}),action:e.jsx(R,{variant:"contained",color:"error",onClick:()=>{B(),p.onFalse()},children:"Delete"})})]})}function at(){return e.jsxs(e.Fragment,{children:[e.jsx(X,{children:e.jsx("title",{children:" Dashboard: Invoice List"})}),e.jsx(he,{})]})}export{at as default};
