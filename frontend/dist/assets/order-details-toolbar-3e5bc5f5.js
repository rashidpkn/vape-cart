import{bF as U,bM as J,j as e,B as i,b8 as B,bE as F,ch as G,bb as V,bd as T,aS as u,cv as se,S as s,b6 as X,bN as Y,bf as W,aP as S,aL as o,b7 as Q,F as b,b4 as oe,bK as ae,bu as $,aR as z,bx as le,a$ as _,b1 as ie,aH as ce,b2 as de,b$ as xe,bC as Z,cu as he,cw as O,bc as I,T as H,aT as pe,b3 as A,aQ as ue,bW as je}from"./index-f9021dbd.js";import{C as ee}from"./confirm-dialog-aefa8f33.js";import{u as me,g as ge,e as be}from"./use-table-9b5e25ee.js";import{T as q,a as w,c as ye,b as we,e as fe,f as Ce,d as Te}from"./table-pagination-custom-532209c9.js";import{f as C}from"./format-number-91b78f73.js";import{C as Se}from"./Checkbox-02cb7b46.js";import{s as ve}from"./custom-date-range-picker-9b1206ce.js";import{T as De,a as Pe,b as Re}from"./TableContainer-c6afb961.js";function ne({row:t,selected:a,onViewRow:p,onSelectRow:n,onDeleteRow:j}){const{id:h,items:c,status:d,createdAt:y,customer:l,totalQuantity:m,subTotal:v}=t,D=U(),P=U(),g=J(),L=e.jsxs(q,{hover:!0,selected:a,children:[e.jsx(w,{padding:"checkbox",children:e.jsx(Se,{checked:a,onClick:n})}),e.jsx(w,{children:e.jsxs(i,{onClick:p,sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:["#",h]})}),e.jsxs(w,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(B,{alt:l.name,src:l.avatarUrl,sx:{mr:2}}),e.jsx(F,{primary:l.name,secondary:l.email,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}})]}),e.jsx(w,{children:e.jsx(F,{primary:G(new Date(y),"dd MMM yyyy"),secondary:G(new Date(y),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsxs(w,{align:"center",children:[" ",m," "]}),e.jsxs(w,{children:[" ",C(v)," "]}),e.jsx(w,{children:e.jsx(V,{variant:"soft",color:d==="completed"&&"success"||d==="pending"&&"warning"||d==="cancelled"&&"error"||"default",children:d})}),e.jsxs(w,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:[e.jsx(T,{color:P.value?"inherit":"default",onClick:P.onToggle,sx:{...P.value&&{bgcolor:"action.hover"}},children:e.jsx(u,{icon:"eva:arrow-ios-downward-fill"})}),e.jsx(T,{color:g.open?"inherit":"default",onClick:g.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})]})]}),E=e.jsx(q,{children:e.jsx(w,{sx:{p:0,border:"none"},colSpan:8,children:e.jsx(se,{in:P.value,timeout:"auto",unmountOnExit:!0,sx:{bgcolor:"background.neutral"},children:e.jsx(s,{component:X,sx:{m:1.5},children:c.map(f=>e.jsxs(s,{direction:"row",alignItems:"center",sx:{p:k=>k.spacing(1.5,2,1.5,1.5),"&:not(:last-of-type)":{borderBottom:k=>`solid 2px ${k.palette.background.neutral}`}},children:[e.jsx(B,{src:f.images[0],variant:"rounded",sx:{width:48,height:48,mr:2}}),e.jsx(F,{primary:f.name,secondary:f.id,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),e.jsxs(i,{children:["x",f.quantity]}),e.jsx(i,{sx:{width:110,textAlign:"right"},children:C(f.salePrice)})]},f.id))})})})});return e.jsxs(e.Fragment,{children:[L,E,e.jsxs(Y,{open:g.open,onClose:g.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(W,{onClick:()=>{p(),g.onClose()},children:[e.jsx(u,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(W,{onClick:()=>{D.onTrue(),g.onClose()},sx:{color:"error.main"},children:[e.jsx(u,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),e.jsx(ee,{open:D.value,onClose:D.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(S,{variant:"contained",color:"error",onClick:j,children:"Delete"})})]})}ne.propTypes={onDeleteRow:o.func,onSelectRow:o.func,onViewRow:o.func,row:o.object,selected:o.bool};o.bool,o.object,o.func,o.func;function te({filters:t,onFilters:a,onResetFilters:p,results:n,...j}){const h=ve(t.startDate,t.endDate),c=()=>{a("status","all")},d=()=>{a("startDate",null),a("endDate",null)};return e.jsxs(s,{spacing:1.5,...j,children:[e.jsxs(i,{sx:{typography:"body2"},children:[e.jsx("strong",{children:n}),e.jsx(i,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(s,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[t.status!=="all"&&e.jsx(M,{label:"Status:",children:e.jsx(Q,{size:"small",label:t.status,onDelete:c})}),t.startDate&&t.endDate&&e.jsx(M,{label:"Date:",children:e.jsx(Q,{size:"small",label:h,onDelete:d})}),e.jsx(S,{color:"error",onClick:p,startIcon:e.jsx(u,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}te.propTypes={filters:o.object,onFilters:o.func,onResetFilters:o.func,results:o.number};function M({label:t,children:a,sx:p,...n}){return e.jsxs(s,{component:X,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...p},...n,children:[e.jsx(i,{component:"span",sx:{typography:"subtitle2"},children:t}),e.jsx(s,{spacing:1,direction:"row",flexWrap:"wrap",children:a})]})}M.propTypes={children:o.node,label:o.string,sx:o.object};const ke=[{value:"all",label:"All"},...he],Ie=[{id:"orderNumber",label:"Order",width:116},{id:"name",label:"Customer"},{id:"createdAt",label:"Date",width:140},{id:"totalQuantity",label:"Items",width:120,align:"center"},{id:"totalAmount",label:"Price",width:140},{id:"status",label:"Status",width:110},{id:"",width:88}],K={name:"",status:"all",startDate:null,endDate:null};function Me(){const[t,a]=b.useState([]),p=async()=>{try{const{data:r}=await $.get("/orders");a(r.reverse())}catch(r){console.log(r.message)}};b.useEffect(()=>{p()},[]);const n=me({defaultOrderBy:"orderNumber"});oe();const j=ae(),h=U(),[c,d]=b.useState(K),y=c.startDate&&c.endDate?c.startDate.getTime()>c.endDate.getTime():!1,l=Oe({inputData:t,comparator:ge(n.order,n.orderBy),filters:c,dateError:y}),m=l.slice(n.page*n.rowsPerPage,n.page*n.rowsPerPage+n.rowsPerPage),v=n.dense?52:72,D=!!c.name||c.status!=="all"||!!c.startDate&&!!c.endDate,P=!l.length&&D||!l.length,g=b.useCallback((r,x)=>{n.onResetPage(),d(N=>({...N,[r]:x}))},[n]),L=b.useCallback(r=>{$.delete("orders",{data:{id:r}});const x=t.filter(N=>N.id!==r);a(x),n.onUpdatePageDeleteRow(m.length)},[m.length,n,t]),E=b.useCallback(()=>{$.delete("orders",{data:{id:n.selected}});const r=t.filter(x=>!n.selected.includes(x.id));a(r),n.onUpdatePageDeleteRows({totalRows:t.length,totalRowsInPage:m.length,totalRowsFiltered:l.length})},[l.length,m.length,n,t]),f=b.useCallback(()=>{d(K)},[]),k=b.useCallback(r=>{j.push(z.dashboard.order.details(r))},[j]);b.useCallback((r,x)=>{g("status",x)},[g]);const[R,re]=b.useState("all");return e.jsxs(e.Fragment,{children:[e.jsxs(i,{px:5,children:[e.jsx(le,{heading:"Orders",links:[{name:"Dashboard",href:z.dashboard.root},{name:"Orders",href:z.dashboard.order.root}],sx:{mb:{xs:3,md:5}}}),e.jsxs(_,{children:[e.jsx(ie,{value:R,onChange:(r,x)=>re(x),sx:{px:2.5,boxShadow:r=>`inset 0 -2px 0 0 ${ce(r.palette.grey[500],.08)}`},children:ke.map(r=>e.jsx(de,{iconPosition:"end",value:r.value,label:r.label,icon:e.jsxs(V,{variant:(r.value==="all"||r.value===c.status)&&"filled"||"soft",color:r.value==="completed"&&"success"||r.value==="pending"&&"warning"||r.value==="cancelled"&&"error"||"default",children:[r.value==="all"&&t.length,r.value==="pending"&&t.filter(x=>x.status==="Order received"||x.status==="pending").length,r.value==="completed"&&t.filter(x=>x.status==="completed").length,r.value==="cancelled"&&t.filter(x=>x.status==="cancelled").length,r.value==="refunded"&&t.filter(x=>x.status==="refunded").length]})},r.value))}),D&&e.jsx(te,{filters:c,onFilters:g,onResetFilters:f,results:l.length,sx:{p:2.5,pt:0}}),e.jsxs(De,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(ye,{dense:n.dense,numSelected:n.selected.length,rowCount:t.length,onSelectAllRows:r=>n.onSelectAllRows(r,t.map(x=>x.id)),action:e.jsx(xe,{title:"Delete",children:e.jsx(T,{color:"primary",onClick:h.onTrue,children:e.jsx(u,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(Z,{children:e.jsxs(Pe,{size:n.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(we,{order:n.order,orderBy:n.orderBy,headLabel:Ie,rowCount:t.length,numSelected:n.selected.length,onSort:n.onSort,onSelectAllRows:r=>n.onSelectAllRows(r,t.map(x=>x.id))}),e.jsxs(Re,{children:[l.filter(r=>R==="all"||R==="pending"&&(r.status==="pending"||r.status==="Order received")||R==="completed"&&r.status==="completed"||R==="cancelled"&&r.status==="cancelled"||R==="refunded"&&r.status==="refunded").map(r=>e.jsx(ne,{row:r,selected:n.selected.includes(r.id),onSelectRow:()=>n.onSelectRow(r.id),onDeleteRow:()=>L(r.id),onViewRow:()=>k(r.id)},r.id)),e.jsx(fe,{height:v,emptyRows:be(n.page,n.rowsPerPage,t.length)}),e.jsx(Ce,{notFound:P})]})]})})]}),e.jsx(Te,{count:l.length,page:n.page,rowsPerPage:n.rowsPerPage,onPageChange:n.onChangePage,onRowsPerPageChange:n.onChangeRowsPerPage,onChangeDense:n.onChangeDense})]})]}),e.jsx(ee,{open:h.value,onClose:h.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",n.selected.length," "]})," items?"]}),action:e.jsx(S,{variant:"contained",color:"error",onClick:()=>{E(),h.onFalse()},children:"Delete"})})]})}function Oe({inputData:t,comparator:a,filters:p,dateError:n}){const{status:j,name:h,startDate:c,endDate:d}=p,y=t.map((l,m)=>[l,m]);return y.sort((l,m)=>{const v=a(l[0],m[0]);return v!==0?v:l[1]-m[1]}),t=y.map(l=>l[0]),h&&(t=t.filter(l=>l.orderNumber.toLowerCase().indexOf(h.toLowerCase())!==-1||l.customer.name.toLowerCase().indexOf(h.toLowerCase())!==-1||l.customer.email.toLowerCase().indexOf(h.toLowerCase())!==-1)),j!=="all"&&(t=t.filter(l=>l.status===j)),n||c&&d&&(t=t.filter(l=>O(l.createdAt)>=O(c)&&O(l.createdAt)<=O(d))),t}function Fe({customer:t,delivery:a,payment:p,shippingAddress:n}){const j=e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Customer Info",action:e.jsx(T,{children:e.jsx(u,{icon:"solar:pen-bold"})})}),e.jsxs(s,{direction:"row",sx:{p:3},children:[e.jsx(B,{alt:t==null?void 0:t.name,src:t==null?void 0:t.avatarUrl,sx:{width:48,height:48,mr:2}}),e.jsxs(s,{spacing:.5,alignItems:"flex-start",sx:{typography:"body2"},children:[e.jsx(H,{variant:"subtitle2",children:t==null?void 0:t.name}),e.jsx(i,{sx:{color:"text.secondary"},children:t==null?void 0:t.email}),e.jsx(S,{size:"small",color:"error",startIcon:e.jsx(u,{icon:"mingcute:add-line"}),sx:{mt:1},children:"Add to Blacklist"})]})]})]}),h=e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Delivery",action:e.jsx(T,{children:e.jsx(u,{icon:"solar:pen-bold"})})}),e.jsxs(s,{spacing:1.5,sx:{p:3,typography:"body2"},children:[e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(i,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Ship by"}),a==null?void 0:a.shipBy]}),e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(i,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Speedy"}),a==null?void 0:a.speedy]}),e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(i,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Tracking No."}),e.jsx(pe,{underline:"always",color:"inherit",children:a==null?void 0:a.trackingNumber})]})]})]}),c=e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Shipping",action:e.jsx(T,{children:e.jsx(u,{icon:"solar:pen-bold"})})}),e.jsxs(s,{spacing:1.5,sx:{p:3,typography:"body2"},children:[e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(i,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Suite"}),n==null?void 0:n.fullAddress.split(",")[0]]}),e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(i,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Street Address"}),n==null?void 0:n.fullAddress.split(",")[1]]}),e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(i,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"City"}),n==null?void 0:n.fullAddress.split(",")[2]]}),e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(i,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Country"}),n==null?void 0:n.fullAddress.split(",")[4]]}),e.jsxs(s,{direction:"row",alignItems:"center",children:[e.jsx(i,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Phone number"}),n==null?void 0:n.phoneNumber]})]})]}),d=e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"Payment",action:e.jsx(T,{children:e.jsx(u,{icon:"solar:pen-bold"})})}),e.jsxs(s,{direction:"row",alignItems:"center",sx:{p:3,typography:"body2"},children:[e.jsx(i,{component:"span",sx:{color:"text.secondary",flexGrow:1},children:"Type"}),"Cash",e.jsx(u,{icon:"la:money-bill-wave",width:24,sx:{ml:.5,color:"#85bb65"}})]})]});return e.jsxs(_,{children:[j,e.jsx(A,{sx:{borderStyle:"dashed"}}),h,e.jsx(A,{sx:{borderStyle:"dashed"}}),c,e.jsx(A,{sx:{borderStyle:"dashed"}}),d]})}Fe.propTypes={customer:o.object,delivery:o.object,payment:o.object,shippingAddress:o.object};function Be({items:t=[],shipping:a,discount:p,taxes:n,subTotal:j,totalAmount:h}){const c=e.jsxs(s,{spacing:2,alignItems:"flex-end",sx:{my:3,textAlign:"right",typography:"body2"},children:[e.jsxs(s,{direction:"row",children:[e.jsx(i,{sx:{color:"text.secondary"},children:"Subtotal"}),e.jsx(i,{sx:{width:160,typography:"subtitle2"},children:C(j)||"-"})]}),e.jsxs(s,{direction:"row",children:[e.jsx(i,{sx:{color:"text.secondary"},children:"Shipping"}),e.jsx(i,{sx:{width:160,...a&&{color:"error.main"}},children:a?`- ${C(a)}`:"-"})]}),e.jsxs(s,{direction:"row",children:[e.jsx(i,{sx:{color:"text.secondary"},children:"Discount"}),e.jsx(i,{sx:{width:160,...p&&{color:"error.main"}},children:p?`- ${C(p)}`:"-"})]}),e.jsxs(s,{direction:"row",children:[e.jsx(i,{sx:{color:"text.secondary"},children:"Taxes"}),e.jsx(i,{sx:{width:160},children:n?C(n):"-"})]}),e.jsxs(s,{direction:"row",sx:{typography:"subtitle1"},children:[e.jsx(i,{children:"Total"}),e.jsx(i,{sx:{width:160},children:C(h)||"-"})]})]});return e.jsxs(_,{children:[e.jsx(I,{title:"Details"}),e.jsxs(s,{sx:{px:3},children:[e.jsx(Z,{children:t==null?void 0:t.map(d=>e.jsxs(s,{direction:"row",alignItems:"center",sx:{py:3,minWidth:640,borderBottom:y=>`dashed 2px ${y.palette.background.neutral}`},children:[e.jsx(B,{src:d.images[0],variant:"rounded",sx:{width:48,height:48,mr:2}}),e.jsx(F,{primary:d.name,secondary:d.id,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),e.jsxs(i,{sx:{typography:"body2"},children:["x",d.quantity]}),e.jsx(i,{sx:{width:110,textAlign:"right",typography:"subtitle2"},children:C(d.salePrice)})]},d.id))}),c]})]})}Be.propTypes={discount:o.number,items:o.array,shipping:o.number,subTotal:o.number,taxes:o.number,totalAmount:o.number};function Le({status:t,backLink:a,createdAt:p,orderNumber:n,statusOptions:j,onChangeStatus:h}){const c=J();return e.jsxs(e.Fragment,{children:[e.jsxs(s,{spacing:3,direction:{xs:"column",md:"row"},sx:{mb:{xs:3,md:5}},children:[e.jsxs(s,{spacing:1,direction:"row",alignItems:"flex-start",children:[e.jsx(T,{component:ue,href:a,children:e.jsx(u,{icon:"eva:arrow-ios-back-fill"})}),e.jsxs(s,{spacing:.5,children:[e.jsxs(s,{spacing:1,direction:"row",alignItems:"center",children:[e.jsxs(H,{variant:"h4",children:[" Order ",n," "]}),e.jsx(V,{variant:"soft",color:t==="completed"&&"success"||t==="pending"&&"warning"||t==="cancelled"&&"error"||"default",children:t})]}),e.jsx(H,{variant:"body2",sx:{color:"text.disabled"},children:je(p)})]})]}),e.jsxs(s,{flexGrow:1,spacing:1.5,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[e.jsx(S,{color:"inherit",variant:"outlined",endIcon:e.jsx(u,{icon:"eva:arrow-ios-downward-fill"}),onClick:c.onOpen,sx:{textTransform:"capitalize"},children:t}),e.jsx(S,{color:"inherit",variant:"outlined",startIcon:e.jsx(u,{icon:"solar:printer-minimalistic-bold"}),children:"Print"}),e.jsx(S,{color:"inherit",variant:"contained",startIcon:e.jsx(u,{icon:"solar:pen-bold"}),children:"Edit"})]})]}),e.jsx(Y,{open:c.open,onClose:c.onClose,arrow:"top-right",sx:{width:140},children:j.map(d=>e.jsx(W,{selected:d.value===t,onClick:()=>{c.onClose(),h(d.value)},children:d.label},d.value))})]})}Le.propTypes={backLink:o.string,createdAt:o.instanceOf(Date),onChangeStatus:o.func,orderNumber:o.string,status:o.string,statusOptions:o.array};export{Me as O,Le as a,Be as b,Fe as c};
