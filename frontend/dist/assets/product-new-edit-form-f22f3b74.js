import{F as n,j as e,ba as he,aO as xe,b5 as be,bb as je,bc as ge,aw as ue,aA as B,b2 as Se,ax as m,T as c,af as v,S as j,B as g,bd as N,be as A,bf as D,bg as J,ah as fe,bh as ye,ao as Y,ap as o,aj as Ce,bi as H,bj as ke,bk as K}from"./index-e61873f4.js";import{c as ve,a as b,b as I,d as U,u as Te,R as $,F as Ae,e as T,f as we,g as Fe,h as q}from"./form-provider-be07018e.js";import{o as Be,L as Ie}from"./yup-d78f85a8.js";import{C as R}from"./CardHeader-4cfa4fa3.js";let _=!1;const Re=n.forwardRef(function(S,f){return _||(console.warn(["MUI: The Autocomplete component was moved from the lab to the core.","","You should use `import { Autocomplete } from '@mui/material'`","or `import Autocomplete from '@mui/material/Autocomplete'`"].join(`
`)),_=!0),e.jsx(he,xe({ref:f},S))}),De=["Simple","Variable"],Ve=["Disposables","Vape Liquids","Salt Nicotine","Accessories",,"Vape Devices","Pod Systems","Nicotine Pouches","Pods & Coils","Batteries","Tanks","Others"],Ee=["New Collection","Limited Edition","Bestseller","Exclusive","Hot Deal","Trending Now","Seasonal Special","Eco-Friendly","On Sale","Clearance","Customer Favorite","Top Rated","Holiday Special","Gift Ideas","Must-Have","Limited Stock","Featured Product","Editor's Pick","Just Arrived","Back in Stock","Special Offer","Staff Picks","Flash Sale","Popular Choice","Best Value"],Le=["SMOK","Vaporesso","GeekVape","Voopoo","Innokin","Uwell","Aspire","Eleaf","Lost Vape","Joyetech","Wismec","Freemax","Suorin","iJoy","Rincoe","Augvape","Vandy Vape","OBS","Hellvape","Teslacigs","Artery","Dovpo","Vaptio","Kangertech","Digiflavor","Sigelei","Smoant","Pioneer4You","Vapor Storm","Hugo Vapor"],Ne=["Bottle Size","Puffs","Flavour","Nicotine Strength","Color","Batteries"],u={bottleSize:[10,15,30,50,60,100,120].map(a=>`${a} ml`),puffs:[500,1e3,1500,2e3,2500,3e3,3500,4e3,4500,5e3,5500,6500,7e3,7500,8e3,8500,9e3,9500,1e4].map(a=>`${a} puffs`),flavour:["Strawberry","Blueberry","Raspberry","Watermelon","Apple","Peach","Pineapple","Grape","Mango","Kiwi","Cherry","Banana","Lemon","Lime","Orange","Mixed Berries","Menthol","Peppermint","Spearmint","Ice Menthol","Minty Menthol","Cool Mint","Traditional Tobacco","American Blend","Virginia Tobacco","Turkish Tobacco","Cuban Cigar","Pipe Tobacco","Vanilla Custard","Chocolate Cake","Caramel","Butterscotch","Cheesecake","Tiramisu","Maple Syrup","Cookies and Cream","Pudding","Ice Cream","Bubblegum","Cotton Candy","Gummy Bear","Candy Cane","Marshmallow","Rock Candy","Toffee","Coffee","Cappuccino","Espresso","Latte","Cola","Energy Drink","Mojito","Lemonade","Iced Tea","Smoothie","Creamy Vanilla","Strawberry Cream","Coconut Cream","Hazelnut Cream","Irish Cream","Sugar Cookie","Blueberry Muffin","Donut","Pancake","Waffle","Pie Crust","Sour Apple","Sour Watermelon","Sour Cherry","Sour Lemon","Almond","Hazelnut","Peanut Butter","Pistachio","Walnut","Cinnamon","Clove","Gingerbread","Green Tea","Chamomile","Lavender","Eucalyptus"],nicotineStrength:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50].map(a=>`${a} mg`),color:["Black","Silver","White","Blue","Red","Green","Pink","Purple","Gold","Rainbow/Multicolor","Gunmetal/Gray","Yellow","Orange","Brown","Clear/Transparent"],batteries:["Single","Dual","Built-in","Triple","Quad"]};function Me({currentProduct:a}){const[S,f]=n.useState([]),V=be(),p=je("up","md"),{enqueueSnackbar:y}=ge(),{user:d}=ue(),E=ve().shape({name:b().required("Name is required"),subDescription:b().required("Short description is required"),content:b(),images:I().min(1,"Image is required"),type:b(),category:b().required("Category is required"),tags:I(),SKU:b().required("SKU is required"),brand:b().required("brand is required"),attributes:I(),variables:I(),quantity:U(),regularPrice:U(),salePrice:U().moreThan(0,"Price should not be AED 0.00")}),C=n.useMemo(()=>({id:(a==null?void 0:a.id)||"",name:(a==null?void 0:a.name)||"",subDescription:(a==null?void 0:a.subDescription)||"",content:(a==null?void 0:a.content)||"",images:(a==null?void 0:a.images)||[],type:(a==null?void 0:a.type)||"Simple",category:(a==null?void 0:a.category)||"None",tags:(a==null?void 0:a.tags)||[],SKU:(a==null?void 0:a.SKU)||"",brand:(a==null?void 0:a.brand)||"",attributes:(a==null?void 0:a.attributes)||[],variables:(a==null?void 0:a.attributes)||[],quantity:(a==null?void 0:a.quantity)||0,regularPrice:(a==null?void 0:a.regularPrice)||0,salePrice:(a==null?void 0:a.salePrice)||0}),[a]),[h,Q]=n.useState({"Bottle Size":[],Puffs:[]}),[k,z]=n.useState([]),G=Te({resolver:Be(E),defaultValues:C}),{reset:L,watch:X,setValue:x,handleSubmit:Z,formState:{isSubmitting:P}}=G,r=X(),ee=n.useCallback(async()=>{const{data:{products:s}}=await B.get("/products",{params:{name:r.name}});f(s)},[r.name]);n.useEffect(()=>{ee()},[r.name]),n.useEffect(()=>{a&&L(C)},[a,C,L]);const ae=Z(async s=>{console.log(s);try{a?await B.patch("products",{...s,username:d.displayName,userId:d.id,storeName:d.storeName}):await B.post("products",{...s,username:d.displayName,userId:d.id,storeName:d.storeName}),L(),y(a?"Update success!":"Create success!"),V.push(Se.dashboard.product.root)}catch(l){console.log(l)}}),se=n.useCallback(s=>{const l=r.images||[],i=s.map(t=>Object.assign(t,{preview:URL.createObjectURL(t)}));x("images",[...l,...i],{shouldValidate:!0})},[x,r.images]),ie=n.useCallback(s=>{var i;const l=r.images&&((i=r.images)==null?void 0:i.filter(t=>t!==s));x("images",l)},[x,r.images]),le=n.useCallback(()=>{x("images",[])},[x]),te=e.jsxs(e.Fragment,{children:[p&&e.jsxs(m,{md:4,children:[e.jsx(c,{variant:"h6",sx:{mb:.5},children:"Details"}),e.jsx(c,{variant:"body2",sx:{color:"text.secondary"},children:"Title, short description, image..."})]}),e.jsx(m,{xs:12,md:12,children:e.jsxs(v,{children:[!p&&e.jsx(R,{title:"Details"}),e.jsxs(j,{spacing:3,sx:{p:3},children:[e.jsx(T,{name:"name",label:"Product Name"}),e.jsx(T,{name:"subDescription",label:"Sub Description",multiline:!0,rows:4}),e.jsxs(j,{spacing:1.5,children:[e.jsx(c,{variant:"subtitle2",children:"Content"}),e.jsx(we,{simple:!0,name:"content"})]}),e.jsxs(j,{spacing:1.5,children:[e.jsx(c,{variant:"subtitle2",children:"Images"}),e.jsx(Fe,{multiple:!0,name:"images",maxSize:3145728,onDrop:se,onRemove:ie,onRemoveAll:le,onUpload:async s=>{try{const l=new FormData;r.images.forEach(t=>{l.append("images",t)});const{data:i}=await B.post("upload",l);x("images",i),alert("Image upload complete.")}catch{alert(" Image upload failed, try again.")}}})]})]})]})})]}),ne=e.jsxs(e.Fragment,{children:[p&&e.jsxs(m,{md:4,children:[e.jsx(c,{variant:"h6",sx:{mb:.5},children:"Key Properties"}),e.jsx(c,{variant:"body2",sx:{color:"text.secondary"},children:"Additional functions and attributes..."})]}),e.jsx(m,{xs:12,md:12,children:e.jsxs(v,{children:[!p&&e.jsx(R,{title:"Properties"}),e.jsx(j,{spacing:3,sx:{p:3},children:e.jsxs(g,{columnGap:2,rowGap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsx(q,{native:!0,name:"type",label:"Product Type",InputLabelProps:{shrink:!0},children:De.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx(q,{native:!0,name:"category",label:"Category",InputLabelProps:{shrink:!0},children:Ve.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx($,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,options:Ee.map(s=>s),getOptionLabel:s=>s,renderOption:(s,l)=>n.createElement("li",{...s,key:l},l),renderTags:(s,l)=>s.map((i,t)=>n.createElement(N,{...l({index:t}),key:i,label:i,size:"small",color:"info",variant:"soft"}))}),e.jsx(T,{name:"SKU",label:"Product SKU"}),e.jsx(q,{native:!0,name:"brand",label:"Brand",InputLabelProps:{shrink:!0},children:Le.map(s=>e.jsx("option",{value:s,children:s},s))})]})})]})})]}),oe=(s,l,i)=>{Q(t=>({...t,[i]:l}))},re=e.jsxs(e.Fragment,{children:[p&&e.jsxs(m,{md:4,children:[e.jsx(c,{variant:"h6",sx:{mb:.5},children:"Product Attributes"}),e.jsx(c,{variant:"body2",sx:{color:"text.secondary"},children:"Additional functions and attributes..."})]}),e.jsx(m,{xs:12,md:12,children:e.jsxs(v,{children:[!p&&e.jsx(R,{title:"Attributes"}),e.jsx(j,{spacing:3,sx:{p:3},children:e.jsxs(g,{columnGap:2,rowGap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsx(g,{sx:{gridColumn:"span 2 "},children:e.jsx($,{name:"attributes",label:"Attributes",placeholder:"+ Attributes",multiple:!0,freeSolo:!0,options:Ne.map(s=>s),getOptionLabel:s=>s,renderOption:(s,l)=>n.createElement("li",{...s,key:l},l),renderTags:(s,l)=>s.map((i,t)=>n.createElement(N,{...l({index:t}),key:i,label:i,size:"small",color:"info",variant:"soft"}))})}),r.attributes.map(s=>{var l;return e.jsxs(g,{sx:{gridColumn:"span 2 "},children:[e.jsx(Re,{multiple:!0,freeSolo:!0,options:s==="Bottle Size"&&u.bottleSize||s==="Puffs"&&u.puffs||s==="Flavour"&&u.flavour||s==="Nicotine Strength"&&u.nicotineStrength||s==="Color"&&u.color||s==="Batteries"&&u.batteries||[],value:h[s],onChange:(i,t)=>oe(i,t,s),renderInput:i=>e.jsx(A,{...i,label:s,placeholder:s}),renderTags:(i,t)=>i.map((F,de)=>n.createElement(N,{...t({index:de}),key:F,label:F,size:"small",color:"info",variant:"soft"}))}),r.type==="Variable"&&((l=h[s])==null?void 0:l.length)>=2&&e.jsx(D,{label:"Use this attributes to create variation",control:e.jsx(J,{checked:k.find(i=>i===s),onChange:i=>{if(i.target.checked){if(k.find(t=>t===s))return;z(t=>[...t,s])}else z(t=>t.filter(F=>F!==s))}})})]},s)})]})})]})})]}),me=e.jsxs(e.Fragment,{children:[p&&e.jsxs(m,{md:4,children:[e.jsx(c,{variant:"h6",sx:{mb:.5},children:"Pricing"}),e.jsx(c,{variant:"body2",sx:{color:"text.secondary"},children:"Price related inputs"})]}),e.jsx(m,{xs:12,md:12,children:e.jsxs(v,{children:[!p&&e.jsx(R,{title:"Pricing"}),e.jsxs(j,{spacing:3,sx:{p:3},children:[e.jsx(T,{name:"regularPrice",label:"Regular Price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(H,{position:"start",children:e.jsx(g,{component:"span",sx:{color:"text.disabled"},children:"AED"})})}}),e.jsx(T,{name:"salePrice",label:"Sale Price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(H,{position:"start",children:e.jsx(g,{component:"span",sx:{color:"text.disabled"},children:"AED"})})}})]})]})})]}),pe=e.jsx(e.Fragment,{children:e.jsx(m,{xs:12,md:8,sx:{display:"flex",alignItems:"center"},children:e.jsx(Ie,{type:"submit",variant:"contained",size:"large",loading:P,children:a?"Save Changes":"Create Product"})})}),M=["a","b","c","d","e","f","g","h"];let w=1,O=0;const ce=e.jsxs(e.Fragment,{children:[p&&e.jsx(m,{md:4,children:e.jsx(c,{variant:"h6",sx:{mb:.5},children:"Variation Table"})}),e.jsx(m,{xs:12,md:12,children:e.jsx(v,{children:e.jsxs(fe,{children:[e.jsx(ye,{children:e.jsxs(Y,{children:[e.jsx(o,{children:"ID"}),e.jsx(o,{width:150,children:"SKU"}),e.jsx(o,{width:150,children:"Attributes"}),e.jsx(o,{children:"Track"}),e.jsx(o,{children:"Stock"}),e.jsx(o,{children:"Regular Price"}),e.jsx(o,{children:"Sales Price"}),e.jsx(o,{children:"Image"})]})}),e.jsxs(Ce,{children:[e.jsx(W,{counter:w++,counter2:O++,skuAlpha:M,va:"Parent",values:r},w),k==null?void 0:k.map((s,l)=>h[s].map((i,t)=>e.jsx(W,{counter:w++,counter2:O++,skuAlpha:M,va:i,values:r},w)))]})]})})})]});return e.jsx(Ae,{methods:G,onSubmit:ae,children:e.jsxs(m,{container:!0,spacing:3,children:[te,ne,re,r.type==="Simple"&&me,r.type==="Variable"&&ce,pe]})})}function W({counter:a,values:S,skuAlpha:f,counter2:V,va:p}){const[y,d]=n.useState(!0),[E,C]=n.useState("instock");return e.jsxs(Y,{children:[e.jsx(o,{children:a}),e.jsxs(o,{children:[S.SKU,"-",f[V]]}),e.jsxs(o,{children:[S.name,"-",p]}),e.jsx(o,{children:e.jsx(D,{label:"",control:e.jsx(J,{checked:y,onChange:h=>d(h.target.checked)})})}),e.jsxs(o,{children:[y&&e.jsx(A,{size:"small",label:"Quantity",type:"number"}),!y&&e.jsxs(ke,{"aria-label":"Stock",name:"Stock",value:E,onChange:h=>C(h.target.value),children:[e.jsx(D,{value:"instock",control:e.jsx(K,{}),label:"Instock"}),e.jsx(D,{value:"outstock",control:e.jsx(K,{}),label:"Outstock"})]})]}),e.jsx(o,{children:e.jsx(A,{size:"small",label:"Price",type:"number"})}),e.jsx(o,{children:e.jsx(A,{size:"small",label:"Price",type:"number"})}),e.jsx(o,{children:e.jsx(A,{size:"small",label:"Image",type:"file"})})]})}export{Me as P};
