import{aa as D,j as e,q as v,ab as J,ac as P,l as b,x as r,S as K,s as O,c as S,B as R,h as L,p as Q,w as j,ad as U,u as W,f as X,L as Y,ae as Z,o as g,r as f,G as h,af as _,d as A,W as ee}from"./index-bc388b4b.js";import{C as se,B as te}from"./chart-8750aa13.js";import{f as re,a as k,b as oe}from"./format-number-3932d3e4.js";import{T as ie}from"./table-pagination-custom-d5281114.js";import{C as E}from"./Card-6273d280.js";import{C as ae}from"./CardHeader-6524fbec.js";import{T as ne}from"./TableContainer-f19f82b4.js";import{T as le,a as ce}from"./TableBody-782e6f5f.js";import{a as de,b as u}from"./TableRow-c8f22017.js";import"./Checkbox-09455ac3.js";import"./KeyboardArrowRight-6d5a049c.js";import"./LastPage-5b4e3e9d.js";function N({title:s,description:t,action:a,img:n,...l}){const o=D();return e.jsxs(v,{flexDirection:{xs:"column",md:"row"},sx:{...J({direction:"135deg",startColor:P(o.palette.primary.light,.2),endColor:P(o.palette.primary.main,.2)}),height:{md:1},borderRadius:2,position:"relative",color:"primary.darker",backgroundColor:"common.white"},...l,children:[e.jsxs(v,{flexGrow:1,justifyContent:"center",alignItems:{xs:"center",md:"flex-start"},sx:{p:{xs:o.spacing(5,3,0,3),md:o.spacing(5)},textAlign:{xs:"center",md:"left"}},children:[e.jsx(b,{paragraph:!0,variant:"h4",sx:{whiteSpace:"pre-line"},children:s}),e.jsx(b,{variant:"body2",sx:{opacity:.8,maxWidth:360,mb:{xs:3,xl:5}},children:t}),a&&a]}),n&&e.jsx(v,{component:"span",justifyContent:"center",sx:{p:{xs:5,md:3},maxWidth:360,mx:"auto"},children:n})]})}N.propTypes={action:r.node,description:r.string,img:r.node,title:r.string};function B({title:s,subheader:t,tableData:a,tableLabels:n,...l}){return e.jsxs(E,{...l,children:[e.jsx(ae,{title:s,subheader:t,sx:{mb:3}}),e.jsx(ne,{sx:{overflow:"unset"},children:e.jsx(K,{children:e.jsxs(le,{sx:{minWidth:680},children:[e.jsx(ie,{headLabel:n}),e.jsx(ce,{children:a.map(o=>e.jsx(G,{row:o},o.id))})]})})}),e.jsx(O,{sx:{borderStyle:"dashed"}}),e.jsx(S,{sx:{p:2,textAlign:"right"},children:e.jsx(R,{component:L,to:Q.dashboard.invoice.root,size:"small",color:"inherit",endIcon:e.jsx(j,{icon:"eva:arrow-ios-forward-fill",width:18,sx:{ml:-.5}}),children:"View All"})})]})}B.propTypes={subheader:r.string,tableData:r.array,tableLabels:r.array,title:r.string};function G({row:s}){var d,x,m;const t=U(),a=()=>{t.onClose(),console.info("DOWNLOAD",s.id)},n=()=>{t.onClose(),console.info("PRINT",s.id)},l=()=>{t.onClose(),console.info("SHARE",s.id)},o=()=>{t.onClose(),console.info("DELETE",s.id)},{user:c}=W();return e.jsxs(e.Fragment,{children:[e.jsxs(de,{children:[e.jsx(u,{children:s.id}),e.jsx(u,{children:s.invoiceTo.name}),e.jsx(u,{children:(d=s.items.find(i=>i.userId===c.id))==null?void 0:d.name}),e.jsx(u,{children:re(((x=s.items.find(i=>i.userId===c.id))==null?void 0:x.price)*((m=s.items.find(i=>i.userId===c.id))==null?void 0:m.quantity))}),e.jsx(u,{children:X(s.createdAt)}),e.jsx(u,{children:e.jsx(Y,{variant:"soft",color:s.status==="progress"&&"warning"||s.status==="out of date"&&"error"||"success",children:s.status})})]}),e.jsxs(Z,{open:t.open,onClose:t.onClose,arrow:"right-top",sx:{width:160},children:[e.jsxs(g,{onClick:a,children:[e.jsx(j,{icon:"eva:cloud-download-fill"}),"Download"]}),e.jsxs(g,{onClick:n,children:[e.jsx(j,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(g,{onClick:l,children:[e.jsx(j,{icon:"solar:share-bold"}),"Share"]}),e.jsx(O,{sx:{borderStyle:"dashed"}}),e.jsxs(g,{onClick:o,sx:{color:"error.main"},children:[e.jsx(j,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})]})}G.propTypes={row:r.object};function y({title:s,percent:t,total:a,chart:n,sx:l,...o}){const c=D(),{colors:d=[c.palette.primary.light,c.palette.primary.main],series:x,options:m}=n,i={colors:d.map(p=>p[1]),fill:{type:"gradient",gradient:{colorStops:[{offset:0,color:d[0]},{offset:100,color:d[1]}]}},chart:{sparkline:{enabled:!0}},plotOptions:{bar:{columnWidth:"68%",borderRadius:2}},tooltip:{x:{show:!1},y:{formatter:p=>k(p),title:{formatter:()=>""}},marker:{show:!1}},...m};return e.jsxs(E,{sx:{display:"flex",alignItems:"center",p:3,...l},...o,children:[e.jsxs(S,{sx:{flexGrow:1},children:[e.jsx(b,{variant:"subtitle2",children:s}),e.jsxs(v,{direction:"row",alignItems:"center",sx:{mt:2,mb:1},children:[e.jsx(j,{width:24,icon:t<0?"solar:double-alt-arrow-down-bold-duotone":"solar:double-alt-arrow-up-bold-duotone",sx:{mr:1,color:"success.main",...t<0&&{color:"error.main"}}}),e.jsxs(b,{component:"div",variant:"subtitle2",children:[t>0&&"+",oe(t)]})]}),e.jsx(b,{variant:"h3",children:k(a)})]}),e.jsx(se,{type:"bar",series:[{data:x}],options:i,width:60,height:36})]})}y.propTypes={chart:r.object,percent:r.number,sx:r.object,title:r.string,total:r.number};function pe(){const s=D(),{user:t}=W(),[a,n]=f.useState(0),[l,o]=f.useState([]),[c,d]=f.useState([]),[x,m]=f.useState([]);return f.useEffect(()=>{(async()=>{try{const[p,H,q]=await Promise.all([A.get("products",{params:{userId:t.id}}),A.get("/orders"),A.get("/invoice")]),{products:C,count:F}=p.data,V=H.data,z=q.data.reverse(),M=V.filter(w=>w.items.some(T=>C.some(I=>I.id===T.id))),$=z.filter(w=>w.items.some(T=>C.some(I=>I.id===T.id)));o(M),n(F),d($),m(C)}catch(p){console.error("An error occurred:",p)}})()},[t.id]),e.jsx(S,{px:5,children:e.jsxs(h,{container:!0,spacing:3,sx:{position:"relative"},children:[e.jsx(te,{products:x}),e.jsx(h,{xs:12,md:12,children:e.jsx(N,{title:`Welcome back ðŸ‘‹ 
 ${t==null?void 0:t.displayName}`,description:"",img:e.jsx(_,{}),action:e.jsx(L,{to:"/dashboard/product/new",children:e.jsx(R,{variant:"contained",color:"primary",children:"Add Product"})})})}),e.jsx(h,{xs:12,md:4,children:e.jsx(y,{title:"Total Product",percent:0,total:a,chart:{series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(y,{title:"Total Sales",percent:0,total:l.length,chart:{colors:[s.palette.info.light,s.palette.info.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,md:4,children:e.jsx(y,{title:"Pending Orders",percent:0,total:l.filter(i=>i.status==="pending"||i.status==="Order received").length,chart:{colors:[s.palette.warning.light,s.palette.warning.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(h,{xs:12,lg:12,children:e.jsx(B,{title:"New Invoice",tableData:c.slice(0,10),tableLabels:[{id:"id",label:"Invoice ID"},{id:"Customers",label:"Customers"},{id:"Product",label:"Product"},{id:"Amount",label:"Amount"},{id:"Date",label:"Date"},{id:"status",label:"Status"}]})})]})})}function Te(){return e.jsxs(e.Fragment,{children:[e.jsx(ee,{children:e.jsx("title",{children:" Dashboard: App"})}),e.jsx(pe,{})]})}export{Te as default};
