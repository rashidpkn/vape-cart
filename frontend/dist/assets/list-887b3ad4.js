import{a6 as U,ax as $,be as q,aP as G,D as d,b$ as J,ag as x,a8 as e,aj as K,ae as I,af as M,ah as b,b8 as F,a9 as A,av as Q,at as X,ao as Y,au as Z,aE as ee,c0 as te,bz as C,aF as R,b_ as T,aH as oe}from"./index-bf334511.js";import{s as L}from"./sumBy-baebb5b9.js";import{C as ae}from"./confirm-dialog-eae5bdc5.js";import{C as se}from"./custom-breadcrumbs-3a310c1d.js";import{u as ne,g as re,e as le}from"./use-table-6761b272.js";import{b as ie,a as ce,d as de,e as me,c as pe}from"./table-pagination-custom-edf98571.js";import{I as f,a as ue,b as he,c as ge}from"./invoice-details-31cf63bb.js";import{C as k}from"./Card-6dc62dad.js";import{T as xe,a as be,b as fe}from"./TableContainer-c0d2f4a8.js";import"./DialogTitle-4a7e452e.js";import"./DialogContent-30366fda.js";import"./DialogActions-849f84a7.js";import"./TablePagination-5c424e39.js";import"./Select-1c3a8fd5.js";import"./Menu-3b093474.js";import"./Checkbox-940e9fd7.js";import"./SwitchBase-f8898c21.js";import"./FormControlLabel-85e6080d.js";import"./Switch-62976b6d.js";import"./format-number-540433dd.js";import"./CircularProgress-c73bf2f6.js";import"./FormControl-96833b24.js";import"./TextField-e6e01232.js";import"./FormLabel-8a3d5af0.js";import"./DatePicker-c398e0a1.js";import"./ListItem-4b5e3c8a.js";import"./ListItemSecondaryAction-07ba9eda.js";import"./Chip-d1d4c445.js";import"./custom-date-range-picker-0678f2b3.js";import"./form-provider-4c9d564d.js";import"./upload-avatar-27b1cec6.js";import"./fade-ba5404aa.js";import"./transition-71675215.js";import"./index-15b2ea4b.js";import"./image-2ad327f3.js";import"./FormGroup-adfe5637.js";import"./editor-fe251b59.js";import"./highlight-6c4fe905.js";import"./Slider-ff272239.js";import"./visuallyHidden-14c3de6e.js";import"./RadioGroup-be7c58a2.js";import"./Radio-28939117.js";import"./Autocomplete-7badf00e.js";import"./Close-06645920.js";import"./yup-edfd6dd7.js";import"./address-list-dialog-c008d7bf.js";import"./LoadingButton-185667b8.js";const je=[{id:"invoiceNumber",label:"Customer"},{id:"createDate",label:"Create"},{id:"dueDate",label:"Due"},{id:"price",label:"Amount"},{id:"sent",label:"Sent",align:"center"},{id:"status",label:"Status"},{id:""}],B={name:"",service:[],status:"all",startDate:null,endDate:null};function ve(){const n=U(),D=$(),p=q(),t=ne({defaultOrderBy:"createDate"}),m=G(),[s,u]=d.useState(J),[r,h]=d.useState(B),g=r.startDate&&r.endDate?r.startDate.getTime()>r.endDate.getTime():!1,a=we({inputData:s,comparator:re(t.order,t.orderBy),filters:r,dateError:g}),i=a.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage),j=t.dense?56:76,y=!!r.name||!!r.service.length||r.status!=="all"||!!r.startDate&&!!r.endDate,E=!a.length&&y||!a.length,c=o=>s.filter(l=>l.status===o).length,v=o=>L(s.filter(l=>l.status===o),"totalAmount"),w=o=>c(o)/s.length*100,O=[{value:"all",label:"All",color:"default",count:s.length},{value:"paid",label:"Paid",color:"success",count:c("paid")},{value:"pending",label:"Pending",color:"warning",count:c("pending")},{value:"overdue",label:"Overdue",color:"error",count:c("overdue")},{value:"draft",label:"Draft",color:"default",count:c("draft")}],P=d.useCallback((o,l)=>{t.onResetPage(),h(S=>({...S,[o]:l}))},[t]),N=d.useCallback(o=>{const l=s.filter(S=>S.id!==o);u(l),t.onUpdatePageDeleteRow(i.length)},[i.length,t,s]),V=d.useCallback(()=>{const o=s.filter(l=>!t.selected.includes(l.id));u(o),t.onUpdatePageDeleteRows({totalRows:s.length,totalRowsInPage:i.length,totalRowsFiltered:a.length})},[a.length,i.length,t,s]),_=d.useCallback(o=>{p.push(x.dashboard.invoice.edit(o))},[p]),H=d.useCallback(o=>{p.push(x.dashboard.invoice.details(o))},[p]),z=d.useCallback((o,l)=>{P("status",l)},[P]),W=d.useCallback(()=>{h(B)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(K,{maxWidth:D.themeStretch?!1:"lg",children:[e.jsx(se,{heading:"List",links:[{name:"Dashboard",href:x.dashboard.root},{name:"Invoice",href:x.dashboard.invoice.root},{name:"List"}],action:e.jsx(I,{component:M,href:x.dashboard.invoice.new,variant:"contained",startIcon:e.jsx(b,{icon:"mingcute:add-line"}),children:"New Invoice"}),sx:{mb:{xs:3,md:5}}}),e.jsx(k,{sx:{mb:{xs:3,md:5}},children:e.jsx(F,{children:e.jsxs(A,{direction:"row",divider:e.jsx(Q,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[e.jsx(f,{title:"Total",total:s.length,percent:100,price:L(s,"totalAmount"),icon:"solar:bill-list-bold-duotone",color:n.palette.info.main}),e.jsx(f,{title:"Paid",total:c("paid"),percent:w("paid"),price:v("paid"),icon:"solar:file-check-bold-duotone",color:n.palette.success.main}),e.jsx(f,{title:"Pending",total:c("pending"),percent:w("pending"),price:v("pending"),icon:"solar:sort-by-time-bold-duotone",color:n.palette.warning.main}),e.jsx(f,{title:"Overdue",total:c("overdue"),percent:w("overdue"),price:v("overdue"),icon:"solar:bell-bing-bold-duotone",color:n.palette.error.main}),e.jsx(f,{title:"Draft",total:c("draft"),percent:w("draft"),price:v("draft"),icon:"solar:file-corrupted-bold-duotone",color:n.palette.text.secondary})]})})}),e.jsxs(k,{children:[e.jsx(X,{value:r.status,onChange:z,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${Y(n.palette.grey[500],.08)}`},children:O.map(o=>e.jsx(Z,{value:o.value,label:o.label,iconPosition:"end",icon:e.jsx(ee,{variant:(o.value==="all"||o.value===r.status)&&"filled"||"soft",color:o.color,children:o.count})},o.value))}),e.jsx(ue,{filters:r,onFilters:P,dateError:g,serviceOptions:te.map(o=>o.name)}),y&&e.jsx(he,{filters:r,onFilters:P,onResetFilters:W,results:a.length,sx:{p:2.5,pt:0}}),e.jsxs(xe,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(ie,{dense:t.dense,numSelected:t.selected.length,rowCount:s.length,onSelectAllRows:o=>t.onSelectAllRows(o,s.map(l=>l.id)),action:e.jsxs(A,{direction:"row",children:[e.jsx(C,{title:"Sent",children:e.jsx(R,{color:"primary",children:e.jsx(b,{icon:"iconamoon:send-fill"})})}),e.jsx(C,{title:"Download",children:e.jsx(R,{color:"primary",children:e.jsx(b,{icon:"eva:download-outline"})})}),e.jsx(C,{title:"Print",children:e.jsx(R,{color:"primary",children:e.jsx(b,{icon:"solar:printer-minimalistic-bold"})})}),e.jsx(C,{title:"Delete",children:e.jsx(R,{color:"primary",onClick:m.onTrue,children:e.jsx(b,{icon:"solar:trash-bin-trash-bold"})})})]})}),e.jsx(F,{children:e.jsxs(be,{size:t.dense?"small":"medium",sx:{minWidth:800},children:[e.jsx(ce,{order:t.order,orderBy:t.orderBy,headLabel:je,rowCount:s.length,numSelected:t.selected.length,onSort:t.onSort,onSelectAllRows:o=>t.onSelectAllRows(o,s.map(l=>l.id))}),e.jsxs(fe,{children:[a.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(o=>e.jsx(ge,{row:o,selected:t.selected.includes(o.id),onSelectRow:()=>t.onSelectRow(o.id),onViewRow:()=>H(o.id),onEditRow:()=>_(o.id),onDeleteRow:()=>N(o.id)},o.id)),e.jsx(de,{height:j,emptyRows:le(t.page,t.rowsPerPage,s.length)}),e.jsx(me,{notFound:E})]})]})})]}),e.jsx(pe,{count:a.length,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})]}),e.jsx(ae,{open:m.value,onClose:m.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:e.jsx(I,{variant:"contained",color:"error",onClick:()=>{V(),m.onFalse()},children:"Delete"})})]})}function we({inputData:n,comparator:D,filters:p,dateError:t}){const{name:m,status:s,service:u,startDate:r,endDate:h}=p,g=n.map((a,i)=>[a,i]);return g.sort((a,i)=>{const j=D(a[0],i[0]);return j!==0?j:a[1]-i[1]}),n=g.map(a=>a[0]),m&&(n=n.filter(a=>a.invoiceNumber.toLowerCase().indexOf(m.toLowerCase())!==-1||a.invoiceTo.name.toLowerCase().indexOf(m.toLowerCase())!==-1)),s!=="all"&&(n=n.filter(a=>a.status===s)),u.length&&(n=n.filter(a=>a.items.some(i=>u.includes(i.service)))),t||r&&h&&(n=n.filter(a=>T(a.createDate)>=T(r)&&T(a.createDate)<=T(h))),n}function gt(){return e.jsxs(e.Fragment,{children:[e.jsx(oe,{children:e.jsx("title",{children:" Dashboard: Invoice List"})}),e.jsx(ve,{})]})}export{gt as default};
