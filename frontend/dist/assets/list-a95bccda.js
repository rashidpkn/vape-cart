import{j as t,as as D,at as E,S as F,H as l,aS as B,ar as A,aT as I,b as P,ao as g,B as O,aH as v,a as j,aL as H,ap as C,ah as U,aU as V,aV as z,aM as N,aN as W,ai as _,aj as q,ak as G,al as M,aW as K,W as Q}from"./index-21edd88a.js";import"./form-provider-9001e4da.js";import{c as $,d as J}from"./product-details-description-9329322f.js";import{S as u,u as X,f as Y,e as Z}from"./lightbox-c0b58d1a.js";import{u as ee,g as te}from"./use-table-e7e4e2a8.js";import{C as se}from"./confirm-dialog-00d2cddf.js";import{T as oe}from"./TableContainer-0c195fca.js";import"./file-thumbnail-5b8a8a41.js";import"./fade-295cf198.js";import"./transition-bee6630b.js";import"./image-32b161e7.js";import"./Radio-32600fa3.js";import"./Rating-db93a10c.js";import"./yup-906c867e.js";import"./CircularProgress-f61ad8b5.js";import"./DialogTitle-5edd1807.js";import"./DialogContent-bd9cee11.js";import"./index-3cead640.js";import"./use-carousel-6db4372c.js";function ae({...o}){return t.jsx(D,{...o,children:t.jsx(E,{colSpan:12,children:t.jsxs(F,{spacing:3,direction:"row",alignItems:"center",children:[t.jsx(u,{sx:{borderRadius:1.5,width:48,height:48,flexShrink:0}}),t.jsx(u,{sx:{width:1,height:12}}),t.jsx(u,{sx:{width:180,height:12}}),t.jsx(u,{sx:{width:160,height:12}}),t.jsx(u,{sx:{width:140,height:12}}),t.jsx(u,{sx:{width:120,height:12}})]})})})}function re(){const o=Z.product.list,{data:e,isLoading:a,error:i,isValidating:d}=X(o,Y);return l.useMemo(()=>({products:(e==null?void 0:e.products)||[],productsLoading:a,productsError:i,productsValidating:d,productsEmpty:!a&&!(e!=null&&e.products.length)}),[e==null?void 0:e.products,i,a,d])}const ne=[{id:"name",label:"Product"},{id:"createdAt",label:"Create at",width:160},{id:"Product Type",label:"Product Type",width:160},{id:"inventoryType",label:"Stock",width:160},{id:"price",label:"Price",width:140},{id:"sales Price",label:"Sales Price",width:140},{id:"status",label:"Status",width:110},{id:"quickEdit",label:"Quick Edit",width:110},{id:"",width:88}],le=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],ie={name:"",stock:""};function de(){const o=B(),e=ee(),[a,i]=l.useState([]),[d,h]=l.useState(ie),{productsLoading:r}=re(),[c,m]=l.useState([]),{user:{id:S}}=A(),f=async()=>{try{const{data:{products:s}}=await P.get("products",{params:{userId:S,perPage:5e3,productGroup:"parent"}});m(s)}catch(s){console.log("Error : "+s)}};l.useEffect(()=>{f()},[]);const x=I();l.useEffect(()=>{c.length&&i(c)},[c]);const p=ce({inputData:a,comparator:te(e.order,e.orderBy),filters:d}),w=p.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),R=e.dense?60:80,T=l.useCallback((s,n)=>{e.onResetPage(),h(b=>({...b,[s]:n}))},[e]),y=l.useCallback(async s=>{try{await P.delete(`products/${s}`);const n=a.filter(b=>b.id!==s);i(n),e.onUpdatePageDeleteRow(w.length)}catch(n){alert(n.response.data.message)}},[w.length,e,a]),k=l.useCallback(async()=>{try{await P.delete("products",{data:{ids:e.selected}});const s=a.filter(n=>!e.selected.includes(n.id));i(s),e.onUpdatePageDeleteRows({totalRows:a.length,totalRowsInPage:w.length,totalRowsFiltered:p.length})}catch(s){alert(s.response.data.message)}},[p.length,w.length,e,a]),L=l.useCallback(s=>{o.push(g.dashboard.product.edit(s))},[o]);return l.useCallback(s=>{o.push(g.product.details(s))},[o]),t.jsxs(t.Fragment,{children:[t.jsxs(O,{px:5,children:[t.jsx(v,{heading:"Products",links:[{name:"Dashboard",href:g.dashboard.root},{name:"Products",href:g.dashboard.product.root}],action:t.jsx(j,{component:H,href:g.dashboard.product.new,variant:"contained",startIcon:t.jsx(C,{icon:"mingcute:add-line"}),children:"New Product"}),sx:{mb:{xs:3,md:5}}}),t.jsxs(U,{children:[t.jsx($,{filters:d,onFilters:T,stockOptions:V,publishOptions:le}),t.jsxs(oe,{sx:{position:"relative",overflow:"unset"},children:[t.jsx(z,{dense:e.dense,numSelected:e.selected.length,rowCount:a.length,onSelectAllRows:s=>e.onSelectAllRows(s,a.map(n=>n.id)),action:t.jsx(N,{title:"Delete",children:t.jsx(W,{color:"primary",onClick:x.onTrue,children:t.jsx(C,{icon:"solar:trash-bin-trash-bold"})})})}),t.jsx(_,{children:t.jsxs(q,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[t.jsx(G,{order:e.order,orderBy:e.orderBy,headLabel:ne,rowCount:a.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:s=>e.onSelectAllRows(s,a.map(n=>n.id))}),t.jsx(M,{children:r?[...Array(e.rowsPerPage)].map((s,n)=>t.jsx(ae,{sx:{height:R}},n)):t.jsx(t.Fragment,{children:p.map(s=>t.jsx(J,{row:s,selected:e.selected.includes(s.id),onSelectRow:()=>e.onSelectRow(s.id),onDeleteRow:()=>y(s.id),onEditRow:()=>L(s.id),fetchProduct:f},s.id))})})]})})]}),t.jsx(K,{count:p.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),t.jsx(se,{open:x.value,onClose:x.onFalse,title:"Delete",content:t.jsxs(t.Fragment,{children:["Are you sure want to delete ",t.jsxs("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:t.jsx(j,{variant:"contained",color:"error",onClick:()=>{k(),x.onFalse()},children:"Delete"})})]})}function ce({inputData:o,comparator:e,filters:a}){const{name:i,stock:d}=a,h=o.map((r,c)=>[r,c]);return h.sort((r,c)=>{const m=e(r[0],c[0]);return m!==0?m:r[1]-c[1]}),o=h.map(r=>r[0]),i&&(o=o.filter(r=>r.name.toLowerCase().indexOf(i.toLowerCase())!==-1)),d.length&&(o=o.filter(r=>d[0]==="in stock"?!!r.quantity:!r.quantity)),o}function Ee(){return t.jsxs(t.Fragment,{children:[t.jsx(Q,{children:t.jsx("title",{children:" Dashboard: Product List"})}),t.jsx(de,{})]})}export{Ee as default};
