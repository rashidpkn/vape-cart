import{a8 as e,a9 as O,be as v,ax as H,D as n,bd as U,aP as _,b5 as N,ag as x,aj as V,ae as S,af as W,ah as T,bx as z,aF as q,b8 as G,aH as K}from"./index-453cc783.js";import{C as $}from"./custom-breadcrumbs-dbab9ca9.js";import{b as P,k as J,l as M,m as Q}from"./product-details-description-364503ec.js";import"./axios-ea0e24d9.js";import{T as X,b as Y,a as Z,c as ee}from"./table-pagination-custom-2c2b86d1.js";import{g as te}from"./_product-ce672968.js";import{u as oe}from"./product-b9e1b12b.js";import{u as se,g as re}from"./use-table-163f7f65.js";import{T as ae}from"./TablePagination-1c084fea.js";import{S as u}from"./Skeleton-de70b7a1.js";import{C as ie}from"./confirm-dialog-52b7b3a3.js";import{C as ne}from"./Card-aaec36fe.js";import{T as le,a as de,b as ce}from"./TableContainer-1d290f46.js";import"./form-provider-83b8adf0.js";import"./upload-avatar-57b84f32.js";import"./format-number-e90d4c93.js";import"./fade-ba5404aa.js";import"./transition-71675215.js";import"./index-495290d4.js";import"./image-274e1d6f.js";import"./TextField-7b516541.js";import"./FormControl-a79bcab4.js";import"./FormLabel-323a2df2.js";import"./Select-49289e03.js";import"./Menu-0e5d8e5b.js";import"./Checkbox-18bce187.js";import"./SwitchBase-7bf04c5e.js";import"./Chip-7e926eb1.js";import"./FormControlLabel-a5a218e9.js";import"./FormGroup-c2adca5f.js";import"./Switch-941ae74d.js";import"./editor-c36fddba.js";import"./highlight-89fb3eb6.js";import"./Slider-91448d06.js";import"./visuallyHidden-14c3de6e.js";import"./RadioGroup-749ab791.js";import"./Radio-865ba77e.js";import"./Autocomplete-bc9572e8.js";import"./Close-9586c3d0.js";import"./yup-3f2f4f35.js";import"./CardHeader-3ef8434e.js";import"./LoadingButton-695d7fb2.js";import"./CircularProgress-4da26c61.js";import"./color-picker-7fef6a6f.js";import"./Fab-6e17361b.js";import"./Pagination-c3cee1e9.js";import"./Rating-75b3bf5a.js";import"./DialogTitle-eb758d07.js";import"./DialogContent-54fc26e0.js";import"./DialogActions-d98e60a6.js";import"./lightbox-2502c499.js";import"./carousel-arrow-index-1ae5e025.js";import"./use-carousel-eed5f8db.js";import"./markdown-4d07cfd9.js";import"./index-47f153bd.js";function he({...s}){return e.jsx(X,{...s,children:e.jsx(ae,{colSpan:12,children:e.jsxs(O,{spacing:3,direction:"row",alignItems:"center",children:[e.jsx(u,{sx:{borderRadius:1.5,width:48,height:48,flexShrink:0}}),e.jsx(u,{sx:{width:1,height:12}}),e.jsx(u,{sx:{width:180,height:12}}),e.jsx(u,{sx:{width:160,height:12}}),e.jsx(u,{sx:{width:140,height:12}}),e.jsx(u,{sx:{width:120,height:12}})]})})})}const me=[{id:"name",label:"Product"},{id:"createdAt",label:"Create at",width:160},{id:"inventoryType",label:"Stock",width:160},{id:"price",label:"Price",width:140},{id:"publish",label:"Publish",width:110},{id:"",width:88}],pe=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],j={name:"",publish:[],stock:[]};function ue(){const s=v(),t=se(),f=H(),[i,c]=n.useState([]),[l,g]=n.useState(j),{productsLoading:a,productsEmpty:h}=oe(),[m,y]=n.useState([]),{user:{id:k}}=U();n.useEffect(()=>{(async()=>{try{const{data:{products:r,count:p}}=await P.get("products",{params:{userId:k}});y(r)}catch{alert("error Occure")}})()},[]);const b=_();n.useEffect(()=>{m.length&&c(m)},[m]);const d=ge({inputData:i,comparator:re(t.order,t.orderBy),filters:l}),w=d.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage),F=t.dense?60:80,C=!N(j,l);d.length;const R=n.useCallback((o,r)=>{t.onResetPage(),g(p=>({...p,[o]:r}))},[t]),D=n.useCallback(async o=>{try{const r=await P.delete(`product/${o}`),p=i.filter(I=>I.id!==o);c(p),t.onUpdatePageDeleteRow(w.length)}catch(r){alert(r.response.data.message)}},[w.length,t,i]),L=n.useCallback(async()=>{try{const o=await P.delete("products",{data:{ids:t.selected}}),r=i.filter(p=>!t.selected.includes(p.id));c(r),t.onUpdatePageDeleteRows({totalRows:i.length,totalRowsInPage:w.length,totalRowsFiltered:d.length})}catch(o){alert(o.response.data.message)}},[d.length,w.length,t,i]),A=n.useCallback(o=>{s.push(x.dashboard.product.edit(o))},[s]),B=n.useCallback(o=>{s.push(x.dashboard.product.details(o))},[s]),E=n.useCallback(()=>{g(j)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(V,{maxWidth:f.themeStretch?!1:"lg",children:[e.jsx($,{heading:"List",links:[{name:"Dashboard",href:x.dashboard.root},{name:"Product",href:x.dashboard.product.root},{name:"List"}],action:e.jsx(S,{component:W,href:x.dashboard.product.new,variant:"contained",startIcon:e.jsx(T,{icon:"mingcute:add-line"}),children:"New Product"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(ne,{children:[e.jsx(J,{filters:l,onFilters:R,stockOptions:te,publishOptions:pe}),C&&e.jsx(M,{filters:l,onFilters:R,onResetFilters:E,results:d.length,sx:{p:2.5,pt:0}}),e.jsxs(le,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(Y,{dense:t.dense,numSelected:t.selected.length,rowCount:i.length,onSelectAllRows:o=>t.onSelectAllRows(o,i.map(r=>r.id)),action:e.jsx(z,{title:"Delete",children:e.jsx(q,{color:"primary",onClick:b.onTrue,children:e.jsx(T,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(G,{children:e.jsxs(de,{size:t.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(Z,{order:t.order,orderBy:t.orderBy,headLabel:me,rowCount:i.length,numSelected:t.selected.length,onSort:t.onSort,onSelectAllRows:o=>t.onSelectAllRows(o,i.map(r=>r.id))}),e.jsx(ce,{children:a?[...Array(t.rowsPerPage)].map((o,r)=>e.jsx(he,{sx:{height:F}},r)):e.jsx(e.Fragment,{children:d.map(o=>e.jsx(Q,{row:o,selected:t.selected.includes(o.id),onSelectRow:()=>t.onSelectRow(o.id),onDeleteRow:()=>D(o.id),onEditRow:()=>A(o.id),onViewRow:()=>B(o.id)},o.id))})})]})})]}),e.jsx(ee,{count:d.length,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})]}),e.jsx(ie,{open:b.value,onClose:b.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:e.jsx(S,{variant:"contained",color:"error",onClick:()=>{L(),b.onFalse()},children:"Delete"})})]})}function ge({inputData:s,comparator:t,filters:f}){const{name:i,stock:c,publish:l}=f,g=s.map((a,h)=>[a,h]);return g.sort((a,h)=>{const m=t(a[0],h[0]);return m!==0?m:a[1]-h[1]}),s=g.map(a=>a[0]),i&&(s=s.filter(a=>a.name.toLowerCase().indexOf(i.toLowerCase())!==-1)),c.length&&(s=s.filter(a=>c.includes(a.inventoryType))),l.length&&(s=s.filter(a=>l.includes(a.publish))),s}function bt(){return e.jsxs(e.Fragment,{children:[e.jsx(K,{children:e.jsx("title",{children:" Dashboard: Product List"})}),e.jsx(ue,{})]})}export{bt as default};
