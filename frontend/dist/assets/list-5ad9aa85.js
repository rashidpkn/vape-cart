import{a4 as T,r as l,u as S,t as y,d as b,p as m,j as t,c as k,B as w,a7 as D,w as x,ak as F,a9 as B,S as A,W as E}from"./index-bc388b4b.js";import{C as I}from"./custom-breadcrumbs-0742cdec.js";import"./form-provider-23831877.js";import{c as L,d as O}from"./product-details-description-8008e95c.js";import{P as v}from"./_product-cb82ad69.js";import{u as U,g as _}from"./use-table-103e1fa1.js";import{b as q,T as H,c as N}from"./table-pagination-custom-d5281114.js";import{C as z}from"./confirm-dialog-51832c94.js";import{C as W}from"./Card-6273d280.js";import{T as $}from"./TableContainer-f19f82b4.js";import{T as K,a as Q}from"./TableBody-782e6f5f.js";import"./format-number-3932d3e4.js";import"./file-thumbnail-57a9fae4.js";import"./fade-295cf198.js";import"./transition-bee6630b.js";import"./image-8ef73bea.js";import"./Checkbox-09455ac3.js";import"./TableRow-c8f22017.js";import"./use-carousel-2d6fa5aa.js";import"./yup-772954a9.js";import"./DialogTitle-b09f6b86.js";import"./DialogContent-3d9c6eea.js";import"./lightbox-7b0ab4a1.js";import"./index-62b1fa04.js";import"./KeyboardArrowRight-6d5a049c.js";import"./LastPage-5b4e3e9d.js";const V=[{id:"name",label:"Product"},{id:"createdAt",label:"Create at",width:160},{id:"Product Type",label:"Product Type",width:160},{id:"inventoryType",label:"Stock",width:160},{id:"price",label:"Price",width:140},{id:"sales Price",label:"Sales Price",width:140},{id:"status",label:"Status",width:110},{id:"quickEdit",label:"Quick Edit",width:110},{id:"",width:88}],G=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],J={name:"",stock:""};function M(){const a=T(),e=U(),[r,c]=l.useState([]),[u,p]=l.useState(J),{user:{id:s}}=S(),i=async()=>{try{const{data:{products:o}}=await b.get("products",{params:{userId:s,perPage:5e3}});o!=null&&o.length&&c(o)}catch(o){console.log(`Error : ${o}`)}};l.useEffect(()=>{i()},[]);const d=y(),h=X({inputData:r,comparator:_(e.order,e.orderBy),filters:u}),g=h.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage);e.dense;const f=l.useCallback((o,n)=>{e.onResetPage(),p(P=>({...P,[o]:n}))},[e]),C=l.useCallback(async o=>{try{await b.delete(`products/${o}`);const n=r.filter(P=>P.id!==o);c(n),e.onUpdatePageDeleteRow(g.length)}catch(n){alert(n.response.data.message)}},[g.length,e,r]),j=l.useCallback(async()=>{try{await b.delete("products",{data:{ids:e.selected}});const o=r.filter(n=>!e.selected.includes(n.id));c(o),e.onUpdatePageDeleteRows({totalRows:r.length,totalRowsInPage:g.length,totalRowsFiltered:h.length})}catch(o){alert(o.response.data.message)}},[h.length,g.length,e,r]),R=l.useCallback(o=>{a.push(m.dashboard.product.edit(o))},[a]);return l.useCallback(o=>{a.push(m.product.details(o))},[a]),t.jsxs(t.Fragment,{children:[t.jsxs(k,{px:5,children:[t.jsx(I,{heading:"Products",links:[{name:"Dashboard",href:m.dashboard.root},{name:"Products",href:m.dashboard.product.root}],action:t.jsx(w,{component:D,href:m.dashboard.product.new,variant:"contained",startIcon:t.jsx(x,{icon:"mingcute:add-line"}),children:"New Product"}),sx:{mb:{xs:3,md:5}}}),t.jsxs(W,{children:[t.jsx(L,{filters:u,onFilters:f,stockOptions:v,publishOptions:G}),t.jsxs($,{sx:{position:"relative",overflow:"unset"},children:[t.jsx(q,{dense:e.dense,numSelected:e.selected.length,rowCount:r.length,onSelectAllRows:o=>e.onSelectAllRows(o,r.map(n=>n.id)),action:t.jsx(F,{title:"Delete",children:t.jsx(B,{color:"primary",onClick:d.onTrue,children:t.jsx(x,{icon:"solar:trash-bin-trash-bold"})})})}),t.jsx(A,{children:t.jsxs(K,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[t.jsx(H,{order:e.order,orderBy:e.orderBy,headLabel:V,rowCount:r.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:o=>e.onSelectAllRows(o,r.map(n=>n.id))}),t.jsx(Q,{children:t.jsx(t.Fragment,{children:h.map(o=>t.jsx(O,{row:o,selected:e.selected.includes(o.id),onSelectRow:()=>e.onSelectRow(o.id),onDeleteRow:()=>C(o.id),onEditRow:()=>R(o.id),fetchProduct:i},o.id))})})]})})]}),t.jsx(N,{count:h.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),t.jsx(z,{open:d.value,onClose:d.onFalse,title:"Delete",content:t.jsxs(t.Fragment,{children:["Are you sure want to delete ",t.jsxs("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:t.jsx(w,{variant:"contained",color:"error",onClick:()=>{j(),d.onFalse()},children:"Delete"})})]})}function X({inputData:a,comparator:e,filters:r}){const{name:c,stock:u}=r,p=a.map((s,i)=>[s,i]);return p.sort((s,i)=>{const d=e(s[0],i[0]);return d!==0?d:s[1]-i[1]}),a=p.map(s=>s[0]),c&&(a=a.filter(s=>s.name.toLowerCase().indexOf(c.toLowerCase())!==-1)),u.length&&(a=a.filter(s=>u[0]==="in stock"?!!s.quantity:!s.quantity)),a}function Te(){return t.jsxs(t.Fragment,{children:[t.jsx(E,{children:t.jsx("title",{children:" Dashboard: Product List"})}),t.jsx(M,{})]})}export{Te as default};
