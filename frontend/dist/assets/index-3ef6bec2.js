import{r as h,u as m,j as e,C as k,B as T,g as f,D as y,b as C,c as v,G as c,T as x,L as w,W as S,d as j}from"./index-943241d7.js";import{T as D,a as U,b as g,c as n,d as _}from"./TableRow-66d31f30.js";import{C as R}from"./Checkbox-006d5576.js";import{A as b}from"./Alert-3e12d11a.js";function W(){const[u,o]=h.useState([{enable:!1,day:"Mon",open:"",close:"",lastCall:""},{enable:!1,day:"Tue",open:"",close:"",lastCall:""},{enable:!1,day:"Wen",open:"",close:"",lastCall:""},{enable:!1,day:"Thu",open:"",close:"",lastCall:""},{enable:!1,day:"Fri",open:"",close:"",lastCall:""},{enable:!1,day:"Sat",open:"",close:"",lastCall:""},{enable:!1,day:"Sun",open:"",close:"",lastCall:""}]),{user:t,initialize:r}=m();h.useEffect(()=>{t.deliverySettings&&o(t.deliverySettings)},[t]);const p=async()=>{const s=f(y,"users",t.uid);await C(s,{deliverySettings:u}),alert("Updated"),r()};return e.jsx(k,{children:e.jsxs(D,{sx:{overflow:"scroll"},children:[e.jsx(U,{children:e.jsxs(g,{children:[e.jsx(n,{}),e.jsx(n,{children:"Days"}),e.jsx(n,{children:"Open Time"}),e.jsx(n,{children:"Close Time"}),e.jsx(n,{children:"Last Call"})]})}),e.jsxs(_,{children:[u.map((s,a)=>e.jsx(B,{row:s,setDeliverySettings:o},a)),e.jsxs(g,{children:[e.jsx(n,{colSpan:4,align:"right"}),e.jsx(n,{align:"center",children:e.jsx(T,{variant:"contained",color:"success",onClick:()=>p(),children:"Submit"})})]})]})]})})}const B=({row:u,setDeliverySettings:o})=>{const{day:t,open:r,close:p,lastCall:s,enable:a}=u;return e.jsxs(g,{children:[e.jsx(n,{children:e.jsx(R,{checked:a,onChange:i=>o(d=>d.map(l=>l.day===t?{...l,enable:i.target.checked,open:"",close:"",lastCall:""}:l))})}),e.jsx(n,{children:t}),e.jsx(n,{children:e.jsx("input",{disabled:!a,sx:{width:"200px"},type:"time",style:{width:"150px",height:"40px",borderRadius:"4px",background:"none",outline:"none",border:"1px solid black",padding:"0 10px"},placeholder:"Open Time",value:r,onChange:i=>o(d=>d.map(l=>l.day===t?{...l,open:i.target.value}:l))})}),e.jsx(n,{children:e.jsx("input",{disabled:!a,sx:{width:"200px"},type:"time",style:{width:"150px",height:"40px",borderRadius:"4px",background:"none",outline:"none",border:"1px solid black",padding:"0 10px"},placeholder:"Close Time",value:p,onChange:i=>o(d=>d.map(l=>l.day===t?{...l,close:i.target.value}:l))})}),e.jsx(n,{children:e.jsx("input",{disabled:!a,sx:{width:"200px"},type:"time",style:{width:"150px",height:"40px",borderRadius:"4px",background:"none",outline:"none",border:"1px solid black",padding:"0 10px"},placeholder:"Last Call",value:s,onChange:i=>o(d=>d.map(l=>l.day===t?{...l,lastCall:i.target.value}:l))})})]},t)};function P(){const{user:u,initialize:o}=m(),[t,r]=h.useState({data:{location_no:"",street_name:"",area:"",city:"",description:"",contact:""},loading:"",error:"",message:""});h.useEffect(()=>{u.pick_up_details&&r(s=>({...s,data:u.pick_up_details}))},[]);const p=async s=>{s.preventDefault();try{r(d=>({...d,loading:!0,message:"",error:""}));const a=f(y,"users",u.uid);let i=t.data;await C(a,{pick_up_details:i}),r(d=>({...d,loading:!1,message:"Successfully updated",error:""})),o()}catch(a){console.log(a),r(i=>({...i,loading:!1,message:"",error:"Apologies, an error has occurred. Please review all the fields you've entered."}))}};return e.jsx(v,{mb:6,children:e.jsxs(c,{component:"form",container:!0,spacing:5,onSubmit:p,children:[e.jsx(c,{item:!0,xs:6,children:e.jsx(x,{required:!0,label:"Pick Up loaction No",fullWidth:!0,onChange:s=>r(a=>({...a,data:{...a.data,location_no:s.target.value}})),value:t.data.location_no})}),e.jsx(c,{item:!0,xs:6,children:e.jsx(x,{required:!0,label:"Street Name",fullWidth:!0,onChange:s=>r(a=>({...a,data:{...a.data,street_name:s.target.value}})),value:t.data.street_name})}),e.jsx(c,{item:!0,xs:6,children:e.jsx(x,{required:!0,label:"Area",fullWidth:!0,onChange:s=>r(a=>({...a,data:{...a.data,area:s.target.value}})),value:t.data.area})}),e.jsx(c,{item:!0,xs:6,children:e.jsx(x,{required:!0,label:"City",fullWidth:!0,onChange:s=>r(a=>({...a,data:{...a.data,city:s.target.value}})),value:t.data.city})}),e.jsx(c,{item:!0,xs:6,children:e.jsx(x,{required:!0,label:"Description",fullWidth:!0,onChange:s=>r(a=>({...a,data:{...a.data,description:s.target.value}})),value:t.data.description})}),e.jsx(c,{item:!0,xs:6,children:e.jsx(x,{required:!0,label:"Pick Up Contact",fullWidth:!0,onChange:s=>r(a=>({...a,data:{...a.data,contact:s.target.value}})),value:t.data.contact})}),e.jsxs(c,{item:!0,xs:6,children:[!!t.message&&e.jsx(b,{severity:"success",children:t.message}),!!t.error&&e.jsx(b,{severity:"error",children:t.error})]}),e.jsx(c,{item:!0,xs:6,children:e.jsx(w,{loading:t.loading,loadingIndicator:"Updatingâ€¦",color:"success",variant:"contained",type:"submit",children:"Update"})})]})})}function F(){return e.jsxs(e.Fragment,{children:[e.jsx(S,{children:e.jsx("title",{children:" Dashboard: Pick Up Details"})}),e.jsxs(v,{px:5,children:[e.jsx(j,{heading:"Pick Up Details",links:[{}],sx:{mb:{xs:3,md:5}}}),e.jsx(P,{}),e.jsx(j,{heading:"Pick Up Timing",links:[{}],sx:{mb:{xs:3,md:5}}}),e.jsx(W,{})]})]})}export{F as default};
