import{a6 as N,ax as _,be as H,aP as V,D as c,b$ as W,ag as g,a8 as e,aj as z,ae as S,af as U,ah as x,b8 as y,a9 as I,av as $,at as q,ao as G,au as J,aE as K,c0 as M,bx as w,aF as C,b_ as P,aH as Q}from"./index-453cc783.js";import{C as X}from"./confirm-dialog-52b7b3a3.js";import{C as Y}from"./custom-breadcrumbs-dbab9ca9.js";import{u as Z,g as ee,e as te}from"./use-table-163f7f65.js";import{b as oe,a as ae,d as se,e as re,c as le}from"./table-pagination-custom-2c2b86d1.js";import{I as b,a as ne,b as ie}from"./invoice-details-b791ac71.js";import{C as F}from"./Card-aaec36fe.js";import{T as ce,a as de,b as me}from"./TableContainer-1d290f46.js";import"./DialogTitle-eb758d07.js";import"./DialogContent-54fc26e0.js";import"./DialogActions-d98e60a6.js";import"./TablePagination-1c084fea.js";import"./Select-49289e03.js";import"./Menu-0e5d8e5b.js";import"./Checkbox-18bce187.js";import"./SwitchBase-7bf04c5e.js";import"./FormControlLabel-a5a218e9.js";import"./Switch-941ae74d.js";import"./format-number-e90d4c93.js";import"./CircularProgress-4da26c61.js";import"./FormControl-a79bcab4.js";import"./TextField-7b516541.js";import"./FormLabel-323a2df2.js";import"./DatePicker-2e4efafc.js";import"./ListItem-9c8de21e.js";import"./ListItemSecondaryAction-691bc6ad.js";import"./Chip-7e926eb1.js";import"./custom-date-range-picker-2fff2203.js";import"./form-provider-83b8adf0.js";import"./upload-avatar-57b84f32.js";import"./fade-ba5404aa.js";import"./transition-71675215.js";import"./index-495290d4.js";import"./image-274e1d6f.js";import"./FormGroup-c2adca5f.js";import"./editor-c36fddba.js";import"./highlight-89fb3eb6.js";import"./Slider-91448d06.js";import"./visuallyHidden-14c3de6e.js";import"./RadioGroup-749ab791.js";import"./Radio-865ba77e.js";import"./Autocomplete-bc9572e8.js";import"./Close-9586c3d0.js";import"./yup-3f2f4f35.js";import"./address-list-dialog-90c200ed.js";import"./LoadingButton-695d7fb2.js";const pe=[{id:"invoiceNumber",label:"Customer"},{id:"createDate",label:"Create"},{id:"dueDate",label:"Due"},{id:"price",label:"Amount"},{id:"sent",label:"Sent",align:"center"},{id:"status",label:"Status"},{id:""}],L={name:"",service:[],status:"all",startDate:null,endDate:null};function ue(){const s=N(),T=_(),m=H(),t=Z({defaultOrderBy:"createDate"}),d=V(),[l,p]=c.useState(W),[r,u]=c.useState(L),h=r.startDate&&r.endDate?r.startDate.getTime()>r.endDate.getTime():!1,a=he({inputData:l,comparator:ee(t.order,t.orderBy),filters:r,dateError:h}),i=a.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage),f=t.dense?56:76,R=!!r.name||!!r.service.length||r.status!=="all"||!!r.startDate&&!!r.endDate,k=!a.length&&R||!a.length,j=o=>l.filter(n=>n.status===o).length,A=[{value:"all",label:"All",color:"default",count:l.length},{value:"paid",label:"Paid",color:"success",count:j("paid")},{value:"pending",label:"Pending",color:"warning",count:j("pending")},{value:"overdue",label:"Overdue",color:"error",count:j("overdue")},{value:"draft",label:"Draft",color:"default",count:j("draft")}],v=c.useCallback((o,n)=>{t.onResetPage(),u(D=>({...D,[o]:n}))},[t]);c.useCallback(o=>{const n=l.filter(D=>D.id!==o);p(n),t.onUpdatePageDeleteRow(i.length)},[i.length,t,l]);const B=c.useCallback(()=>{const o=l.filter(n=>!t.selected.includes(n.id));p(o),t.onUpdatePageDeleteRows({totalRows:l.length,totalRowsInPage:i.length,totalRowsFiltered:a.length})},[a.length,i.length,t,l]);c.useCallback(o=>{m.push(g.dashboard.invoice.edit(o))},[m]),c.useCallback(o=>{m.push(g.dashboard.invoice.details(o))},[m]);const E=c.useCallback((o,n)=>{v("status",n)},[v]),O=c.useCallback(()=>{u(L)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(z,{maxWidth:T.themeStretch?!1:"lg",children:[e.jsx(Y,{heading:"List",links:[{name:"Dashboard",href:g.dashboard.root},{name:"Invoice",href:g.dashboard.invoice.root},{name:"List"}],action:e.jsx(S,{component:U,href:g.dashboard.invoice.new,variant:"contained",startIcon:e.jsx(x,{icon:"mingcute:add-line"}),children:"New Invoice"}),sx:{mb:{xs:3,md:5}}}),e.jsx(F,{sx:{mb:{xs:3,md:5}},children:e.jsx(y,{children:e.jsxs(I,{direction:"row",divider:e.jsx($,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[e.jsx(b,{title:"Total",total:0,percent:0,price:0,icon:"solar:bill-list-bold-duotone",color:s.palette.info.main}),e.jsx(b,{title:"Paid",total:0,percent:0,price:0,icon:"solar:file-check-bold-duotone",color:s.palette.success.main}),e.jsx(b,{title:"Pending",total:0,percent:0,price:0,icon:"solar:sort-by-time-bold-duotone",color:s.palette.warning.main}),e.jsx(b,{title:"Overdue",total:0,percent:0,price:0,icon:"solar:bell-bing-bold-duotone",color:s.palette.error.main}),e.jsx(b,{title:"Draft",total:0,percent:0,price:0,icon:"solar:file-corrupted-bold-duotone",color:s.palette.text.secondary})]})})}),e.jsxs(F,{children:[e.jsx(q,{value:r.status,onChange:E,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${G(s.palette.grey[500],.08)}`},children:A.map(o=>e.jsx(J,{value:o.value,label:o.label,iconPosition:"end",icon:e.jsx(K,{variant:(o.value==="all"||o.value===r.status)&&"filled"||"soft",color:o.color,children:o.count})},o.value))}),e.jsx(ne,{filters:r,onFilters:v,dateError:h,serviceOptions:M.map(o=>o.name)}),R&&e.jsx(ie,{filters:r,onFilters:v,onResetFilters:O,results:a.length,sx:{p:2.5,pt:0}}),e.jsxs(ce,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(oe,{dense:t.dense,numSelected:t.selected.length,rowCount:l.length,onSelectAllRows:o=>t.onSelectAllRows(o,l.map(n=>n.id)),action:e.jsxs(I,{direction:"row",children:[e.jsx(w,{title:"Sent",children:e.jsx(C,{color:"primary",children:e.jsx(x,{icon:"iconamoon:send-fill"})})}),e.jsx(w,{title:"Download",children:e.jsx(C,{color:"primary",children:e.jsx(x,{icon:"eva:download-outline"})})}),e.jsx(w,{title:"Print",children:e.jsx(C,{color:"primary",children:e.jsx(x,{icon:"solar:printer-minimalistic-bold"})})}),e.jsx(w,{title:"Delete",children:e.jsx(C,{color:"primary",onClick:d.onTrue,children:e.jsx(x,{icon:"solar:trash-bin-trash-bold"})})})]})}),e.jsx(y,{children:e.jsxs(de,{size:t.dense?"small":"medium",sx:{minWidth:800},children:[e.jsx(ae,{order:t.order,orderBy:t.orderBy,headLabel:pe,rowCount:l.length,numSelected:t.selected.length,onSort:t.onSort,onSelectAllRows:o=>t.onSelectAllRows(o,l.map(n=>n.id))}),e.jsxs(me,{children:[e.jsx(se,{height:f,emptyRows:te(t.page,t.rowsPerPage,l.length)}),e.jsx(re,{notFound:k})]})]})})]}),e.jsx(le,{count:a.length,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})]}),e.jsx(X,{open:d.value,onClose:d.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:e.jsx(S,{variant:"contained",color:"error",onClick:()=>{B(),d.onFalse()},children:"Delete"})})]})}function he({inputData:s,comparator:T,filters:m,dateError:t}){const{name:d,status:l,service:p,startDate:r,endDate:u}=m,h=s.map((a,i)=>[a,i]);return h.sort((a,i)=>{const f=T(a[0],i[0]);return f!==0?f:a[1]-i[1]}),s=h.map(a=>a[0]),d&&(s=s.filter(a=>a.invoiceNumber.toLowerCase().indexOf(d.toLowerCase())!==-1||a.invoiceTo.name.toLowerCase().indexOf(d.toLowerCase())!==-1)),l!=="all"&&(s=s.filter(a=>a.status===l)),p.length&&(s=s.filter(a=>a.items.some(i=>p.includes(i.service)))),t||r&&u&&(s=s.filter(a=>P(a.createDate)>=P(r)&&P(a.createDate)<=P(u))),s}function nt(){return e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx("title",{children:" Dashboard: Invoice List"})}),e.jsx(ue,{})]})}export{nt as default};
