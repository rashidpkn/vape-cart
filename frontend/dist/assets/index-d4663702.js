import{l as x,a as j,m as g,r as c,k as p,j as s,W as P,I as N,n,B as v,p as y}from"./index-e20cc903.js";function k(){const{onAddCart:r}=x(),i=j(),{name:a}=g(),[t,l]=c.useState([]),[o,d]=c.useState(!1),h=c.useCallback(async()=>{try{const{data:e}=await p.get("/products",{params:{name:a,perPage:2e3,status:"Published"}});l(e.products),d(!0)}catch{}},[a]),m=async e=>{console.log(e);try{r({id:e.id,name:e.name,price:e.salePrice||e.regularPrice,images:e.images,subTotal:e.salePrice,userId:e.userId,quantity:1}),i(y.product.checkout)}catch(u){console.log(u)}};return c.useEffect(()=>{h()},[a]),s.jsxs(s.Fragment,{children:[s.jsx(P,{children:s.jsxs("title",{children:[a," | Search Result"]})}),s.jsxs("main",{className:"search",children:[s.jsx("h1",{children:"Shop"}),!!t.length&&s.jsx("div",{className:"products",children:t.map(e=>s.jsxs("div",{className:"product",children:[s.jsxs("div",{className:"img",children:[s.jsx("img",{src:e.images[0],alt:""}),s.jsx("div",{className:"cart",onClick:()=>{m(e)},children:s.jsx(N,{icon:"eva:shopping-cart-outline",className:"cart-icon"})})]}),s.jsx(n,{to:`/product/${e.id}`,children:s.jsx("p",{className:"name",children:e.name})}),s.jsxs("div",{className:"info",children:[s.jsx("p",{className:"category",children:e.category}),s.jsxs("p",{children:[s.jsxs("del",{children:[" AED $",e.regularPrice]})," AED $",e.salePrice]})]})]},e.id))}),!t.length&&o&&s.jsxs("div",{className:"no-product",children:[s.jsxs("h2",{children:["Unfortunately, we couldn't find any products with ",a," name."]}),s.jsx(n,{to:"/",children:s.jsx(v,{variant:"contained",color:"success",children:"Home Page"})})]})]})]})}export{k as default};
