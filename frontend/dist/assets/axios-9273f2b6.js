import{E as Z,D as g,d9 as ut}from"./index-2747ce95.js";import{a as lt}from"./axios-4a70c6fc.js";const R=new WeakMap,F={},y={},T=()=>{},_=T(),U=Object,E=t=>t===_,O=t=>typeof t=="function",b=(t,e)=>({...t,...e}),j="undefined",N=typeof window!=j,M=typeof document!=j,ft=()=>N&&typeof window.requestAnimationFrame!=j,dt=(t,e)=>{const n=R.get(t);return[()=>!E(e)&&t.get(e)||F,s=>{if(!E(e)){const o=t.get(e);e in y||(y[e]=o),n[5](e,b(o,s),o||F)}},n[6],()=>!E(e)&&e in y?y[e]:!E(e)&&t.get(e)||F]},I=new WeakMap;let Et=0;const v=t=>{const e=typeof t,n=t&&t.constructor,s=n==Date;let o,i;if(U(t)===t&&!s&&n!=RegExp){if(o=I.get(t),o)return o;if(o=++Et+"~",I.set(t,o),n==Array){for(o="@",i=0;i<t.length;i++)o+=v(t[i])+",";I.set(t,o)}if(n==U){o="#";const c=U.keys(t).sort();for(;!E(i=c.pop());)E(t[i])||(o+=i+":"+v(t[i])+",");I.set(t,o)}}else o=s?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o};let P=!0;const pt=()=>P,[H,q]=N&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[T,T],mt=()=>{const t=M&&document.visibilityState;return E(t)||t!=="hidden"},_t=t=>(M&&document.addEventListener("visibilitychange",t),H("focus",t),()=>{M&&document.removeEventListener("visibilitychange",t),q("focus",t)}),ht=t=>{const e=()=>{P=!0,t()},n=()=>{P=!1};return H("online",e),H("offline",n),()=>{q("online",e),q("offline",n)}},wt={isOnline:pt,isVisible:mt},Rt={initFocus:_t,initReconnect:ht},Mt=!Z.useId,$=!N||"Deno"in window,Pt=t=>ft()?window.requestAnimationFrame(t):setTimeout(t,1),Ht=$?g.useEffect:g.useLayoutEffect,W=typeof navigator<"u"&&navigator.connection,Y=!$&&W&&(["slow-2g","2g"].includes(W.effectiveType)||W.saveData),k=t=>{if(O(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?v(t):"",[t,e]};let Tt=0;const Q=()=>++Tt,tt=0,et=1,nt=2,Ot=3;var qt={__proto__:null,ERROR_REVALIDATE_EVENT:Ot,FOCUS_EVENT:tt,MUTATE_EVENT:nt,RECONNECT_EVENT:et};async function bt(...t){const[e,n,s,o]=t,i=b({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let c=i.populateCache;const a=i.rollbackOnError;let r=i.optimisticData;const C=i.revalidate!==!1,l=h=>typeof a=="function"?a(h):a!==!1,f=i.throwOnError;if(O(n)){const h=n,d=[],A=e.keys();for(let w=A.next();!w.done;w=A.next()){const S=w.value;!/^\$(inf|sub)\$/.test(S)&&h(e.get(S)._k)&&d.push(S)}return Promise.all(d.map(p))}return p(n);async function p(h){const[d]=k(h);if(!d)return;const[A,w]=dt(e,d),[S,L,ct]=R.get(e),V=S[d],B=()=>C&&(delete ct[d],V&&V[0])?V[0](nt).then(()=>A().data):A().data;if(t.length<3)return B();let u=s,m;const J=Q();L[d]=[J,0];const K=!E(r),z=A(),rt=z.data,G=z._c,D=E(G)?rt:G;if(K&&(r=O(r)?r(D):r,w({data:r,_c:D})),O(u))try{u=u(D)}catch(x){m=x}if(u&&O(u.then))if(u=await u.catch(x=>{m=x}),J!==L[d][0]){if(m)throw m;return u}else m&&K&&l(m)&&(c=!0,u=D,w({data:u,_c:_}));c&&(m||(O(c)&&(u=c(u,D)),w({data:u,_c:_}))),L[d][1]=Q();const at=await B();if(w({_c:_}),m){if(f)throw m;return}return c?at:u}}const X=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Ct=(t,e)=>{if(!R.has(t)){const n=b(Rt,e),s={},o=bt.bind(_,t);let i=T;const c={},a=(l,f)=>{const p=c[l]||[];return c[l]=p,p.push(f),()=>p.splice(p.indexOf(f),1)},r=(l,f,p)=>{t.set(l,f);const h=c[l];if(h)for(const d of h)d(f,p)},C=()=>{if(!R.has(t)&&(R.set(t,[s,{},{},{},o,r,a]),!$)){const l=n.initFocus(setTimeout.bind(_,X.bind(_,s,tt))),f=n.initReconnect(setTimeout.bind(_,X.bind(_,s,et)));i=()=>{l&&l(),f&&f(),R.delete(t)}}};return C(),[t,o,C,i]}return[t,R.get(t)[4]]},At=(t,e,n,s,o)=>{const i=n.errorRetryCount,c=o.retryCount,a=~~((Math.random()+.5)*(1<<(c<8?c:8)))*n.errorRetryInterval;!E(i)&&c>i||setTimeout(s,a,o)},St=(t,e)=>v(t)==v(e),[ot,Dt]=Ct(new Map),vt=b({onLoadingSlow:T,onSuccess:T,onError:T,onErrorRetry:At,onDiscarded:T,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Y?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Y?5e3:3e3,compare:St,isPaused:()=>!1,cache:ot,mutate:Dt,fallback:{}},wt),yt=(t,e)=>{const n=b(t,e);if(e){const{use:s,fallback:o}=t,{use:i,fallback:c}=e;s&&i&&(n.use=s.concat(i)),o&&c&&(n.fallback=b(o,c))}return n},It=g.createContext({}),st=N&&window.__SWR_DEVTOOLS_USE__,gt=st?window.__SWR_DEVTOOLS_USE__:[],Nt=()=>{st&&(window.__SWR_DEVTOOLS_REACT__=Z)},Lt=t=>O(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Vt=()=>b(vt,g.useContext(It)),xt=t=>(e,n,s)=>t(e,n&&((...i)=>{const[c]=k(e),[,,,a]=R.get(ot),r=a[c];return r?(delete a[c],r):n(...i)}),s),Ft=gt.concat(xt),jt=t=>function(...n){const s=Vt(),[o,i,c]=Lt(n),a=yt(s,c);let r=t;const{use:C}=a,l=(C||[]).concat(Ft);for(let f=l.length;f--;)r=l[f](r);return r(o,i||a.fetcher||null,a)},$t=(t,e,n)=>{const s=e[t]||(e[t]=[]);return s.push(n),()=>{const o=s.indexOf(n);o>=0&&(s[o]=s[s.length-1],s.pop())}};Nt();const it=lt.create({baseURL:ut});it.interceptors.response.use(t=>t,t=>Promise.reject(t.response&&t.response.data||"Something went wrong"));const Bt=async t=>{const[e,n]=Array.isArray(t)?t:[t];return(await it.get(e,{...n})).data},Jt={chat:"/api/chat",kanban:"/api/kanban",calendar:"/api/calendar",auth:{me:"/api/auth/me",login:"/api/auth/login",register:"/api/auth/register"},mail:{list:"/api/mail/list",details:"/api/mail/details",labels:"/api/mail/labels"},post:{list:"/api/post/list",details:"/api/post/details",latest:"/api/post/latest",search:"/api/post/search"},product:{list:"/api/product/list",details:"/api/product/details",search:"/api/product/search"}};export{$ as I,R as S,_ as U,O as a,qt as b,dt as c,bt as d,Jt as e,Bt as f,Q as g,$t as h,E as i,Mt as j,Dt as k,it as l,b as m,Pt as r,k as s,Ht as u,jt as w};
