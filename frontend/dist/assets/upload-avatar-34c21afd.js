import{a8 as c,aB as Pr,ao as D,du as sr,ad as C,ac as le,ax as s,a9 as B,ab as Ne,dv as Ye,aH as Ee,ah as W,b0 as Cr,dw as H,dx as N,dy as Ge,dz as qe,D as f,E as _r,dA as Ir,ae as Ve}from"./index-45b7eda6.js";import{d as cr}from"./format-number-c3b6bd9b.js";import{v as Je}from"./fade-ba5404aa.js";import{A as Tr}from"./index-d32af1f1.js";import{I as lr}from"./image-314d9a54.js";function Ie({fileRejections:e}){return e.length?c.jsx(Pr,{variant:"outlined",sx:{py:1,px:2,mt:3,bgcolor:r=>D(r.palette.error.main,.08),borderColor:r=>D(r.palette.error.main,.24)},children:e.map(({file:r,errors:t})=>{const{path:n,size:o}=sr(r);return c.jsxs(C,{sx:{my:1},children:[c.jsxs(le,{variant:"subtitle2",noWrap:!0,children:[n," - ",o?cr(o):""]}),t.map(a=>c.jsxs(C,{component:"span",sx:{typography:"caption"},children:["- ",a.message]},a.code))]},n)})}):null}Ie.propTypes={fileRejections:s.array};function ur({thumbnail:e,files:r,onRemove:t,sx:n}){return c.jsx(Tr,{initial:!1,children:r==null?void 0:r.map(o=>{const{key:a,name:u="",size:p=0}=sr(o),d=typeof o=="string";return e?c.jsxs(B,{component:Ne.div,...Je().inUp,alignItems:"center",display:"inline-flex",justifyContent:"center",sx:{m:.5,width:80,height:80,borderRadius:1.25,overflow:"hidden",position:"relative",border:m=>`solid 1px ${D(m.palette.grey[500],.16)}`,...n},children:[c.jsx(Ye,{tooltip:!0,imageView:!0,file:o,sx:{position:"absolute"},imgSx:{position:"absolute"}}),t&&c.jsx(Ee,{size:"small",onClick:()=>t(o),sx:{p:.5,top:4,right:4,position:"absolute",color:"common.white",bgcolor:m=>D(m.palette.grey[900],.48),"&:hover":{bgcolor:m=>D(m.palette.grey[900],.72)}},children:c.jsx(W,{icon:"mingcute:close-line",width:14})})]},a):c.jsxs(B,{component:Ne.div,...Je().inUp,spacing:2,direction:"row",alignItems:"center",sx:{my:1,py:1,px:1.5,borderRadius:1,border:m=>`solid 1px ${D(m.palette.grey[500],.16)}`,...n},children:[c.jsx(Ye,{file:o}),c.jsx(Cr,{primary:d?o:u,secondary:d?"":cr(p),secondaryTypographyProps:{component:"span",typography:"caption"}}),t&&c.jsx(Ee,{size:"small",onClick:()=>t(o),children:c.jsx(W,{icon:"mingcute:close-line",width:16})})]},a)})})}ur.propTypes={files:s.array,onRemove:s.func,sx:s.object,thumbnail:s.bool};function pr({imgUrl:e=""}){return c.jsx(C,{sx:{p:1,top:0,left:0,width:1,height:1,position:"absolute"},children:c.jsx(lr,{alt:"file preview",src:e,sx:{width:1,height:1,borderRadius:1}})})}pr.propTypes={imgUrl:s.string};var Rr=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function X(e,r){var t=Sr(e);if(typeof t.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof r=="string"?r:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return t}function Sr(e){var r=e.name,t=r&&r.lastIndexOf(".")!==-1;if(t&&!e.type){var n=r.split(".").pop().toLowerCase(),o=Rr.get(n);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var kr=[".DS_Store","Thumbs.db"];function zr(e){return H(this,void 0,void 0,function(){return N(this,function(r){return ue(e)&&Mr(e.dataTransfer)?[2,Ur(e.dataTransfer,e.type)]:Lr(e)?[2,$r(e)]:Array.isArray(e)&&e.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Kr(e)]:[2,[]]})})}function Mr(e){return ue(e)}function Lr(e){return ue(e)&&ue(e.target)}function ue(e){return typeof e=="object"&&e!==null}function $r(e){return Fe(e.target.files).map(function(r){return X(r)})}function Kr(e){return H(this,void 0,void 0,function(){var r;return N(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return r=t.sent(),[2,r.map(function(n){return X(n)})]}})})}function Ur(e,r){return H(this,void 0,void 0,function(){var t,n;return N(this,function(o){switch(o.label){case 0:return e.items?(t=Fe(e.items).filter(function(a){return a.kind==="file"}),r!=="drop"?[2,t]:[4,Promise.all(t.map(Br))]):[3,2];case 1:return n=o.sent(),[2,Qe(fr(n))];case 2:return[2,Qe(Fe(e.files).map(function(a){return X(a)}))]}})})}function Qe(e){return e.filter(function(r){return kr.indexOf(r.name)===-1})}function Fe(e){if(e===null)return[];for(var r=[],t=0;t<e.length;t++){var n=e[t];r.push(n)}return r}function Br(e){if(typeof e.webkitGetAsEntry!="function")return Xe(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?dr(r):Xe(e)}function fr(e){return e.reduce(function(r,t){return Ge(Ge([],qe(r),!1),qe(Array.isArray(t)?fr(t):[t]),!1)},[])}function Xe(e){var r=e.getAsFile();if(!r)return Promise.reject("".concat(e," is not a File"));var t=X(r);return Promise.resolve(t)}function Wr(e){return H(this,void 0,void 0,function(){return N(this,function(r){return[2,e.isDirectory?dr(e):Hr(e)]})})}function dr(e){var r=e.createReader();return new Promise(function(t,n){var o=[];function a(){var u=this;r.readEntries(function(p){return H(u,void 0,void 0,function(){var d,m,h;return N(this,function(y){switch(y.label){case 0:if(p.length)return[3,5];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return d=y.sent(),t(d),[3,4];case 3:return m=y.sent(),n(m),[3,4];case 4:return[3,6];case 5:h=Promise.all(p.map(Wr)),o.push(h),a(),y.label=6;case 6:return[2]}})})},function(p){n(p)})}a()})}function Hr(e){return H(this,void 0,void 0,function(){return N(this,function(r){return[2,new Promise(function(t,n){e.file(function(o){var a=X(o,e.fullPath);t(a)},function(o){n(o)})})]})})}var Nr=function(e,r){if(e&&r){var t=Array.isArray(r)?r:r.split(","),n=e.name||"",o=(e.type||"").toLowerCase(),a=o.replace(/\/.*$/,"");return t.some(function(u){var p=u.trim().toLowerCase();return p.charAt(0)==="."?n.toLowerCase().endsWith(p):p.endsWith("/*")?a===p.replace(/\/.*$/,""):o===p})}return!0};function Ze(e){return qr(e)||Gr(e)||mr(e)||Yr()}function Yr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qr(e){if(Array.isArray(e))return Oe(e)}function er(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function rr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?er(Object(t),!0).forEach(function(n){gr(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):er(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function gr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Q(e,r){return Qr(e)||Jr(e,r)||mr(e,r)||Vr()}function Vr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mr(e,r){if(e){if(typeof e=="string")return Oe(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Oe(e,r)}}function Oe(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Jr(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],o=!0,a=!1,u,p;try{for(t=t.call(e);!(o=(u=t.next()).done)&&(n.push(u.value),!(r&&n.length===r));o=!0);}catch(d){a=!0,p=d}finally{try{!o&&t.return!=null&&t.return()}finally{if(a)throw p}}return n}}function Qr(e){if(Array.isArray(e))return e}var Xr="file-invalid-type",Zr="file-too-large",et="file-too-small",rt="too-many-files",tt=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var t=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:Xr,message:"File type must be ".concat(t)}},tr=function(r){return{code:Zr,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},nr=function(r){return{code:et,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},nt={code:rt,message:"Too many files"};function vr(e,r){var t=e.type==="application/x-moz-file"||Nr(e,r);return[t,t?null:tt(r)]}function yr(e,r,t){if(z(e.size))if(z(r)&&z(t)){if(e.size>t)return[!1,tr(t)];if(e.size<r)return[!1,nr(r)]}else{if(z(r)&&e.size<r)return[!1,nr(r)];if(z(t)&&e.size>t)return[!1,tr(t)]}return[!0,null]}function z(e){return e!=null}function ot(e){var r=e.files,t=e.accept,n=e.minSize,o=e.maxSize,a=e.multiple,u=e.maxFiles,p=e.validator;return!a&&r.length>1||a&&u>=1&&r.length>u?!1:r.every(function(d){var m=vr(d,t),h=Q(m,1),y=h[0],O=yr(d,n,o),_=Q(O,1),I=_[0],T=p?p(d):null;return y&&I&&!T})}function pe(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function ce(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function or(e){e.preventDefault()}function it(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function at(e){return e.indexOf("Edge/")!==-1}function st(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return it(e)||at(e)}function P(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(n){for(var o=arguments.length,a=new Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];return r.some(function(p){return!pe(n)&&p&&p.apply(void 0,[n].concat(a)),pe(n)})}}function ct(){return"showOpenFilePicker"in window}function lt(e){if(z(e)){var r=Object.entries(e).filter(function(t){var n=Q(t,2),o=n[0],a=n[1],u=!0;return hr(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),u=!1),(!Array.isArray(a)||!a.every(br))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),u=!1),u}).reduce(function(t,n){var o=Q(n,2),a=o[0],u=o[1];return rr(rr({},t),{},gr({},a,u))},{});return[{description:"Files",accept:r}]}return e}function ut(e){if(z(e))return Object.entries(e).reduce(function(r,t){var n=Q(t,2),o=n[0],a=n[1];return[].concat(Ze(r),[o],Ze(a))},[]).filter(function(r){return hr(r)||br(r)}).join(",")}function pt(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function ft(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function hr(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function br(e){return/^.*\.[\w]+$/.test(e)}var dt=["children"],gt=["open"],mt=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],vt=["refKey","onChange","onClick"];function yt(e){return xt(e)||bt(e)||xr(e)||ht()}function ht(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xt(e){if(Array.isArray(e))return Pe(e)}function Ae(e,r){return wt(e)||jt(e,r)||xr(e,r)||Dt()}function Dt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xr(e,r){if(e){if(typeof e=="string")return Pe(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pe(e,r)}}function Pe(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function jt(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],o=!0,a=!1,u,p;try{for(t=t.call(e);!(o=(u=t.next()).done)&&(n.push(u.value),!(r&&n.length===r));o=!0);}catch(d){a=!0,p=d}finally{try{!o&&t.return!=null&&t.return()}finally{if(a)throw p}}return n}}function wt(e){if(Array.isArray(e))return e}function ir(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function g(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ir(Object(t),!0).forEach(function(n){Ce(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ir(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ce(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function fe(e,r){if(e==null)return{};var t=At(e,r),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function At(e,r){if(e==null)return{};var t={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(r.indexOf(o)>=0)&&(t[o]=e[o]);return t}var Te=f.forwardRef(function(e,r){var t=e.children,n=fe(e,dt),o=de(n),a=o.open,u=fe(o,gt);return f.useImperativeHandle(r,function(){return{open:a}},[a]),_r.createElement(f.Fragment,null,t(g(g({},u),{},{open:a})))});Te.displayName="Dropzone";var Dr={disabled:!1,getFilesFromEvent:zr,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Te.defaultProps=Dr;Te.propTypes={children:s.func,accept:s.objectOf(s.arrayOf(s.string)),multiple:s.bool,preventDropOnDocument:s.bool,noClick:s.bool,noKeyboard:s.bool,noDrag:s.bool,noDragEventsBubbling:s.bool,minSize:s.number,maxSize:s.number,maxFiles:s.number,disabled:s.bool,getFilesFromEvent:s.func,onFileDialogCancel:s.func,onFileDialogOpen:s.func,useFsAccessApi:s.bool,autoFocus:s.bool,onDragEnter:s.func,onDragLeave:s.func,onDragOver:s.func,onDrop:s.func,onDropAccepted:s.func,onDropRejected:s.func,onError:s.func,validator:s.func};var _e={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function de(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=g(g({},Dr),e),t=r.accept,n=r.disabled,o=r.getFilesFromEvent,a=r.maxSize,u=r.minSize,p=r.multiple,d=r.maxFiles,m=r.onDragEnter,h=r.onDragLeave,y=r.onDragOver,O=r.onDrop,_=r.onDropAccepted,I=r.onDropRejected,T=r.onFileDialogCancel,S=r.onFileDialogOpen,w=r.useFsAccessApi,M=r.autoFocus,Y=r.preventDropOnDocument,Z=r.noClick,G=r.noKeyboard,ee=r.noDrag,R=r.noDragEventsBubbling,q=r.onError,b=r.validator,V=f.useMemo(function(){return ut(t)},[t]),Re=f.useMemo(function(){return lt(t)},[t]),ge=f.useMemo(function(){return typeof S=="function"?S:ar},[S]),re=f.useMemo(function(){return typeof T=="function"?T:ar},[T]),j=f.useRef(null),F=f.useRef(null),jr=f.useReducer(Et,_e),Se=Ae(jr,2),me=Se[0],A=Se[1],wr=me.isFocused,ke=me.isFileDialogActive,te=f.useRef(typeof window<"u"&&window.isSecureContext&&w&&ct()),ze=function(){!te.current&&ke&&setTimeout(function(){if(F.current){var l=F.current.files;l.length||(A({type:"closeDialog"}),re())}},300)};f.useEffect(function(){return window.addEventListener("focus",ze,!1),function(){window.removeEventListener("focus",ze,!1)}},[F,ke,re,te]);var L=f.useRef([]),Me=function(l){j.current&&j.current.contains(l.target)||(l.preventDefault(),L.current=[])};f.useEffect(function(){return Y&&(document.addEventListener("dragover",or,!1),document.addEventListener("drop",Me,!1)),function(){Y&&(document.removeEventListener("dragover",or),document.removeEventListener("drop",Me))}},[j,Y]),f.useEffect(function(){return!n&&M&&j.current&&j.current.focus(),function(){}},[j,M,n]);var k=f.useCallback(function(i){q?q(i):console.error(i)},[q]),Le=f.useCallback(function(i){i.preventDefault(),i.persist(),ae(i),L.current=[].concat(yt(L.current),[i.target]),ce(i)&&Promise.resolve(o(i)).then(function(l){if(!(pe(i)&&!R)){var v=l.length,x=v>0&&ot({files:l,accept:V,minSize:u,maxSize:a,multiple:p,maxFiles:d,validator:b}),E=v>0&&!x;A({isDragAccept:x,isDragReject:E,isDragActive:!0,type:"setDraggedFiles"}),m&&m(i)}}).catch(function(l){return k(l)})},[o,m,k,R,V,u,a,p,d,b]),$e=f.useCallback(function(i){i.preventDefault(),i.persist(),ae(i);var l=ce(i);if(l&&i.dataTransfer)try{i.dataTransfer.dropEffect="copy"}catch{}return l&&y&&y(i),!1},[y,R]),Ke=f.useCallback(function(i){i.preventDefault(),i.persist(),ae(i);var l=L.current.filter(function(x){return j.current&&j.current.contains(x)}),v=l.indexOf(i.target);v!==-1&&l.splice(v,1),L.current=l,!(l.length>0)&&(A({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ce(i)&&h&&h(i))},[j,h,R]),ne=f.useCallback(function(i,l){var v=[],x=[];i.forEach(function(E){var J=vr(E,V),U=Ae(J,2),ye=U[0],he=U[1],be=yr(E,u,a),se=Ae(be,2),xe=se[0],De=se[1],je=b?b(E):null;if(ye&&xe&&!je)v.push(E);else{var we=[he,De];je&&(we=we.concat(je)),x.push({file:E,errors:we.filter(function(Or){return Or})})}}),(!p&&v.length>1||p&&d>=1&&v.length>d)&&(v.forEach(function(E){x.push({file:E,errors:[nt]})}),v.splice(0)),A({acceptedFiles:v,fileRejections:x,type:"setFiles"}),O&&O(v,x,l),x.length>0&&I&&I(x,l),v.length>0&&_&&_(v,l)},[A,p,V,u,a,d,O,_,I,b]),oe=f.useCallback(function(i){i.preventDefault(),i.persist(),ae(i),L.current=[],ce(i)&&Promise.resolve(o(i)).then(function(l){pe(i)&&!R||ne(l,i)}).catch(function(l){return k(l)}),A({type:"reset"})},[o,ne,k,R]),$=f.useCallback(function(){if(te.current){A({type:"openDialog"}),ge();var i={multiple:p,types:Re};window.showOpenFilePicker(i).then(function(l){return o(l)}).then(function(l){ne(l,null),A({type:"closeDialog"})}).catch(function(l){pt(l)?(re(l),A({type:"closeDialog"})):ft(l)?(te.current=!1,F.current?(F.current.value=null,F.current.click()):k(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):k(l)});return}F.current&&(A({type:"openDialog"}),ge(),F.current.value=null,F.current.click())},[A,ge,re,w,ne,k,Re,p]),Ue=f.useCallback(function(i){!j.current||!j.current.isEqualNode(i.target)||(i.key===" "||i.key==="Enter"||i.keyCode===32||i.keyCode===13)&&(i.preventDefault(),$())},[j,$]),Be=f.useCallback(function(){A({type:"focus"})},[]),We=f.useCallback(function(){A({type:"blur"})},[]),He=f.useCallback(function(){Z||(st()?setTimeout($,0):$())},[Z,$]),K=function(l){return n?null:l},ve=function(l){return G?null:K(l)},ie=function(l){return ee?null:K(l)},ae=function(l){R&&l.stopPropagation()},Ar=f.useMemo(function(){return function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=i.refKey,v=l===void 0?"ref":l,x=i.role,E=i.onKeyDown,J=i.onFocus,U=i.onBlur,ye=i.onClick,he=i.onDragEnter,be=i.onDragOver,se=i.onDragLeave,xe=i.onDrop,De=fe(i,mt);return g(g(Ce({onKeyDown:ve(P(E,Ue)),onFocus:ve(P(J,Be)),onBlur:ve(P(U,We)),onClick:K(P(ye,He)),onDragEnter:ie(P(he,Le)),onDragOver:ie(P(be,$e)),onDragLeave:ie(P(se,Ke)),onDrop:ie(P(xe,oe)),role:typeof x=="string"&&x!==""?x:"presentation"},v,j),!n&&!G?{tabIndex:0}:{}),De)}},[j,Ue,Be,We,He,Le,$e,Ke,oe,G,ee,n]),Er=f.useCallback(function(i){i.stopPropagation()},[]),Fr=f.useMemo(function(){return function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=i.refKey,v=l===void 0?"ref":l,x=i.onChange,E=i.onClick,J=fe(i,vt),U=Ce({accept:V,multiple:p,type:"file",style:{display:"none"},onChange:K(P(x,oe)),onClick:K(P(E,Er)),tabIndex:-1},v,F);return g(g({},U),J)}},[F,t,p,oe,n]);return g(g({},me),{},{isFocused:wr&&!n,getRootProps:Ar,getInputProps:Fr,rootRef:j,inputRef:F,open:K($)})}function Et(e,r){switch(r.type){case"focus":return g(g({},e),{},{isFocused:!0});case"blur":return g(g({},e),{},{isFocused:!1});case"openDialog":return g(g({},_e),{},{isFileDialogActive:!0});case"closeDialog":return g(g({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return g(g({},e),{},{isDragActive:r.isDragActive,isDragAccept:r.isDragAccept,isDragReject:r.isDragReject});case"setFiles":return g(g({},e),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return g({},_e);default:return e}}function ar(){}function Ft({disabled:e,multiple:r=!1,error:t,helperText:n,file:o,onDelete:a,files:u,thumbnail:p,onUpload:d,onRemove:m,onRemoveAll:h,sx:y,...O}){const{getRootProps:_,getInputProps:I,isDragActive:T,isDragReject:S,fileRejections:w}=de({multiple:r,disabled:e,...O}),M=!!o&&!r,Y=!!u&&r&&!!u.length,Z=S||!!t,G=c.jsxs(B,{spacing:3,alignItems:"center",justifyContent:"center",flexWrap:"wrap",children:[c.jsx(Ir,{sx:{width:1,maxWidth:200}}),c.jsxs(B,{spacing:1,sx:{textAlign:"center"},children:[c.jsx(le,{variant:"h6",children:"Drop or Select file"}),c.jsxs(le,{variant:"body2",sx:{color:"text.secondary"},children:["Drop files here or click",c.jsx(C,{component:"span",sx:{mx:.5,color:"primary.main",textDecoration:"underline"},children:"browse"}),"thorough your machine"]})]})]}),ee=c.jsx(pr,{imgUrl:typeof o=="string"?o:o==null?void 0:o.preview}),R=M&&a&&c.jsx(Ee,{size:"small",onClick:a,sx:{top:16,right:16,zIndex:9,position:"absolute",color:b=>D(b.palette.common.white,.8),bgcolor:b=>D(b.palette.grey[900],.72),"&:hover":{bgcolor:b=>D(b.palette.grey[900],.48)}},children:c.jsx(W,{icon:"mingcute:close-line",width:18})}),q=Y&&c.jsxs(c.Fragment,{children:[c.jsx(C,{sx:{my:3},children:c.jsx(ur,{files:u,thumbnail:p,onRemove:m})}),c.jsxs(B,{direction:"row",justifyContent:"flex-end",spacing:1.5,children:[h&&c.jsx(Ve,{color:"inherit",variant:"outlined",size:"small",onClick:h,children:"Remove All"}),d&&c.jsx(Ve,{size:"small",variant:"contained",onClick:d,startIcon:c.jsx(W,{icon:"eva:cloud-upload-fill"}),children:"Upload"})]})]});return c.jsxs(C,{sx:{width:1,position:"relative",...y},children:[c.jsxs(C,{..._(),sx:{p:5,outline:"none",borderRadius:1,cursor:"pointer",overflow:"hidden",position:"relative",bgcolor:b=>D(b.palette.grey[500],.08),border:b=>`1px dashed ${D(b.palette.grey[500],.2)}`,transition:b=>b.transitions.create(["opacity","padding"]),"&:hover":{opacity:.72},...T&&{opacity:.72},...e&&{opacity:.48,pointerEvents:"none"},...Z&&{color:"error.main",bgcolor:"error.lighter",borderColor:"error.light"},...M&&{padding:"24% 0"}},children:[c.jsx("input",{...I()}),M?ee:G]}),R,n&&n,c.jsx(Ie,{fileRejections:w}),q]})}Ft.propTypes={disabled:s.object,error:s.bool,file:s.oneOfType([s.string,s.object]),files:s.array,helperText:s.object,multiple:s.bool,onDelete:s.func,onRemove:s.func,onRemoveAll:s.func,onUpload:s.func,sx:s.object,thumbnail:s.bool};function Ot({placeholder:e,error:r,disabled:t,sx:n,...o}){const{getRootProps:a,getInputProps:u,isDragActive:p,isDragReject:d}=de({disabled:t,...o}),m=d||r;return c.jsxs(C,{...a(),sx:{m:.5,width:64,height:64,flexShrink:0,display:"flex",borderRadius:1,cursor:"pointer",alignItems:"center",color:"text.disabled",justifyContent:"center",bgcolor:h=>D(h.palette.grey[500],.08),border:h=>`dashed 1px ${D(h.palette.grey[500],.16)}`,...p&&{opacity:.72},...t&&{opacity:.48,pointerEvents:"none"},...m&&{color:"error.main",bgcolor:"error.lighter",borderColor:"error.light"},"&:hover":{opacity:.72},...n},children:[c.jsx("input",{...u()}),e||c.jsx(W,{icon:"eva:cloud-upload-fill",width:28})]})}Ot.propTypes={disabled:s.object,error:s.bool,placeholder:s.object,sx:s.object};function Pt({error:e,file:r,disabled:t,helperText:n,sx:o,...a}){const{getRootProps:u,getInputProps:p,isDragActive:d,isDragReject:m,fileRejections:h}=de({multiple:!1,disabled:t,accept:{"image/*":[]},...a}),y=!!r,O=m||!!e,_=typeof r=="string"?r:r==null?void 0:r.preview,I=y&&c.jsx(lr,{alt:"avatar",src:_,sx:{width:1,height:1,borderRadius:"50%"}}),T=c.jsxs(B,{alignItems:"center",justifyContent:"center",spacing:1,className:"upload-placeholder",sx:{top:0,left:0,width:1,height:1,zIndex:9,borderRadius:"50%",position:"absolute",color:"text.disabled",bgcolor:w=>D(w.palette.grey[500],.08),transition:w=>w.transitions.create(["opacity"],{duration:w.transitions.duration.shorter}),"&:hover":{opacity:.72},...O&&{color:"error.main",bgcolor:"error.lighter"},...y&&{zIndex:9,opacity:0,color:"common.white",bgcolor:w=>D(w.palette.grey[900],.64)}},children:[c.jsx(W,{icon:"solar:camera-add-bold",width:32}),c.jsx(le,{variant:"caption",children:r?"Update photo":"Upload photo"})]}),S=c.jsxs(C,{sx:{width:1,height:1,overflow:"hidden",borderRadius:"50%",position:"relative"},children:[I,T]});return c.jsxs(c.Fragment,{children:[c.jsxs(C,{...u(),sx:{p:1,m:"auto",width:144,height:144,cursor:"pointer",overflow:"hidden",borderRadius:"50%",border:w=>`1px dashed ${D(w.palette.grey[500],.2)}`,...d&&{opacity:.72},...t&&{opacity:.48,pointerEvents:"none"},...O&&{borderColor:"error.light"},...y&&{...O&&{bgcolor:"error.lighter"},"&:hover .upload-placeholder":{opacity:1}},...o},children:[c.jsx("input",{...p()}),S]}),n&&n,c.jsx(Ie,{fileRejections:h})]})}Pt.propTypes={disabled:s.object,error:s.bool,file:s.oneOfType([s.string,s.object]),helperText:s.object,sx:s.object};export{Pt as U,Ft as a,Ot as b};
