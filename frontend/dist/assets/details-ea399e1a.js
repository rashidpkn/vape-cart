import{r as l,a as B,j as e,c as p,q as c,F as X,m as Y,n as _,o as ee,l as k,s as W,B as R,T as te,w as re,p as V,aj as ae,G as T,ac as se,y as ie,d as ne,W as oe}from"./index-bc388b4b.js";import{C as le}from"./custom-breadcrumbs-0742cdec.js";import{F as ce}from"./form-provider-23831877.js";import{p as de,P as ue,a as me,b as pe,C as xe}from"./product-details-description-8008e95c.js";import"./table-pagination-custom-d5281114.js";import"./confirm-dialog-51832c94.js";import{u as he}from"./use-params-ca1745a6.js";import{u as ge}from"./use-checkout-18f1f3fa.js";import{f as $,c as je}from"./format-number-3932d3e4.js";import{R as be}from"./use-carousel-2d6fa5aa.js";import{C as fe}from"./Card-6273d280.js";import{T as ve,a as ye}from"./Tabs-9c4a1cd9.js";import"./file-thumbnail-57a9fae4.js";import"./fade-295cf198.js";import"./transition-bee6630b.js";import"./image-8ef73bea.js";import"./Checkbox-09455ac3.js";import"./TableRow-c8f22017.js";import"./yup-772954a9.js";import"./DialogTitle-b09f6b86.js";import"./DialogContent-3d9c6eea.js";import"./lightbox-7b0ab4a1.js";import"./index-62b1fa04.js";import"./KeyboardArrowRight-6d5a049c.js";import"./LastPage-5b4e3e9d.js";import"./_product-cb82ad69.js";function Pe({cart:q,product:x,onAddCart:h,onGotoStep:A,disabledActions:v,setProduct:y,parentProduct:g={},...d}){const[j,u]=l.useState(1),P=B(),{id:C,name:t,regularPrice:b,quantity:s,salePrice:o,totalRatings:a,totalReviews:i,images:N,userId:Q,type:S,subDescription:F,variations:w}=x,E=e.jsxs(p,{sx:{typography:"h5"},children:[e.jsx(p,{component:"span",sx:{color:"text.disabled",textDecoration:"line-through",mr:.5},children:$(b)}),$(o)]}),M=e.jsxs(c,{direction:"row",children:[e.jsx(k,{variant:"subtitle2",sx:{flexGrow:1},children:"Quantity"}),e.jsx(c,{spacing:1,children:e.jsxs(k,{variant:"caption",component:"div",sx:{textAlign:"right"},children:["Available: ",s||100]})})]}),z=e.jsxs(c,{direction:"row",spacing:2,children:[e.jsxs(p,{sx:{width:{sm:"100%",md:"60%"}},display:"flex",justifyItems:"center",alignItems:"center",gap:1,children:[e.jsx(R,{variant:"outlined",color:"primary",onClick:()=>{u(r=>r<=1?1:r-1)},children:"-"}),e.jsx(te,{fullWidth:!0,label:"Quantity",type:"number",inputProps:{min:1,max:s??100},onChange:r=>{u(f=>{const{value:n}=r.target;return n<=0?1:s?Math.min(s,n):Math.min(n,100)})},value:j}),e.jsx(R,{variant:"outlined",color:"primary",onClick:()=>{u(r=>r<s?r+1:r)},children:"+"})]}),e.jsx(R,{fullWidth:!0,size:"large",color:"warning",variant:"contained",startIcon:e.jsx(re,{icon:"solar:cart-plus-bold",width:24}),onClick:()=>{if(S==="Variable"&&!D){alert("Please choose a variable from the list.");return}h({id:C,name:t,price:o,images:N,subTotal:o,userId:Q,quantity:j,available:s}),P(V.product.checkout)},sx:{width:{sm:"100%",md:"40%"}},children:"Add to Cart"})]}),J=!!F&&de(F),H=e.jsxs(c,{direction:"row",alignItems:"center",sx:{color:"text.disabled",typography:"body2"},children:[e.jsx(be,{size:"small",value:a,precision:.1,readOnly:!0,sx:{mr:1}}),`(${je(i)} reviews)`]}),[D,L]=l.useState(""),U=e.jsx(p,{display:"flex",flexDirection:"column",gap:"10px",children:e.jsx(p,{children:e.jsxs(X,{fullWidth:!0,children:[e.jsx(Y,{id:"variations",children:"Select Variations"}),e.jsx(_,{labelId:"variations",label:"Select Variations",value:D,onChange:r=>{L(r.target.value);const{track:f,quantity:n,regularPrice:I,salePrice:Z,image:G}=x.variations.find(m=>JSON.stringify(m.attributes)===JSON.stringify(r.target.value));let K=g.name+"-"+Object.keys(r.target.value).map(m=>r.target.value[m]).join("-"),O=g.images;G&&(O=G),y(m=>({...m,track:f,quantity:n,regularPrice:I,salePrice:Z,name:K,images:O}))},children:w==null?void 0:w.map((r,f)=>e.jsxs(ee,{value:r.attributes,children:[Object.keys(r.attributes).map(n=>n.replace(/([A-Z])/," $1").replace(/^./,I=>I.toUpperCase())+" : "+r.attributes[n]).join(", ")," "]},f))})]})})});return e.jsx(ce,{children:e.jsxs(c,{spacing:3,sx:{pt:3},...d,children:[e.jsxs(c,{spacing:2,alignItems:"flex-start",children:[e.jsx(k,{variant:"h5",children:t}),H,S==="Variable"&&!!D&&o!==null&&E,J]}),e.jsx(W,{sx:{borderStyle:"dashed"}}),M,e.jsx(W,{sx:{borderStyle:"dashed"}}),S==="Variable"&&U,z]})})}function Ce(){var o;const q=B(),x=he(),{id:h}=x,A=ae(),{checkout:v,onAddCart:y,onGotoStep:g}=ge(),[d,j]=l.useState("description"),[u,P]=l.useState({});l.useEffect(()=>{(async()=>{try{const{data:i}=await ne.get(`products/${h}`,{params:{count:1}});b(i),P(i)}catch(i){alert(i.response.data.message),q(V.dashboard.product.root)}})()},[h]);const C=l.useCallback((a,i)=>{j(i)},[]),[t,b]=l.useState({}),s=t&&e.jsxs(e.Fragment,{children:[e.jsx(le,{links:[{name:"Home",href:"/"},{name:"Shop",href:V.product.root},{name:t==null?void 0:t.name}],sx:{mb:5}}),e.jsxs(T,{container:!0,spacing:{xs:3,md:5,lg:8},children:[e.jsx(T,{xs:12,md:6,lg:7,children:e.jsx(ue,{product:t})}),e.jsx(T,{xs:12,md:6,lg:5,children:e.jsx(Pe,{product:t,cart:v.cart,onAddCart:y,onGotoStep:g,setProduct:b,parentProduct:u})})]}),e.jsxs(fe,{children:[e.jsx(ve,{value:d,onChange:C,sx:{px:3,boxShadow:a=>`inset 0 -2px 0 0 ${se(a.palette.grey[500],.08)}`},children:[{value:"description",label:"Description"},{value:"reviews",label:`Reviews (${(o=t.reviews)==null?void 0:o.length})`}].map(a=>e.jsx(ye,{value:a.value,label:a.label},a.value))}),d==="description"&&e.jsx(me,{description:t==null?void 0:t.content}),d==="reviews"&&e.jsx(pe,{ratings:t.ratings,reviews:t.reviews,totalRatings:t.totalRatings,totalReviews:t.totalReviews})]})]});return e.jsxs(ie,{maxWidth:A.themeStretch?!1:"lg",sx:{mt:5,mb:15},children:[e.jsx(xe,{totalItems:v.totalItems}),t&&s]})}function Ke(){return e.jsxs(e.Fragment,{children:[e.jsx(oe,{children:e.jsx("title",{children:" Dashboard: Product Details"})}),e.jsx(Ce,{})]})}export{Ke as default};
