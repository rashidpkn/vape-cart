import{a_ as C,ar as E,bq as F,br as D,bs as B,H as f,b as R,j as e,aB as b,ah as w,T as V,bt as G,B as I,S as j,a$ as m,a as $,ag as v,b9 as y,ap as h,bd as H,aT as W,aN as T,aO as M,aH as z,ao as q,bu as J,bv as K,bw as Q,bx as X,by as Y,W as Z}from"./index-c6fc0d36.js";import{c as _,a as p,m as ee,u as k,F as P,n as ae,R as u,C as se,f as ne}from"./form-provider-adb5d9e2.js";import{L as S,o as L}from"./yup-791dd408.js";import{F as te}from"./Radio-24e5de87.js";import{S as re}from"./Switch-6b8c7283.js";import{T as oe,a as ie}from"./Tabs-ce6d782f.js";import"./file-thumbnail-65f09580.js";import"./fade-295cf198.js";import"./transition-bee6630b.js";import"./image-808c5e34.js";import"./CircularProgress-c9ce8718.js";function ce(){const{enqueueSnackbar:t}=C(),{user:a}=E(),r=_().shape({displayName:p().required("Name is required"),email:p().required("Email is required").email("Email must be a valid email address"),storeName:p().required("Store name is required"),contactPersonInTouch:p().required("Contact person in touch is required"),tradeLicense:ee().nullable().required("Trade License is required"),phoneNumber:p().required("Phone number is required"),address:p().required("Pick up Address is required"),workingTime:p().required("working Time is required"),workingDate:p().required("working Date is required")}),c={displayName:(a==null?void 0:a.displayName)||"",email:(a==null?void 0:a.email)||"",storeName:(a==null?void 0:a.storeName)||"",tradeLicense:(a==null?void 0:a.tradeLicense)||"",contactPersonInTouch:(a==null?void 0:a.contactPersonInTouch)||null,phoneNumber:(a==null?void 0:a.phoneNumber)||"",address:(a==null?void 0:a.address)||"",workingTime:(a==null?void 0:a.workingTime)||"",workingDate:(a==null?void 0:a.workingDate)||""},s=k({resolver:L(r),defaultValues:c}),{setValue:n,handleSubmit:g,formState:{isSubmitting:i}}=s,x=g(async o=>{try{const d=await F(D,"users",a.uid);await B(d,o),t("Update success!")}catch(d){console.error(d)}}),l=f.useCallback(async o=>{const d=o[0],N=new FormData;N.append("images",d);const{data:A}=await R.post("/upload",N);A.length&&n("tradeLicense",A[0],{shouldValidate:!0})},[n]);return e.jsx(P,{methods:s,onSubmit:x,children:e.jsxs(b,{container:!0,spacing:3,children:[e.jsx(b,{xs:12,md:4,children:e.jsx(w,{sx:{pt:10,pb:5,px:3,textAlign:"center"},children:e.jsx(ae,{name:"tradeLicense",maxSize:3145728,onDrop:l,helperText:e.jsxs(V,{variant:"caption",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"text.disabled"},children:["Trade License",e.jsx("br",{})," max size of ",G(3145728)]})})})}),e.jsx(b,{xs:12,md:8,children:e.jsxs(w,{sx:{p:3},children:[e.jsxs(I,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(u,{name:"displayName",label:"Name"}),e.jsx(u,{name:"email",label:"Email Address"}),e.jsx(u,{name:"storeName",label:"Store Name"}),e.jsx(u,{name:"contactPersonInTouch",label:"Contact person in touch"}),e.jsx(u,{name:"phoneNumber",label:"Phone Number"}),e.jsx(u,{name:"address",label:"Pick up address"}),e.jsx(u,{name:"workingTime",label:"Working Time"}),e.jsx(u,{name:"workingDate",label:"Working Date"})]}),e.jsx(j,{spacing:3,alignItems:"flex-end",sx:{mt:3},children:e.jsx(S,{type:"submit",variant:"contained",loading:i,children:"Save Changes"})})]})})]})})}function O(){const{user:t}=E(),[a,r]=f.useState(t.billing);f.useEffect(()=>{r(t.billing)},[t]);const c=async()=>{const s=F(D,"users",t.uid);await B(s,{billing:a}),alert("Updated")};return e.jsx(b,{container:!0,spacing:5,disableEqualOverflow:!0,children:e.jsx(b,{xs:12,md:12,spacing:2,children:e.jsxs(w,{sx:{p:1},children:[e.jsx(m,{value:a==null?void 0:a.managementName,onChange:s=>r(n=>({...n,managementName:s.target.value})),sx:{m:1,width:"30%"},label:"Management Name"}),e.jsx(m,{value:a==null?void 0:a.managementContact,onChange:s=>r(n=>({...n,managementContact:s.target.value})),sx:{m:1,width:"30%"},label:"Management Contact"}),e.jsx(m,{value:a==null?void 0:a.managementEmail,onChange:s=>r(n=>({...n,managementEmail:s.target.value})),sx:{m:1,width:"30%"},label:"Management Email"}),e.jsx(m,{value:a==null?void 0:a.financeName,onChange:s=>r(n=>({...n,financeName:s.target.value})),sx:{m:1,width:"30%"},label:"Finance Name"}),e.jsx(m,{value:a==null?void 0:a.financeContact,onChange:s=>r(n=>({...n,financeContact:s.target.value})),sx:{m:1,width:"30%"},label:"Finance Contact"}),e.jsx(m,{value:a==null?void 0:a.financeEmail,onChange:s=>r(n=>({...n,financeEmail:s.target.value})),sx:{m:1,width:"30%"},label:"Finance Email"}),e.jsx(m,{value:a==null?void 0:a.orderName,onChange:s=>r(n=>({...n,orderName:s.target.value})),sx:{m:1,width:"30%"},label:"Order Name"}),e.jsx(m,{value:a==null?void 0:a.orderContact,onChange:s=>r(n=>({...n,orderContact:s.target.value})),sx:{m:1,width:"30%"},label:"Order Contact"}),e.jsx(m,{value:a==null?void 0:a.orderEmail,onChange:s=>r(n=>({...n,orderEmail:s.target.value})),sx:{m:1,width:"30%"},label:"Order Email"}),e.jsx(m,{value:a==null?void 0:a.pickupName,onChange:s=>r(n=>({...n,pickupName:s.target.value})),sx:{m:1,width:"30%"},label:"Pickup Name"}),e.jsx(m,{value:a==null?void 0:a.pickupContact,onChange:s=>r(n=>({...n,pickupContact:s.target.value})),sx:{m:1,width:"30%"},label:"Pickup Contact"}),e.jsx(m,{value:a==null?void 0:a.pickupEmail,onChange:s=>r(n=>({...n,pickupEmail:s.target.value})),sx:{m:1,width:"30%"},label:"Pickup Email"}),e.jsx("div",{style:{gridColumn:"1 / -1",display:"flex",justifyContent:"flex-end"},children:e.jsx($,{variant:"contained",color:"success",onClick:()=>c(),children:"Submit"})})]})})})}O.propTypes={addressBook:v.array,cards:v.array,invoices:v.array,plans:v.array};function U({socialLinks:t}){const{enqueueSnackbar:a}=C(),r={facebook:t.facebook,instagram:t.instagram,linkedin:t.linkedin,twitter:t.twitter},c=k({defaultValues:r}),{handleSubmit:s,formState:{isSubmitting:n}}=c,g=s(async i=>{try{await new Promise(x=>setTimeout(x,500)),a("Update success!"),console.info("DATA",i)}catch(x){console.error(x)}});return e.jsx(P,{methods:c,onSubmit:g,children:e.jsxs(j,{component:w,spacing:3,sx:{p:3},children:[Object.keys(t).map(i=>e.jsx(u,{name:i,InputProps:{startAdornment:e.jsx(y,{position:"start",children:e.jsx(h,{width:24,icon:i==="facebook"&&"eva:facebook-fill"||i==="instagram"&&"ant-design:instagram-filled"||i==="linkedin"&&"eva:linkedin-fill"||i==="twitter"&&"eva:twitter-fill"||"",color:i==="facebook"&&"#1877F2"||i==="instagram"&&"#DF3E30"||i==="linkedin"&&"#006097"||i==="twitter"&&"#1C9CEA"||""})})}},i)),e.jsx(S,{type:"submit",variant:"contained",loading:n,sx:{ml:"auto"},children:"Save Changes"})]})})}U.propTypes={socialLinks:v.object};const le=[{subheader:"Activity",caption:"",items:[{id:"activity_comments",label:"Email me when customer makes a purchase."},{id:"activity_answers",label:"Email me when customer cancels an order."},{id:"activityFollows",label:"Email me when order is delivered."},{id:"application_news",label:"Email me when  someone leaves a review."},{id:"application_product",label:"Email me when stock is below 5."}]}];function de(){const{enqueueSnackbar:t}=C(),a=k({defaultValues:{selected:["activity_comments","application_product"]}}),{watch:r,control:c,handleSubmit:s,formState:{isSubmitting:n}}=a,g=r(),i=s(async l=>{try{await new Promise(o=>setTimeout(o,500)),t("Update success!"),console.info("DATA",l)}catch(o){console.error(o)}}),x=(l,o)=>l.includes(o)?l.filter(d=>d!==o):[...l,o];return e.jsx(P,{methods:a,onSubmit:i,children:e.jsxs(j,{component:w,spacing:3,sx:{p:3},children:[le.map(l=>e.jsxs(b,{container:!0,spacing:3,children:[e.jsx(b,{xs:12,md:4,children:e.jsx(H,{primary:l.subheader,secondary:l.caption,primaryTypographyProps:{typography:"h6",mb:.5},secondaryTypographyProps:{component:"span"}})}),e.jsx(b,{xs:12,md:8,children:e.jsx(j,{spacing:1,sx:{p:3,borderRadius:2,bgcolor:"background.neutral"},children:e.jsx(se,{name:"selected",control:c,render:({field:o})=>e.jsx(e.Fragment,{children:l.items.map(d=>e.jsx(te,{label:d.label,labelPlacement:"start",control:e.jsx(re,{checked:o.value.includes(d.id),onChange:()=>o.onChange(x(g.selected,d.id))}),sx:{m:0,width:1,justifyContent:"space-between"}},d.id))})})})})]},l.subheader)),e.jsx(S,{type:"submit",variant:"contained",loading:n,sx:{ml:"auto"},children:"Save Changes"})]})})}function me(){const{enqueueSnackbar:t}=C(),a=W(),r=_().shape({oldPassword:p().required("Old Password is required"),newPassword:p().required("New Password is required").min(6,"Password must be at least 6 characters").test("no-match","New password must be different than old password",(l,{parent:o})=>l!==o.oldPassword),confirmNewPassword:p().oneOf([ne("newPassword")],"Passwords must match")}),c={oldPassword:"",newPassword:"",confirmNewPassword:""},s=k({resolver:L(r),defaultValues:c}),{reset:n,handleSubmit:g,formState:{isSubmitting:i}}=s,x=g(async l=>{try{await new Promise(o=>setTimeout(o,500)),n(),t("Update success!"),console.info("DATA",l)}catch(o){console.error(o)}});return e.jsx(P,{methods:s,onSubmit:x,children:e.jsxs(j,{component:w,spacing:3,sx:{p:3},children:[e.jsx(u,{name:"oldPassword",type:a.value?"text":"password",label:"Old Password",InputProps:{endAdornment:e.jsx(y,{position:"end",children:e.jsx(T,{onClick:a.onToggle,edge:"end",children:e.jsx(h,{icon:a.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(u,{name:"newPassword",label:"New Password",type:a.value?"text":"password",InputProps:{endAdornment:e.jsx(y,{position:"end",children:e.jsx(T,{onClick:a.onToggle,edge:"end",children:e.jsx(h,{icon:a.value?"solar:eye-bold":"solar:eye-closed-bold"})})})},helperText:e.jsxs(j,{component:"span",direction:"row",alignItems:"center",children:[e.jsx(h,{icon:"eva:info-fill",width:16,sx:{mr:.5}})," Password must be minimum 6+"]})}),e.jsx(u,{name:"confirmNewPassword",type:a.value?"text":"password",label:"Confirm New Password",InputProps:{endAdornment:e.jsx(y,{position:"end",children:e.jsx(T,{onClick:a.onToggle,edge:"end",children:e.jsx(h,{icon:a.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(S,{type:"submit",variant:"contained",loading:i,sx:{ml:"auto"},children:"Save Changes"})]})})}const ue=[{value:"general",label:"General",icon:e.jsx(h,{icon:"solar:user-id-bold",width:24})},{value:"billing",label:"Billing",icon:e.jsx(h,{icon:"solar:bill-list-bold",width:24})},{value:"security",label:"Security",icon:e.jsx(h,{icon:"ic:round-vpn-key",width:24})}];function pe(){M();const[t,a]=f.useState("general"),r=f.useCallback((c,s)=>{a(s)},[]);return e.jsxs(I,{px:5,children:[e.jsx(z,{heading:"Account",links:[{name:"Dashboard",href:q.dashboard.root},{name:"User",href:q.dashboard.user.root},{name:"Account"}],sx:{mb:{xs:3,md:5}}}),e.jsx(oe,{value:t,onChange:r,sx:{mb:{xs:3,md:5}},children:ue.map(c=>e.jsx(ie,{label:c.label,icon:c.icon,value:c.value},c.value))}),t==="general"&&e.jsx(ce,{}),t==="billing"&&e.jsx(O,{plans:J,cards:K,invoices:Q,addressBook:X}),t==="notifications"&&e.jsx(de,{}),t==="social"&&e.jsx(U,{socialLinks:Y.socialLinks}),t==="security"&&e.jsx(me,{})]})}function Pe(){return e.jsxs(e.Fragment,{children:[e.jsx(Z,{children:e.jsx("title",{children:" Dashboard: Account Settings"})}),e.jsx(pe,{})]})}export{Pe as default};
