import{J as t,r as f,j as e,x as O,a3 as K,ar as U,G as h,z as H,as as Q,c as F,A as X,E as B,n as L,d as I,b6 as M,b7 as Z,h as A,L as ee,I as te,ak as re,at as V,w as j,B as W,M as ae,s as se,T as w,aK as E,F as q,aO as ne,aP as _,t as $,v as z,aM as oe,k as ie,b8 as le,aj as ce}from"./index-e20cc903.js";import{C as de}from"./confirm-dialog-a6322c3a.js";import{b as ue,c as d}from"./TableRow-43116194.js";t.arrayOf(t.string),t.number,t.object;const pe=f.forwardRef(({colors:u,selected:a,onSelectColor:b,limit:k="auto",sx:p,...v},m)=>{const r=typeof a=="string",g=f.useCallback(o=>{if(r)o!==a&&b(o);else{const l=a!=null&&a.includes(o)?a.filter(i=>i!==o):[...a,o];b(l)}},[b,a,r]);return e.jsx(O,{ref:m,direction:"row",display:"inline-flex",sx:{flexWrap:"wrap",...k!=="auto"&&{width:k*36,justifyContent:"flex-end"},...p},...v,children:u==null?void 0:u.map(o=>{const l=r?a===o:a==null?void 0:a.includes(o);return console.log(o),e.jsx(K,{sx:{width:36,height:36,borderRadius:"50%"},onClick:()=>{g(o)},children:e.jsx(O,{alignItems:"center",justifyContent:"center",sx:{width:20,height:20,bgcolor:o,borderRadius:"50%",border:i=>`solid 1px ${U(i.palette.grey[500],.16)}`,...l&&{transform:"scale(1.3)",transition:i=>i.transitions.create("all",{duration:i.transitions.duration.shortest})}},children:e.jsx(h,{width:l?12:0,icon:"eva:checkmark-fill",sx:{transition:i=>i.transitions.create("all",{duration:i.transitions.duration.shortest})}})})},o)})})});pe.propTypes={colors:t.oneOfType([t.string,t.arrayOf(t.string)]),limit:t.number,onSelectColor:t.func,selected:t.oneOfType([t.string,t.arrayOf(t.string)]),sx:t.object};t.object;t.object;t.bool,t.array;t.func,t.string,t.array;t.bool,t.func,t.func,t.bool,t.object,t.func,t.array,t.func,t.array,t.array,t.arrayOf(t.string);t.func,t.oneOf(["min","max"]),t.arrayOf(t.number);t.bool,t.object,t.func,t.number,t.func;t.node,t.string,t.object;t.object,t.string,t.object;function he({row:u,selected:a,onSelectRow:b,onDeleteRow:k,onEditRow:p,fetchProduct:v}){const{id:m,name:r,salePrice:g,category:o,quantity:l,createdAt:i,inventoryType:S,images:G,regularPrice:D,status:C,track:N,type:P}=u,[Y,T]=f.useState(!1),[c,x]=f.useState({name:r,salePrice:g,quantity:l,regularPrice:D,status:C,track:N}),J=async()=>{try{if(c.salePrice>=c.regularPrice)return alert("Sale price must be less than the regular price");const s=await ie.post(`/products/quick_edit/${m}`,c);alert("Product Updated"),v(),T(!1)}catch{}},R=H(),y=Q();return e.jsxs(e.Fragment,{children:[e.jsxs(ue,{hover:!0,selected:a,children:[e.jsx(d,{padding:"checkbox",children:e.jsx(F,{checked:a,onClick:b})}),e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(X,{alt:r,src:G[0],variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(B,{disableTypography:!0,primary:e.jsx(L,{to:`/dashboard/product/${m}/edit`,noWrap:!0,color:"inherit",variant:"subtitle2",style:{cursor:"pointer",color:"black"},children:r}),secondary:e.jsx(I,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:o})})]}),e.jsx(d,{children:e.jsx(B,{primary:M(new Date(i),"dd MMM yyyy"),secondary:M(new Date(i),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsx(d,{children:P}),e.jsxs(d,{sx:{typography:"caption",color:"text.secondary"},children:[e.jsx(Z,{value:l*100/l,variant:"determinate",color:S==="out of stock"&&"error"||S==="low stock"&&"warning"||"success",sx:{mb:1,height:6,maxWidth:80}}),!!l&&l," ",S]}),e.jsx(d,{children:P==="Simple"&&A(D)}),e.jsx(d,{children:P==="Simple"&&A(g)}),e.jsx(d,{children:e.jsx(ee,{variant:"soft",color:C==="Published"&&"info"||"default",children:C})}),e.jsx(d,{align:"center",children:P==="Simple"&&e.jsx(te,{icon:"mdi:magic",cursor:"pointer",width:25,color:"#086c9c",onClick:()=>{if(C==="In Revision"){alert("You cannot edit this product while it is under review. Once the admin has completed the review, you will be able to make edits.");return}T(s=>!0)}})}),e.jsx(d,{align:"right",children:e.jsx(re,{color:y.open?"primary":"default",onClick:y.onOpen,children:e.jsx(h,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(V,{open:y.open,onClose:y.onClose,arrow:"right-top",sx:{width:140},children:[e.jsx(j,{children:e.jsxs(L,{to:`/product/${m}`,target:"_blank",style:{color:"black"},children:[e.jsx(h,{icon:"solar:eye-bold"}),"View"]})}),e.jsxs(j,{onClick:()=>{if(C==="In Revision"){alert("You cannot edit this product while it is under review. Once the admin has completed the review, you will be able to make edits."),y.onClose();return}p()},children:[e.jsx(h,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(j,{onClick:()=>{R.onTrue(),y.onClose()},sx:{color:"error.main"},children:[e.jsx(h,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),e.jsx(de,{open:R.value,onClose:R.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(W,{variant:"contained",color:"error",onClick:k,children:"Delete"})}),e.jsx(ae,{open:Y,onClose:()=>T(s=>!1),"aria-labelledby":"quickedit-model","aria-describedby":"quickedit-model-description",children:e.jsxs(I,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:650,bgcolor:"background.paper",boxShadow:24,borderRadius:2,p:4},children:[e.jsxs(se,{id:"quickedit-model",variant:"h6",component:"h2",children:["Quick Edit - ",r]}),e.jsxs(I,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},mt:5,gap:5,children:[e.jsx(w,{label:"Name",value:c.name,onChange:s=>x(n=>({...n,name:s.target.value}))}),e.jsx(w,{type:"number",label:"Regular Price",value:c.regularPrice,onChange:s=>x(n=>({...n,regularPrice:s.target.value}))}),e.jsx(w,{type:"number",label:"Sale Price",value:c.salePrice,onChange:s=>x(n=>({...n,salePrice:s.target.value}))}),e.jsx(E,{label:"Track Stock",control:e.jsx(F,{checked:c.track,onChange:s=>{x(n=>({...n,track:s.target.checked})),s.target.checked?x(n=>({...n,quantity:l})):x(n=>({...n,quantity:100}))}})}),c.track?e.jsx(w,{type:"number",label:"Quantity",value:c.quantity,onChange:s=>x(n=>({...n,quantity:s.target.value}))}):e.jsx(q,{children:e.jsxs(ne,{defaultValue:"Instock",row:!0,children:[e.jsx(E,{d:!0,value:"Instock",control:e.jsx(_,{defaultChecked:!0}),label:"Instock"}),e.jsx(E,{value:"Outstock",control:e.jsx(_,{}),label:"Outstock"})]})}),e.jsxs(q,{fullWidth:!0,children:[e.jsx($,{children:"Status"}),e.jsx(z,{label:"Status",value:c.status,onChange:s=>x(n=>({...n,status:s.target.value})),children:oe.map(s=>e.jsx(j,{value:s,children:s}))})]}),e.jsx(W,{variant:"contained",color:"success",onClick:J,children:"Save Changes"})]})]})})]})}he.propTypes={onDeleteRow:t.func,onEditRow:t.func,onSelectRow:t.func,onViewRow:t.func,row:t.object,selected:t.bool};function xe({filters:u,onFilters:a,stockOptions:b,publishOptions:k}){const p=Q(),v=f.useCallback(r=>{a("name",r.target.value)},[a]),m=f.useCallback(r=>{a("stock",typeof r.target.value=="string"?r.target.value.split(","):r.target.value)},[a]);return e.jsxs(e.Fragment,{children:[e.jsxs(O,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsxs(q,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx($,{children:"Stock"}),e.jsx(z,{value:u.stock,onChange:m,input:e.jsx(le,{label:"Stock"}),renderValue:r=>r.map(g=>g).join(", "),sx:{textTransform:"capitalize"},children:b.map(r=>e.jsxs(j,{value:r.value,children:[e.jsx(F,{disableRipple:!0,size:"small",checked:u.stock.includes(r.value)}),r.label]},r.value))})]}),e.jsx(O,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:e.jsx(w,{fullWidth:!0,value:u.name,onChange:v,placeholder:"Search...",InputProps:{startAdornment:e.jsx(ce,{position:"start",children:e.jsx(h,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})]}),e.jsxs(V,{open:p.open,onClose:p.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(j,{onClick:()=>{p.onClose()},children:[e.jsx(h,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(j,{onClick:()=>{p.onClose()},children:[e.jsx(h,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(j,{onClick:()=>{p.onClose()},children:[e.jsx(h,{icon:"solar:export-bold"}),"Export"]})]})]})}xe.propTypes={filters:t.object,onFilters:t.func,publishOptions:t.array,stockOptions:t.array};export{xe as P,he as a};
