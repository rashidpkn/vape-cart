import{D as o,ax as U,aP as A,b5 as G,a8 as r,aj as L,ac as Q,a9 as P,ag as V,aH as q}from"./index-453cc783.js";import"./custom-breadcrumbs-dbab9ca9.js";import{P as B,C as W,a as H,b as Y,c as z,d as J,e as K}from"./product-details-description-364503ec.js";import{o as S}from"./orderBy-db1fa931.js";import{P as M,a as X,b as Z,c as $,d as v}from"./_product-ce672968.js";import{u as D,a as tt}from"./product-b9e1b12b.js";import{E as rt}from"./table-pagination-custom-2c2b86d1.js";import{u as et}from"./use-checkout-fd430a6f.js";import"./axios-ea0e24d9.js";import"./confirm-dialog-52b7b3a3.js";import"./form-provider-83b8adf0.js";import"./upload-avatar-57b84f32.js";import"./format-number-e90d4c93.js";import"./fade-ba5404aa.js";import"./transition-71675215.js";import"./index-495290d4.js";import"./image-274e1d6f.js";import"./TextField-7b516541.js";import"./FormControl-a79bcab4.js";import"./FormLabel-323a2df2.js";import"./Select-49289e03.js";import"./Menu-0e5d8e5b.js";import"./Checkbox-18bce187.js";import"./SwitchBase-7bf04c5e.js";import"./Chip-7e926eb1.js";import"./FormControlLabel-a5a218e9.js";import"./FormGroup-c2adca5f.js";import"./Switch-941ae74d.js";import"./editor-c36fddba.js";import"./highlight-89fb3eb6.js";import"./Slider-91448d06.js";import"./visuallyHidden-14c3de6e.js";import"./RadioGroup-749ab791.js";import"./Radio-865ba77e.js";import"./Autocomplete-bc9572e8.js";import"./Close-9586c3d0.js";import"./yup-3f2f4f35.js";import"./Card-aaec36fe.js";import"./CardHeader-3ef8434e.js";import"./LoadingButton-695d7fb2.js";import"./CircularProgress-4da26c61.js";import"./color-picker-7fef6a6f.js";import"./Fab-6e17361b.js";import"./Skeleton-de70b7a1.js";import"./Pagination-c3cee1e9.js";import"./TablePagination-1c084fea.js";import"./Rating-75b3bf5a.js";import"./DialogTitle-eb758d07.js";import"./DialogContent-54fc26e0.js";import"./DialogActions-d98e60a6.js";import"./lightbox-2502c499.js";import"./carousel-arrow-index-1ae5e025.js";import"./use-carousel-eed5f8db.js";import"./markdown-4d07cfd9.js";import"./_baseEach-cb63ac40.js";import"./index-47f153bd.js";function ot(t,a=500){const[s,c]=o.useState(t);return o.useEffect(()=>{const l=setTimeout(()=>{c(t)},a);return()=>{clearTimeout(l)}},[t,a]),s}const R={gender:[],colors:[],rating:"",category:"all",priceRange:[0,200]};function st(){const t=U(),{checkout:a}=et(),s=A(),[c,l]=o.useState("featured"),[f,h]=o.useState(""),m=ot(f),[n,p]=o.useState(R),{productsLoading:e,productsEmpty:d}=D(),{searchResults:u,searchLoading:F}=tt(m),[T,b]=o.useState({});o.useEffect(()=>{(async()=>{try{const{data:{products:x,count:y}}=await Y.get("products");b(x)}catch{alert("error Occure")}})()},[]);const j=o.useCallback((i,x)=>{p(y=>({...y,[i]:x}))},[]),O=it({inputData:T,filters:n,sortBy:c}),g=!G(R,n),E=!O.length&&g,I=o.useCallback(i=>{l(i)},[]),_=o.useCallback(i=>{h(i)},[]),C=o.useCallback(()=>{p(R)},[]),N=r.jsxs(P,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},children:[r.jsx(z,{query:m,results:u,onSearch:_,loading:F,hrefItem:i=>V.product.details(i)}),r.jsxs(P,{direction:"row",spacing:1,flexShrink:0,children:[r.jsx(J,{open:s.value,onOpen:s.onTrue,onClose:s.onFalse,filters:n,onFilters:j,canReset:g,onResetFilters:C,colorOptions:M,ratingOptions:X,genderOptions:Z,categoryOptions:["all",...$]}),r.jsx(K,{sort:c,onSort:I,sortOptions:v})]})]}),k=r.jsx(B,{filters:n,onFilters:j,canReset:g,onResetFilters:C,results:O.length}),w=r.jsx(rt,{filled:!0,title:"No Data",sx:{py:10}});return r.jsxs(L,{maxWidth:t.themeStretch?!1:"lg",sx:{mb:15},children:[r.jsx(W,{totalItems:a.totalItems}),r.jsx(Q,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Shop"}),r.jsxs(P,{spacing:2.5,sx:{mb:{xs:3,md:5}},children:[N,g&&k]}),(E||d)&&w,r.jsx(H,{products:O,loading:e})]})}function it({inputData:t,filters:a,sortBy:s}){const{gender:c,category:l,colors:f,priceRange:h,rating:m}=a,n=h[0],p=h[1];return s==="featured"&&(t=S(t,["totalSold"],["desc"])),s==="newest"&&(t=S(t,["createdAt"],["desc"])),s==="priceDesc"&&(t=S(t,["price"],["desc"])),s==="priceAsc"&&(t=S(t,["price"],["asc"])),c.length&&(t=t.filter(e=>c.includes(e.gender))),l!=="all"&&(t=t.filter(e=>e.category===l)),f.length&&(t=t.filter(e=>e.colors.some(d=>f.includes(d)))),(n!==0||p!==200)&&(t=t.filter(e=>e.price>=n&&e.price<=p)),m&&(t=t.filter(e=>{const d=u=>u==="up4Star"?4:u==="up3Star"?3:u==="up2Star"?2:1;return e.totalRatings>d(m)})),t}function ar(){return r.jsxs(r.Fragment,{children:[r.jsx(q,{children:r.jsx("title",{children:" Product: Shop"})}),r.jsx(st,{})]})}export{ar as default};
