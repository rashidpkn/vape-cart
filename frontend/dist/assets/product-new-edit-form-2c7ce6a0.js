import{F as i,j as e,ba as ue,aO as he,b5 as xe,bb as be,bc as ge,aw as ie,aA as w,b2 as je,ax as d,T as u,af as B,S as f,B as y,bd as $,be as D,ah as Se,bf as fe,ao as ne,ap as c,aj as ye,bg as Z,bh as W,bi as Ce,bj as Fe,bk as ee,al as N}from"./index-f5777b63.js";import{c as ke,a as g,b as Y,d as J,u as ve,R as ae,F as Ae,e as T,f as Be,g as Te,h as P}from"./form-provider-2043ae28.js";import{o as we,L as De}from"./yup-1137ca92.js";import{C as q}from"./CardHeader-98560465.js";let se=!1;const Ie=i.forwardRef(function(r,F){return se||(console.warn(["MUI: The Autocomplete component was moved from the lab to the core.","","You should use `import { Autocomplete } from '@mui/material'`","or `import Autocomplete from '@mui/material/Autocomplete'`"].join(`
`)),se=!0),e.jsx(ue,he({ref:F},r))}),Re=["Simple","Variable"],Ee=["Disposables","Vape Liquids","Salt Nicotine","Accessories",,"Vape Devices","Pod Systems","Nicotine Pouches","Pods & Coils","Batteries","Tanks","Others"],Le=["New Collection","Limited Edition","Bestseller","Exclusive","Hot Deal","Trending Now","Seasonal Special","Eco-Friendly","On Sale","Clearance","Customer Favorite","Top Rated","Holiday Special","Gift Ideas","Must-Have","Limited Stock","Featured Product","Editor's Pick","Just Arrived","Back in Stock","Special Offer","Staff Picks","Flash Sale","Popular Choice","Best Value"],Ve=["SMOK","Vaporesso","GeekVape","Voopoo","Innokin","Uwell","Aspire","Eleaf","Lost Vape","Joyetech","Wismec","Freemax","Suorin","iJoy","Rincoe","Augvape","Vandy Vape","OBS","Hellvape","Teslacigs","Artery","Dovpo","Vaptio","Kangertech","Digiflavor","Sigelei","Smoant","Pioneer4You","Vapor Storm","Hugo Vapor"],ze=["Bottle Size","Puffs","Flavour","Nicotine Strength","Color","Batteries"],C={bottleSize:[10,15,30,50,60,100,120].map(a=>`${a} ml`),puffs:[500,1e3,1500,2e3,2500,3e3,3500,4e3,4500,5e3,5500,6500,7e3,7500,8e3,8500,9e3,9500,1e4].map(a=>`${a} puffs`),flavour:["Strawberry","Blueberry","Raspberry","Watermelon","Apple","Peach","Pineapple","Grape","Mango","Kiwi","Cherry","Banana","Lemon","Lime","Orange","Mixed Berries","Menthol","Peppermint","Spearmint","Ice Menthol","Minty Menthol","Cool Mint","Traditional Tobacco","American Blend","Virginia Tobacco","Turkish Tobacco","Cuban Cigar","Pipe Tobacco","Vanilla Custard","Chocolate Cake","Caramel","Butterscotch","Cheesecake","Tiramisu","Maple Syrup","Cookies and Cream","Pudding","Ice Cream","Bubblegum","Cotton Candy","Gummy Bear","Candy Cane","Marshmallow","Rock Candy","Toffee","Coffee","Cappuccino","Espresso","Latte","Cola","Energy Drink","Mojito","Lemonade","Iced Tea","Smoothie","Creamy Vanilla","Strawberry Cream","Coconut Cream","Hazelnut Cream","Irish Cream","Sugar Cookie","Blueberry Muffin","Donut","Pancake","Waffle","Pie Crust","Sour Apple","Sour Watermelon","Sour Cherry","Sour Lemon","Almond","Hazelnut","Peanut Butter","Pistachio","Walnut","Cinnamon","Clove","Gingerbread","Green Tea","Chamomile","Lavender","Eucalyptus"],nicotineStrength:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50].map(a=>`${a} mg`),color:["Black","Silver","White","Blue","Red","Green","Pink","Purple","Gold","Rainbow/Multicolor","Gunmetal/Gray","Yellow","Orange","Brown","Clear/Transparent"],batteries:["Single","Dual","Built-in","Triple","Quad"]};function Me({currentProduct:a}){const[r,F]=i.useState([]),O=xe(),p=be("up","md"),{enqueueSnackbar:U}=ge(),{user:h}=ie(),I=ke().shape({name:g().required("Name is required"),subDescription:g().required("Short description is required"),content:g(),images:Y().min(1,"Image is required"),type:g(),category:g().required("Category is required"),tags:Y(),SKU:g().required("SKU is required"),brand:g().required("brand is required"),attributes:Y(),quantity:J(),regularPrice:J(),salePrice:J().moreThan(0,"Price should not be AED 0.00")}),j=i.useMemo(()=>({id:(a==null?void 0:a.id)||"",name:(a==null?void 0:a.name)||"",subDescription:(a==null?void 0:a.subDescription)||"",content:(a==null?void 0:a.content)||"",images:(a==null?void 0:a.images)||[],type:(a==null?void 0:a.type)||"Simple",category:(a==null?void 0:a.category)||"None",tags:(a==null?void 0:a.tags)||[],SKU:(a==null?void 0:a.SKU)||"",brand:(a==null?void 0:a.brand)||"SMOK",attributes:(a==null?void 0:a.attributes)||[],quantity:(a==null?void 0:a.quantity)||0,regularPrice:(a==null?void 0:a.regularPrice)||0,salePrice:(a==null?void 0:a.salePrice)||0}),[a]),[x,M]=i.useState({"Bottle Size":[],Puffs:[]}),[S,R]=i.useState([]),k=ve({resolver:we(I),defaultValues:j}),{reset:v,watch:E,setValue:b,handleSubmit:L,formState:{isSubmitting:G}}=k,l=E(),A=i.useCallback(async()=>{const{data:{products:s}}=await w.get("/products",{params:{name:l.name}});F(s)},[l.name]);i.useEffect(()=>{A()},[l.name]),i.useEffect(()=>{a&&v(j)},[a,j,v]);const K=L(async s=>{console.log(s);try{a?await w.patch("products",{...s,username:h.displayName,userId:h.id,storeName:h.storeName}):await w.post("products",{...s,username:h.displayName,userId:h.id,storeName:h.storeName}),v(),U(a?"Update success!":"Create success!"),O.push(je.dashboard.product.root)}catch(t){console.log(t)}}),m=i.useCallback(s=>{const t=l.images||[],o=s.map(n=>Object.assign(n,{preview:URL.createObjectURL(n)}));b("images",[...t,...o],{shouldValidate:!0})},[b,l.images]),V=i.useCallback(s=>{var o;const t=l.images&&((o=l.images)==null?void 0:o.filter(n=>n!==s));b("images",t)},[b,l.images]),H=i.useCallback(()=>{b("images",[])},[b]),le=e.jsxs(e.Fragment,{children:[p&&e.jsxs(d,{md:4,children:[e.jsx(u,{variant:"h6",sx:{mb:.5},children:"Details"}),e.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:"Title, short description, image..."})]}),e.jsx(d,{xs:12,md:12,children:e.jsxs(B,{children:[!p&&e.jsx(q,{title:"Details"}),e.jsxs(f,{spacing:3,sx:{p:3},children:[e.jsx(T,{name:"name",label:"Product Name"}),e.jsx(T,{name:"subDescription",label:"Sub Description",multiline:!0,rows:4}),e.jsxs(f,{spacing:1.5,children:[e.jsx(u,{variant:"subtitle2",children:"Content"}),e.jsx(Be,{simple:!0,name:"content"})]}),e.jsxs(f,{spacing:1.5,children:[e.jsx(u,{variant:"subtitle2",children:"Images"}),e.jsx(Te,{multiple:!0,name:"images",maxSize:3145728,onDrop:m,onRemove:V,onRemoveAll:H,onUpload:async s=>{try{const t=new FormData;l.images.forEach(n=>{t.append("images",n)});const{data:o}=await w.post("upload",t);b("images",o),alert("Image upload complete.")}catch{alert(" Image upload failed, try again.")}}})]})]})]})})]}),oe=e.jsxs(e.Fragment,{children:[p&&e.jsxs(d,{md:4,children:[e.jsx(u,{variant:"h6",sx:{mb:.5},children:"Key Properties"}),e.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:"Additional functions and attributes..."})]}),e.jsx(d,{xs:12,md:12,children:e.jsxs(B,{children:[!p&&e.jsx(q,{title:"Properties"}),e.jsx(f,{spacing:3,sx:{p:3},children:e.jsxs(y,{columnGap:2,rowGap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsx(P,{native:!0,name:"type",label:"Product Type",InputLabelProps:{shrink:!0},children:Re.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx(P,{native:!0,name:"category",label:"Category",InputLabelProps:{shrink:!0},children:Ee.map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx(ae,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,options:Le.map(s=>s),getOptionLabel:s=>s,renderOption:(s,t)=>i.createElement("li",{...s,key:t},t),renderTags:(s,t)=>s.map((o,n)=>i.createElement($,{...t({index:n}),key:o,label:o,size:"small",color:"info",variant:"soft"}))}),e.jsx(T,{name:"SKU",label:"Product SKU"}),e.jsx(P,{native:!0,name:"brand",label:"Brand",InputLabelProps:{shrink:!0},children:Ve.map(s=>e.jsx("option",{value:s,children:s},s))})]})})]})})]}),re=(s,t,o)=>{M(n=>({...n,[o]:t}))},ce=e.jsxs(e.Fragment,{children:[p&&e.jsxs(d,{md:4,children:[e.jsx(u,{variant:"h6",sx:{mb:.5},children:"Product Attributes"}),e.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:"Additional functions and attributes..."})]}),e.jsx(d,{xs:12,md:12,children:e.jsxs(B,{children:[!p&&e.jsx(q,{title:"Attributes"}),e.jsx(f,{spacing:3,sx:{p:3},children:e.jsxs(y,{columnGap:2,rowGap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsx(y,{sx:{gridColumn:"span 2 "},children:e.jsx(ae,{name:"attributes",label:"Attributes",placeholder:"+ Attributes",multiple:!0,options:ze.map(s=>s),getOptionLabel:s=>s,renderOption:(s,t)=>i.createElement("li",{...s,key:t},t),renderTags:(s,t)=>s.map((o,n)=>i.createElement($,{...t({index:n}),key:o,label:o,size:"small",color:"info",variant:"soft"}))})}),l.attributes.map(s=>e.jsx(y,{sx:{gridColumn:"span 1 "},children:e.jsx(Ie,{multiple:!0,freeSolo:!0,options:s==="Bottle Size"&&C.bottleSize||s==="Puffs"&&C.puffs||s==="Flavour"&&C.flavour||s==="Nicotine Strength"&&C.nicotineStrength||s==="Color"&&C.color||s==="Batteries"&&C.batteries||[],value:x[s],onChange:(t,o)=>{if(re(t,o,s),console.log(),o.length>=2){if(S.find(n=>n===s))return;R(n=>[...n,s])}else R(n=>n.filter(_=>_!==s))},renderInput:t=>e.jsx(D,{...t,label:s,placeholder:s}),renderTags:(t,o)=>t.map((n,_)=>i.createElement($,{...o({index:_}),key:n,label:n,size:"small",color:"info",variant:"soft"}))})},s))]})})]})})]}),me=e.jsxs(e.Fragment,{children:[p&&e.jsxs(d,{md:4,children:[e.jsx(u,{variant:"h6",sx:{mb:.5},children:"Pricing"}),e.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:"Price related inputs"})]}),e.jsx(d,{xs:12,md:12,children:e.jsxs(B,{children:[!p&&e.jsx(q,{title:"Pricing"}),e.jsxs(f,{spacing:3,sx:{p:3},children:[e.jsx(T,{name:"regularPrice",label:"Regular Price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(Z,{position:"start",children:e.jsx(y,{component:"span",sx:{color:"text.disabled"},children:"AED"})})}}),e.jsx(T,{name:"salePrice",label:"Sale Price",placeholder:"0.00",type:"number",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(Z,{position:"start",children:e.jsx(y,{component:"span",sx:{color:"text.disabled"},children:"AED"})})}})]})]})})]}),de=e.jsx(e.Fragment,{children:e.jsx(d,{xs:12,md:8,sx:{display:"flex",alignItems:"center"},children:e.jsx(De,{type:"submit",variant:"contained",size:"large",loading:G,children:a?"Save Changes":"Create Product"})})}),Q=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];let z=1,X=0;const pe=e.jsxs(e.Fragment,{children:[p&&e.jsx(d,{md:4,children:e.jsx(u,{variant:"h6",sx:{mb:.5},children:"Variation Table"})}),e.jsx(d,{xs:12,md:12,children:e.jsx(B,{children:e.jsxs(Se,{children:[e.jsx(fe,{children:e.jsxs(ne,{children:[e.jsx(c,{children:"ID"}),e.jsx(c,{width:150,children:"SKU"}),e.jsx(c,{width:150,children:"Attributes"}),e.jsx(c,{width:150,children:"Track Order"}),e.jsx(c,{children:"Stock"}),e.jsx(c,{children:"Regular Price"}),e.jsx(c,{children:"Sales Price"}),e.jsx(c,{children:"Image"}),e.jsx(c,{width:150,children:"Add Product"})]})}),e.jsxs(ye,{children:[e.jsx(te,{counter:z++,counter2:X++,skuAlpha:Q,va:"Parent",values:l,variables:x},z),S==null?void 0:S.map(s=>x[s].map(t=>e.jsx(te,{counter:z++,counter2:X++,skuAlpha:Q,va:t,values:l,variables:x},z)))]})]})})})]});return e.jsx(Ae,{methods:k,onSubmit:K,children:e.jsxs(d,{container:!0,spacing:3,children:[le,oe,ce,l.type==="Simple"&&me,l.type==="Variable"&&pe,de]})})}function te({counter:a,values:r,skuAlpha:F,counter2:O,va:p,variables:U}){const{user:h}=ie(),I=r.SKU+"-"+F[O],j=r.name+"-"+p,[x,M]=i.useState(!0),[S,R]=i.useState("instock"),[k,v]=i.useState(0),[E,b]=i.useState(0),[L,G]=i.useState(0),[l,A]=i.useState("pending"),K=async()=>{const m=/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F700}-\u{1F77F}\u{1F780}-\u{1F7FF}\u{1F800}-\u{1F8FF}\u{1F900}-\u{1F9FF}\u{1FA00}-\u{1FA6F}\u{1FA70}-\u{1FAFF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u{2B50}\u{2B55}\u{231A}-\u{231B}\u{23E9}-\u{23EC}\u{23F0}\u{23F3}\u{25AA}-\u{25AB}\u{25B6}\u{25C0}\u{25FB}-\u{25FE}\u{2B1B}-\u{2B1C}\u{2934}-\u{2935}\u{2B05}-\u{2B07}\u{2194}-\u{2199}\u{21A9}-\u{21AA}\u{2B06}\u{2B07}\u{2B1B}\u{2B1C}]/u,V=/\d{4,}/;if(m.test(r.subDescription)||m.test(r.content)){alert("Your content contain emojis, Please remove emojis");return}if(V.test(r.subDescription)||V.test(r.content)){alert("Your content contain continues 4 digit number, Please remove");return}if(l==="pending"){A("loading");try{await w.post("/products",{username:h.displayName,userId:h.id,storeName:h.storeName,name:j,subDescription:r.subDescription,content:r.content,images:r.images,type:r.type,category:r.category,tags:r.tags,parentSku:r.SKU,brand:r.brand,attributes:r.attributes,variables:U,SKU:I,track:x,quantity:L,regularPrice:k,salePrice:E}),A("success")}catch(H){console.log("Product Creation failed :"+H),A("failed")}}};return e.jsxs(ne,{children:[e.jsx(c,{children:a}),e.jsx(c,{children:I}),e.jsx(c,{children:j}),e.jsx(c,{children:e.jsx(W,{label:"",control:e.jsx(Ce,{checked:x,onChange:m=>M(m.target.checked)})})}),e.jsxs(c,{children:[x&&e.jsx(D,{size:"small",label:"Quantity",type:"number",onChange:m=>G(m.target.value),value:L}),!x&&e.jsxs(Fe,{"aria-label":"Stock",name:"Stock",value:S,onChange:m=>R(m.target.value),children:[e.jsx(W,{value:"instock",control:e.jsx(ee,{}),label:"Instock"}),e.jsx(W,{value:"outstock",control:e.jsx(ee,{}),label:"Outstock"})]})]}),e.jsx(c,{children:e.jsx(D,{size:"small",label:"Price",type:"number",onChange:m=>v(m.target.value),value:k})}),e.jsx(c,{children:e.jsx(D,{size:"small",label:"Price",type:"number",onChange:m=>b(m.target.value),value:E})}),e.jsx(c,{children:e.jsx(D,{size:"small",label:"Image",type:"file"})}),e.jsxs(c,{children:[l==="pending"&&e.jsx(N,{color:"success",variant:"contained",size:"small",onClick:K,children:"Add Product"}),l==="loading"&&e.jsx(N,{color:"success",variant:"contained",size:"small",children:"Loading"}),l==="success"&&e.jsx(N,{color:"success",variant:"contained",size:"small",children:"Product Created"}),l==="failed"&&e.jsx(N,{color:"success",variant:"contained",size:"small",children:"Product creation failed"})]})]})}export{Me as P};
