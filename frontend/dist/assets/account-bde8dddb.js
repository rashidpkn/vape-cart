import{cd as k,ax as z,ce as H,cf as M,cg as Y,F as w,aB as J,j as e,ay as g,af as y,T as D,ch as K,B as F,S as j,ao as E,bf as Q,an as l,as as X,b2 as v,at as B,au as f,ae as m,b7 as N,ag as L,am as R,bL as C,aI as Z,aV as ee,aW as se,aG as ae,b3 as q,b4 as ne,b5 as oe,ci as re,cj as te,ck as ie,cl as le,c2 as ce,W as de}from"./index-1fca97c3.js";import{c as O,f as h,d as me,g as P,F as S,h as ue,R as x,C as pe,i as xe}from"./form-provider-6dfbb8b0.js";import{L as T,o as _}from"./yup-a5c831e6.js";import"./plan-premium-icon-7ca5b83c.js";import{a as he,b as be}from"./address-list-dialog-0b28ce33.js";import{P as je}from"./payment-new-card-dialog-3e9c66e5.js";import{F as ge,S as we}from"./Switch-ff24d672.js";import"./image-cb454ea8.js";import"./CircularProgress-7ff08f69.js";import"./DialogTitle-31a73ac3.js";import"./DialogContent-61c12853.js";import"./transition-bee6630b.js";function ye(){const{enqueueSnackbar:n}=k(),{user:s}=z(),c=O().shape({displayName:h().required("Name is required"),email:h().required("Email is required").email("Email must be a valid email address"),storeName:h().required("Store name is required"),contactPersonInTouch:h().required("Contact person in touch is required"),tradeLicense:me().nullable().required("Trade License is required"),phoneNumber:h().required("Phone number is required"),address:h().required("Pick up Address is required"),workingTime:h().required("working Time is required"),workingDate:h().required("working Date is required")}),a={displayName:(s==null?void 0:s.displayName)||"",email:(s==null?void 0:s.email)||"",storeName:(s==null?void 0:s.storeName)||"",tradeLicense:(s==null?void 0:s.tradeLicense)||"",contactPersonInTouch:(s==null?void 0:s.contactPersonInTouch)||null,phoneNumber:(s==null?void 0:s.phoneNumber)||"",address:(s==null?void 0:s.address)||"",workingTime:(s==null?void 0:s.workingTime)||"",workingDate:(s==null?void 0:s.workingDate)||""},i=P({resolver:_(c),defaultValues:a}),{setValue:p,handleSubmit:b,formState:{isSubmitting:o}}=i,d=b(async t=>{try{const u=await H(M,"users",s.uid);await Y(u,t),n("Update success!")}catch(u){console.error(u)}}),r=w.useCallback(async t=>{const u=t[0];Object.assign(u,{preview:URL.createObjectURL(u)});const I=new FormData;I.append("images",u);const{data:A}=await J.post("/upload",I);console.log(A),A.length&&p("tradeLicense",A[0],{shouldValidate:!0})},[p]);return e.jsx(S,{methods:i,onSubmit:d,children:e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{xs:12,md:4,children:e.jsx(y,{sx:{pt:10,pb:5,px:3,textAlign:"center"},children:e.jsx(ue,{name:"tradeLicense",maxSize:3145728,onDrop:r,helperText:e.jsxs(D,{variant:"caption",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"text.disabled"},children:["Trade License",e.jsx("br",{})," max size of ",K(3145728)]})})})}),e.jsx(g,{xs:12,md:8,children:e.jsxs(y,{sx:{p:3},children:[e.jsxs(F,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(x,{name:"displayName",label:"Name"}),e.jsx(x,{name:"email",label:"Email Address"}),e.jsx(x,{name:"storeName",label:"Store Name"}),e.jsx(x,{name:"contactPersonInTouch",label:"Contact person in touch"}),e.jsx(x,{name:"phoneNumber",label:"Phone Number"}),e.jsx(x,{name:"address",label:"Pick up address"}),e.jsx(x,{name:"workingTime",label:"Working Time"}),e.jsx(x,{name:"workingDate",label:"Working Date"})]}),e.jsx(j,{spacing:3,alignItems:"flex-end",sx:{mt:3},children:e.jsx(T,{type:"submit",variant:"contained",loading:o,children:"Save Changes"})})]})})]})})}function U({card:n,sx:s,...c}){const a=E();return e.jsxs(e.Fragment,{children:[e.jsxs(j,{spacing:1,component:Q,variant:"outlined",sx:{p:2.5,width:1,position:"relative",...s},...c,children:[e.jsxs(j,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(l,{icon:n.cardType==="visa"&&"logos:visa"||"logos:mastercard",width:36}),n.primary&&e.jsx(X,{color:"info",children:"Default"})]}),e.jsx(D,{variant:"subtitle2",children:n.cardNumber}),e.jsx(v,{onClick:a.onOpen,sx:{top:8,right:8,position:"absolute"},children:e.jsx(l,{icon:"eva:more-vertical-fill"})})]}),e.jsxs(B,{open:a.open,onClose:a.onClose,children:[e.jsxs(f,{onClick:a.onClose,children:[e.jsx(l,{icon:"eva:star-fill"}),"Set as primary"]}),e.jsxs(f,{onClick:a.onClose,children:[e.jsx(l,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(f,{onClick:a.onClose,sx:{color:"error.main"},children:[e.jsx(l,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})]})}U.propTypes={card:m.object,sx:m.object};m.array,m.func,m.func,m.bool,m.func;m.array,m.array,m.array;function G({cards:n}){const s=N();return e.jsxs(e.Fragment,{children:[e.jsxs(y,{sx:{my:3},children:[e.jsx(L,{title:"Payment Method",action:e.jsx(R,{size:"small",color:"primary",startIcon:e.jsx(l,{icon:"mingcute:add-line"}),onClick:s.onTrue,children:"New Card"})}),e.jsx(F,{rowGap:2.5,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},sx:{p:3},children:n.map(c=>e.jsx(U,{card:c},c.id))})]}),e.jsx(je,{open:s.value,onClose:s.onFalse})]})}G.propTypes={cards:m.array};function V({addressBook:n}){const[s,c]=w.useState(""),a=E(),i=N(),p=w.useCallback(d=>{console.info("ADDRESS",d)},[]),b=w.useCallback((d,r)=>{a.onOpen(d),c(r)},[a]),o=w.useCallback(()=>{a.onClose(),c("")},[a]);return e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[e.jsx(L,{title:"Address Book",action:e.jsx(R,{size:"small",color:"primary",startIcon:e.jsx(l,{icon:"mingcute:add-line"}),onClick:i.onTrue,children:"Address"})}),e.jsx(j,{spacing:2.5,sx:{p:3},children:n.map(d=>e.jsx(he,{variant:"outlined",address:d,action:e.jsx(v,{onClick:r=>{b(r,`${d.id}`)},sx:{position:"absolute",top:8,right:8},children:e.jsx(l,{icon:"eva:more-vertical-fill"})}),sx:{p:2.5,borderRadius:1}},d.id))})]}),e.jsxs(B,{open:a.open,onClose:o,children:[e.jsxs(f,{onClick:()=>{o(),console.info("SET AS PRIMARY",s)},children:[e.jsx(l,{icon:"eva:star-fill"}),"Set as primary"]}),e.jsxs(f,{onClick:()=>{o(),console.info("EDIT",s)},children:[e.jsx(l,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(f,{onClick:()=>{o(),console.info("DELETE",s)},sx:{color:"error.main"},children:[e.jsx(l,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),e.jsx(be,{open:i.value,onClose:i.onFalse,onCreate:p})]})}V.propTypes={addressBook:m.array};function W({cards:n,plans:s,invoices:c,addressBook:a}){return e.jsx(g,{container:!0,spacing:5,disableEqualOverflow:!0,children:e.jsxs(g,{xs:12,md:8,children:[e.jsx(G,{cards:n}),e.jsx(V,{addressBook:a})]})})}W.propTypes={addressBook:m.array,cards:m.array,invoices:m.array,plans:m.array};function $({socialLinks:n}){const{enqueueSnackbar:s}=k(),c={facebook:n.facebook,instagram:n.instagram,linkedin:n.linkedin,twitter:n.twitter},a=P({defaultValues:c}),{handleSubmit:i,formState:{isSubmitting:p}}=a,b=i(async o=>{try{await new Promise(d=>setTimeout(d,500)),s("Update success!"),console.info("DATA",o)}catch(d){console.error(d)}});return e.jsx(S,{methods:a,onSubmit:b,children:e.jsxs(j,{component:y,spacing:3,sx:{p:3},children:[Object.keys(n).map(o=>e.jsx(x,{name:o,InputProps:{startAdornment:e.jsx(C,{position:"start",children:e.jsx(l,{width:24,icon:o==="facebook"&&"eva:facebook-fill"||o==="instagram"&&"ant-design:instagram-filled"||o==="linkedin"&&"eva:linkedin-fill"||o==="twitter"&&"eva:twitter-fill"||"",color:o==="facebook"&&"#1877F2"||o==="instagram"&&"#DF3E30"||o==="linkedin"&&"#006097"||o==="twitter"&&"#1C9CEA"||""})})}},o)),e.jsx(T,{type:"submit",variant:"contained",loading:p,sx:{ml:"auto"},children:"Save Changes"})]})})}$.propTypes={socialLinks:m.object};const fe=[{subheader:"Activity",caption:"",items:[{id:"activity_comments",label:"Email me when customer makes a purchase."},{id:"activity_answers",label:"Email me when customer cancels an order."},{id:"activityFollows",label:"Email me when order is delivered."},{id:"application_news",label:"Email me when  someone leaves a review."},{id:"application_product",label:"Email me when stock is below 5."}]}];function ve(){const{enqueueSnackbar:n}=k(),s=P({defaultValues:{selected:["activity_comments","application_product"]}}),{watch:c,control:a,handleSubmit:i,formState:{isSubmitting:p}}=s,b=c(),o=i(async r=>{try{await new Promise(t=>setTimeout(t,500)),n("Update success!"),console.info("DATA",r)}catch(t){console.error(t)}}),d=(r,t)=>r.includes(t)?r.filter(u=>u!==t):[...r,t];return e.jsx(S,{methods:s,onSubmit:o,children:e.jsxs(j,{component:y,spacing:3,sx:{p:3},children:[fe.map(r=>e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{xs:12,md:4,children:e.jsx(Z,{primary:r.subheader,secondary:r.caption,primaryTypographyProps:{typography:"h6",mb:.5},secondaryTypographyProps:{component:"span"}})}),e.jsx(g,{xs:12,md:8,children:e.jsx(j,{spacing:1,sx:{p:3,borderRadius:2,bgcolor:"background.neutral"},children:e.jsx(pe,{name:"selected",control:a,render:({field:t})=>e.jsx(e.Fragment,{children:r.items.map(u=>e.jsx(ge,{label:u.label,labelPlacement:"start",control:e.jsx(we,{checked:t.value.includes(u.id),onChange:()=>t.onChange(d(b.selected,u.id))}),sx:{m:0,width:1,justifyContent:"space-between"}},u.id))})})})})]},r.subheader)),e.jsx(T,{type:"submit",variant:"contained",loading:p,sx:{ml:"auto"},children:"Save Changes"})]})})}function Ce(){const{enqueueSnackbar:n}=k(),s=N(),c=O().shape({oldPassword:h().required("Old Password is required"),newPassword:h().required("New Password is required").min(6,"Password must be at least 6 characters").test("no-match","New password must be different than old password",(r,{parent:t})=>r!==t.oldPassword),confirmNewPassword:h().oneOf([xe("newPassword")],"Passwords must match")}),a={oldPassword:"",newPassword:"",confirmNewPassword:""},i=P({resolver:_(c),defaultValues:a}),{reset:p,handleSubmit:b,formState:{isSubmitting:o}}=i,d=b(async r=>{try{await new Promise(t=>setTimeout(t,500)),p(),n("Update success!"),console.info("DATA",r)}catch(t){console.error(t)}});return e.jsx(S,{methods:i,onSubmit:d,children:e.jsxs(j,{component:y,spacing:3,sx:{p:3},children:[e.jsx(x,{name:"oldPassword",type:s.value?"text":"password",label:"Old Password",InputProps:{endAdornment:e.jsx(C,{position:"end",children:e.jsx(v,{onClick:s.onToggle,edge:"end",children:e.jsx(l,{icon:s.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(x,{name:"newPassword",label:"New Password",type:s.value?"text":"password",InputProps:{endAdornment:e.jsx(C,{position:"end",children:e.jsx(v,{onClick:s.onToggle,edge:"end",children:e.jsx(l,{icon:s.value?"solar:eye-bold":"solar:eye-closed-bold"})})})},helperText:e.jsxs(j,{component:"span",direction:"row",alignItems:"center",children:[e.jsx(l,{icon:"eva:info-fill",width:16,sx:{mr:.5}})," Password must be minimum 6+"]})}),e.jsx(x,{name:"confirmNewPassword",type:s.value?"text":"password",label:"Confirm New Password",InputProps:{endAdornment:e.jsx(C,{position:"end",children:e.jsx(v,{onClick:s.onToggle,edge:"end",children:e.jsx(l,{icon:s.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),e.jsx(T,{type:"submit",variant:"contained",loading:o,sx:{ml:"auto"},children:"Save Changes"})]})})}const ke=[{value:"general",label:"General",icon:e.jsx(l,{icon:"solar:user-id-bold",width:24})},{value:"billing",label:"Billing",icon:e.jsx(l,{icon:"solar:bill-list-bold",width:24})},{value:"security",label:"Security",icon:e.jsx(l,{icon:"ic:round-vpn-key",width:24})}];function Pe(){const n=ee(),[s,c]=w.useState("general"),a=w.useCallback((i,p)=>{c(p)},[]);return e.jsxs(se,{maxWidth:n.themeStretch?!1:"lg",children:[e.jsx(ae,{heading:"Account",links:[{name:"Dashboard",href:q.dashboard.root},{name:"User",href:q.dashboard.user.root},{name:"Account"}],sx:{mb:{xs:3,md:5}}}),e.jsx(ne,{value:s,onChange:a,sx:{mb:{xs:3,md:5}},children:ke.map(i=>e.jsx(oe,{label:i.label,icon:i.icon,value:i.value},i.value))}),s==="general"&&e.jsx(ye,{}),s==="billing"&&e.jsx(W,{plans:re,cards:te,invoices:ie,addressBook:le}),s==="notifications"&&e.jsx(ve,{}),s==="social"&&e.jsx($,{socialLinks:ce.socialLinks}),s==="security"&&e.jsx(Ce,{})]})}function Oe(){return e.jsxs(e.Fragment,{children:[e.jsx(de,{children:e.jsx("title",{children:" Dashboard: Account Settings"})}),e.jsx(Pe,{})]})}export{Oe as default};
