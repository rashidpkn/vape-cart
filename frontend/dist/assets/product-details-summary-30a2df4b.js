import{H as P,aF as Y,j as e,B as n,au as w,S as i,bm as $,b4 as H,dr as L,bY as U,ay as Z,T as p,am as I,a as h,aY as K,ap as X,ao as _}from"./index-7327ab00.js";import{F as ee}from"./form-provider-41e81275.js";import{p as te}from"./product-details-description-7b79aff9.js";import{R as ae}from"./Rating-34a14843.js";function de({cart:re,product:g,onAddCart:C,onGotoStep:ie,disabledActions:se,setProduct:k,parentProduct:y={},...V}){const[j,c]=P.useState(1),q=Y(),{id:A,name:b,regularPrice:D,quantity:r,salePrice:l,totalRatings:R,totalReviews:T,images:F,userId:O,type:d,subDescription:f,variations:u}=g,N=e.jsxs(n,{sx:{typography:"h5"},children:[e.jsx(n,{component:"span",sx:{color:"text.disabled",textDecoration:"line-through",mr:.5},children:w(D)}),w(l)]}),Q=e.jsxs(i,{direction:"row",children:[e.jsx(p,{variant:"subtitle2",sx:{flexGrow:1},children:"Quantity"}),e.jsx(i,{spacing:1,children:e.jsxs(p,{variant:"caption",component:"div",sx:{textAlign:"right"},children:["Available: ",r||100]})})]}),B=e.jsxs(i,{direction:"row",spacing:2,children:[e.jsxs(n,{sx:{width:{sm:"100%",md:"60%"}},display:"flex",justifyItems:"center",alignItems:"center",gap:1,children:[e.jsx(h,{variant:"outlined",color:"primary",onClick:()=>{c(t=>t<=1?1:t-1)},children:"-"}),e.jsx(K,{fullWidth:!0,label:"Quantity",type:"number",inputProps:{min:1,max:r??100},onChange:t=>{c(o=>{const{value:a}=t.target;return a<=0?1:r?Math.min(r,a):Math.min(a,100)})},value:j}),e.jsx(h,{variant:"outlined",color:"primary",onClick:()=>{c(t=>t<r?t+1:t)},children:"+"})]}),e.jsx(h,{fullWidth:!0,size:"large",color:"warning",variant:"contained",startIcon:e.jsx(X,{icon:"solar:cart-plus-bold",width:24}),onClick:()=>{if(d==="Variable"&&!x){alert("Please choose a variable from the list.");return}C({id:A,name:b,price:l,images:F,subTotal:l,userId:O,quantity:j,available:r}),q(_.product.checkout)},sx:{width:{sm:"100%",md:"40%"}},children:"Add to Cart"})]}),M=!!f&&te(f),W=e.jsxs(i,{direction:"row",alignItems:"center",sx:{color:"text.disabled",typography:"body2"},children:[e.jsx(ae,{size:"small",value:R,precision:.1,readOnly:!0,sx:{mr:1}}),`(${$(T)} reviews)`]}),[x,z]=P.useState(""),E=e.jsx(n,{display:"flex",flexDirection:"column",gap:"10px",children:e.jsx(n,{children:e.jsxs(H,{fullWidth:!0,children:[e.jsx(L,{id:"variations",children:"Select Variations"}),e.jsx(U,{labelId:"variations",label:"Select Variations",value:x,onChange:t=>{z(t.target.value);const{track:o,quantity:a,regularPrice:m,salePrice:G,image:v}=g.variations.find(s=>JSON.stringify(s.attributes)===JSON.stringify(t.target.value));let J=y.name+"-"+Object.keys(t.target.value).map(s=>t.target.value[s]).join("-"),S=y.images;v&&(S=v),k(s=>({...s,track:o,quantity:a,regularPrice:m,salePrice:G,name:J,images:S}))},children:u==null?void 0:u.map((t,o)=>e.jsxs(Z,{value:t.attributes,children:[Object.keys(t.attributes).map(a=>a.replace(/([A-Z])/," $1").replace(/^./,m=>m.toUpperCase())+" : "+t.attributes[a]).join(", ")," "]},o))})]})})});return e.jsx(ee,{children:e.jsxs(i,{spacing:3,sx:{pt:3},...V,children:[e.jsxs(i,{spacing:2,alignItems:"flex-start",children:[e.jsx(p,{variant:"h5",children:b}),W,d==="Variable"&&!!x&&l!==null&&N,M]}),e.jsx(I,{sx:{borderStyle:"dashed"}}),Q,e.jsx(I,{sx:{borderStyle:"dashed"}}),d==="Variable"&&E,B]})})}export{de as P};
