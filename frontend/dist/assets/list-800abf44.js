import{j as t,ap as E,aq as A,S as I,F as l,b6 as O,aV as v,ax as V,b7 as U,b8 as q,aB as f,b3 as m,B as z,aG as H,am as C,b0 as _,an as R,af as N,b9 as W,b1 as G,b2 as K,ah as M,ai as $,aj as J,ak as Q,ba as X,W as Y}from"./index-ee67ba78.js";import{d as Z,e as ee}from"./product-details-description-98c6bdaf.js";import{a as te}from"./_product-2bc14852.js";import{S as h,u as se,f as oe,e as ae}from"./axios-8da40231.js";import{u as re,g as ne}from"./use-table-9e63a887.js";import{C as le}from"./confirm-dialog-ec4980e6.js";import{T as ie}from"./TableContainer-1e001d50.js";import"./form-provider-ced94284.js";import"./Switch-001e0c55.js";import"./transition-bee6630b.js";import"./image-b3023b50.js";import"./yup-bde7d90e.js";import"./CircularProgress-af50a818.js";import"./color-picker-97dca787.js";import"./Rating-1bc4866d.js";import"./DialogTitle-9cf121c6.js";import"./DialogContent-509c78fa.js";import"./lightbox-67a09cfe.js";import"./carousel-arrow-index-add6a353.js";function de({...o}){return t.jsx(E,{...o,children:t.jsx(A,{colSpan:12,children:t.jsxs(I,{spacing:3,direction:"row",alignItems:"center",children:[t.jsx(h,{sx:{borderRadius:1.5,width:48,height:48,flexShrink:0}}),t.jsx(h,{sx:{width:1,height:12}}),t.jsx(h,{sx:{width:180,height:12}}),t.jsx(h,{sx:{width:160,height:12}}),t.jsx(h,{sx:{width:140,height:12}}),t.jsx(h,{sx:{width:120,height:12}})]})})})}function ce(){const o=ae.product.list,{data:e,isLoading:a,error:i,isValidating:d}=se(o,oe);return l.useMemo(()=>({products:(e==null?void 0:e.products)||[],productsLoading:a,productsError:i,productsValidating:d,productsEmpty:!a&&!(e!=null&&e.products.length)}),[e==null?void 0:e.products,i,a,d])}const ue=[{id:"name",label:"Product"},{id:"createdAt",label:"Create at",width:160},{id:"inventoryType",label:"Stock",width:160},{id:"price",label:"Price",width:140},{id:"sales Price",label:"Sales Price",width:140},{id:"publish",label:"Publish",width:110},{id:"",width:88}],he=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],j={name:"",stock:""};function pe(){const o=O(),e=re();v();const[a,i]=l.useState([]),[d,g]=l.useState(j),{productsLoading:b,productsEmpty:n}=ce(),[c,x]=l.useState([]),{user:{id:S}}=V();l.useEffect(()=>{(async()=>{try{const{data:{products:r,count:u}}=await f.get("products",{params:{userId:S,perPage:5e3}});x(r)}catch{alert("error Occure")}})()},[]);const w=U();l.useEffect(()=>{c.length&&i(c)},[c]);const p=me({inputData:a,comparator:ne(e.order,e.orderBy),filters:d}),P=p.slice(e.page*e.rowsPerPage,e.page*e.rowsPerPage+e.rowsPerPage),T=e.dense?60:80;q(j,d);const y=l.useCallback((s,r)=>{e.onResetPage(),g(u=>({...u,[s]:r}))},[e]),k=l.useCallback(async s=>{try{const r=await f.delete(`products/${s}`),u=a.filter(L=>L.id!==s);i(u),e.onUpdatePageDeleteRow(P.length)}catch(r){alert(r.response.data.message)}},[P.length,e,a]),F=l.useCallback(async()=>{try{const s=await f.delete("products",{data:{ids:e.selected}}),r=a.filter(u=>!e.selected.includes(u.id));i(r),e.onUpdatePageDeleteRows({totalRows:a.length,totalRowsInPage:P.length,totalRowsFiltered:p.length})}catch(s){alert(s.response.data.message)}},[p.length,P.length,e,a]),B=l.useCallback(s=>{o.push(m.dashboard.product.edit(s))},[o]),D=l.useCallback(s=>{o.push(m.dashboard.product.details(s))},[o]);return l.useCallback(()=>{g(j)},[]),t.jsxs(t.Fragment,{children:[t.jsxs(z,{px:5,children:[t.jsx(H,{heading:"Products",links:[{name:"Dashboard",href:m.dashboard.root},{name:"Products",href:m.dashboard.product.root}],action:t.jsx(C,{component:_,href:m.dashboard.product.new,variant:"contained",startIcon:t.jsx(R,{icon:"mingcute:add-line"}),children:"New Product"}),sx:{mb:{xs:3,md:5}}}),t.jsxs(N,{children:[t.jsx(Z,{filters:d,onFilters:y,stockOptions:te,publishOptions:he}),t.jsxs(ie,{sx:{position:"relative",overflow:"unset"},children:[t.jsx(W,{dense:e.dense,numSelected:e.selected.length,rowCount:a.length,onSelectAllRows:s=>e.onSelectAllRows(s,a.map(r=>r.id)),action:t.jsx(G,{title:"Delete",children:t.jsx(K,{color:"primary",onClick:w.onTrue,children:t.jsx(R,{icon:"solar:trash-bin-trash-bold"})})})}),t.jsx(M,{children:t.jsxs($,{size:e.dense?"small":"medium",sx:{minWidth:960},children:[t.jsx(J,{order:e.order,orderBy:e.orderBy,headLabel:ue,rowCount:a.length,numSelected:e.selected.length,onSort:e.onSort,onSelectAllRows:s=>e.onSelectAllRows(s,a.map(r=>r.id))}),t.jsx(Q,{children:b?[...Array(e.rowsPerPage)].map((s,r)=>t.jsx(de,{sx:{height:T}},r)):t.jsx(t.Fragment,{children:p.map(s=>t.jsx(ee,{row:s,selected:e.selected.includes(s.id),onSelectRow:()=>e.onSelectRow(s.id),onDeleteRow:()=>k(s.id),onEditRow:()=>B(s.id),onViewRow:()=>D(s.id)},s.id))})})]})})]}),t.jsx(X,{count:p.length,page:e.page,rowsPerPage:e.rowsPerPage,onPageChange:e.onChangePage,onRowsPerPageChange:e.onChangeRowsPerPage,dense:e.dense,onChangeDense:e.onChangeDense})]})]}),t.jsx(le,{open:w.value,onClose:w.onFalse,title:"Delete",content:t.jsxs(t.Fragment,{children:["Are you sure want to delete ",t.jsxs("strong",{children:[" ",e.selected.length," "]})," items?"]}),action:t.jsx(C,{variant:"contained",color:"error",onClick:()=>{F(),w.onFalse()},children:"Delete"})})]})}function me({inputData:o,comparator:e,filters:a}){const{name:i,stock:d,publish:g}=a,b=o.map((n,c)=>[n,c]);return b.sort((n,c)=>{const x=e(n[0],c[0]);return x!==0?x:n[1]-c[1]}),o=b.map(n=>n[0]),i&&(o=o.filter(n=>n.name.toLowerCase().indexOf(i.toLowerCase())!==-1)),d.length&&(o=o.filter(n=>d[0]==="in stock"?!!n.quantity:!n.quantity)),o}function Ie(){return t.jsxs(t.Fragment,{children:[t.jsx(Y,{children:t.jsx("title",{children:" Dashboard: Product List"})}),t.jsx(pe,{})]})}export{Ie as default};
