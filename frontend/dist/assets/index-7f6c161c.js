import{n as ct,Y as yt,cI as Dt,cJ as lt,cK as bt,cL as xt,F as J,f as It,c as Ft,C as nt}from"./index-7069bc8c.js";const V=t=>t*1e3,G=t=>t/1e3,ut=(t,n,e)=>(((1-3*e+3*n)*t+(3*e-6*n))*t+3*n)*t,Ot=1e-7,Tt=12;function At(t,n,e,s,c){let o,r,d=0;do r=n+(e-n)/2,o=ut(r,s,c)-t,o>0?e=r:n=r;while(Math.abs(o)>Ot&&++d<Tt);return r}function K(t,n,e,s){if(t===n&&e===s)return ct;const c=o=>At(o,0,1,t,e);return o=>o===0||o===1?o:ut(c(o),n,s)}const wt=K(.42,0,1,1),Pt=K(0,0,.58,1),ft=K(.42,0,.58,1),St=t=>Array.isArray(t)&&typeof t[0]!="number",ht=t=>n=>n<=.5?t(2*n)/2:(2-t(2*(1-n)))/2,dt=t=>n=>1-t(1-n),j=t=>1-Math.sin(Math.acos(t)),Gt=dt(j),Bt=ht(j),pt=K(.33,1.53,.69,.99),H=dt(pt),Rt=ht(H),qt=t=>(t*=2)<1?.5*H(t):.5*(2-Math.pow(2,-10*(t-1))),Kt={linear:ct,easeIn:wt,easeInOut:ft,easeOut:Pt,circIn:j,circInOut:Bt,circOut:Gt,backIn:H,backInOut:Rt,backOut:pt,anticipate:qt},et=t=>{if(Array.isArray(t)){yt(t.length===4);const[n,e,s,c]=t;return K(n,e,s,c)}else if(typeof t=="string")return Kt[t];return t};function Et(t,n){return t.map(e=>e*n)}function Lt(t,n){return t.map(()=>n||ft).splice(0,t.length-1)}function L({duration:t=300,keyframes:n,times:e,ease:s="easeInOut"}){const c=St(s)?s.map(et):et(s),o={done:!1,value:n[0]},r=Et(e&&e.length===n.length?e:Dt(n),t),d=lt(r,n,{ease:Array.isArray(c)?c:Lt(n,c)});return{calculatedDuration:t,next:y=>(o.value=d(y),o.done=y>=t,o)}}const Nt=5;function mt(t,n,e){const s=Math.max(n-Nt,0);return bt(e-t(s),n-s)}const C=.001,kt=.01,st=10,zt=.05,Ct=1;function Jt({duration:t=800,bounce:n=.25,velocity:e=0,mass:s=1}){let c,o;xt(t<=V(st));let r=1-n;r=J(zt,Ct,r),t=J(kt,st,G(t)),r<1?(c=a=>{const F=a*r,D=F*t,p=F-e,l=W(a,r),m=Math.exp(-D);return C-p/l*m},o=a=>{const D=a*r*t,p=D*e+e,l=Math.pow(r,2)*Math.pow(a,2)*t,m=Math.exp(-D),b=W(Math.pow(a,2),r);return(-c(a)+C>0?-1:1)*((p-l)*m)/b}):(c=a=>{const F=Math.exp(-a*t),D=(a-e)*t+1;return-C+F*D},o=a=>{const F=Math.exp(-a*t),D=(e-a)*(t*t);return F*D});const d=5/t,y=Wt(c,o,d);if(t=V(t),isNaN(y))return{stiffness:100,damping:10,duration:t};{const a=Math.pow(y,2)*s;return{stiffness:a,damping:r*2*Math.sqrt(s*a),duration:t}}}const Vt=12;function Wt(t,n,e){let s=e;for(let c=1;c<Vt;c++)s=s-t(s)/n(s);return s}function W(t,n){return t*Math.sqrt(1-n*n)}const jt=["duration","bounce"],Ht=["stiffness","damping","mass"];function ot(t,n){return n.some(e=>t[e]!==void 0)}function Qt(t){let n={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!ot(t,Ht)&&ot(t,jt)){const e=Jt(t);n={...n,...e,mass:1},n.isResolvedFromDuration=!0}return n}function gt({keyframes:t,restDelta:n,restSpeed:e,...s}){const c=t[0],o=t[t.length-1],r={done:!1,value:c},{stiffness:d,damping:y,mass:a,duration:F,velocity:D,isResolvedFromDuration:p}=Qt({...s,velocity:-G(s.velocity||0)}),l=D||0,m=y/(2*Math.sqrt(d*a)),b=o-c,I=G(Math.sqrt(d/a)),T=Math.abs(b)<5;e||(e=T?.01:2),n||(n=T?.005:.5);let g;if(m<1){const f=W(I,m);g=x=>{const h=Math.exp(-m*I*x);return o-h*((l+m*I*b)/f*Math.sin(f*x)+b*Math.cos(f*x))}}else if(m===1)g=f=>o-Math.exp(-I*f)*(b+(l+I*b)*f);else{const f=I*Math.sqrt(m*m-1);g=x=>{const h=Math.exp(-m*I*x),A=Math.min(f*x,300);return o-h*((l+m*I*b)*Math.sinh(A)+f*b*Math.cosh(A))/f}}return{calculatedDuration:p&&F||null,next:f=>{const x=g(f);if(p)r.done=f>=F;else{let h=l;f!==0&&(m<1?h=mt(g,f,x):h=0);const A=Math.abs(h)<=e,v=Math.abs(o-x)<=n;r.done=A&&v}return r.value=r.done?o:x,r}}}function it({keyframes:t,velocity:n=0,power:e=.8,timeConstant:s=325,bounceDamping:c=10,bounceStiffness:o=500,modifyTarget:r,min:d,max:y,restDelta:a=.5,restSpeed:F}){const D=t[0],p={done:!1,value:D},l=i=>d!==void 0&&i<d||y!==void 0&&i>y,m=i=>d===void 0?y:y===void 0||Math.abs(d-i)<Math.abs(y-i)?d:y;let b=e*n;const I=D+b,T=r===void 0?I:r(I);T!==I&&(b=T-D);const g=i=>-b*Math.exp(-i/s),f=i=>T+g(i),x=i=>{const M=g(i),P=f(i);p.done=Math.abs(M)<=a,p.value=p.done?T:P};let h,A;const v=i=>{l(p.value)&&(h=i,A=gt({keyframes:[p.value,m(p.value)],velocity:mt(f,i,p.value),damping:c,stiffness:o,restDelta:a,restSpeed:F}))};return v(0),{calculatedDuration:null,next:i=>{let M=!1;return!A&&h===void 0&&(M=!0,x(i),v(i)),h!==void 0&&i>h?A.next(i-h):(!M&&x(i),p)}}}const Ut=t=>{const n=({timestamp:e})=>t(e);return{start:()=>It.update(n,!0),stop:()=>Ft(n),now:()=>nt.isProcessing?nt.timestamp:performance.now()}},rt=2e4;function at(t){let n=0;const e=50;let s=t.next(n);for(;!s.done&&n<rt;)n+=e,s=t.next(n);return n>=rt?1/0:n}const Xt={decay:it,inertia:it,tween:L,keyframes:L,spring:gt};function Yt({autoplay:t=!0,delay:n=0,driver:e=Ut,keyframes:s,type:c="keyframes",repeat:o=0,repeatDelay:r=0,repeatType:d="loop",onPlay:y,onStop:a,onComplete:F,onUpdate:D,...p}){let l=1,m=!1,b,I;const T=()=>{I=new Promise(u=>{b=u})};T();let g;const f=Xt[c]||L;let x;f!==L&&typeof s[0]!="number"&&(x=lt([0,100],s,{clamp:!1}),s=[0,100]);const h=f({...p,keyframes:s});let A;d==="mirror"&&(A=f({...p,keyframes:[...s].reverse(),velocity:-(p.velocity||0)}));let v="idle",i=null,M=null,P=null;h.calculatedDuration===null&&o&&(h.calculatedDuration=at(h));const{calculatedDuration:N}=h;let B=1/0,S=1/0;N!==null&&(B=N+r,S=B*(o+1)-r);let O=0;const k=u=>{if(M===null)return;l>0&&(M=Math.min(M,u)),l<0&&(M=Math.min(u-S/l,M)),i!==null?O=i:O=Math.round(u-M)*l;const R=O-n*(l>=0?1:-1),_=l>=0?R<0:R>S;O=Math.max(R,0),v==="finished"&&i===null&&(O=S);let Y=O,$=h;if(o){const z=Math.min(O,S)/B;let E=Math.floor(z),w=z%1;!w&&z>=1&&(w=1),w===1&&E--,E=Math.min(E,o+1),!!(E%2)&&(d==="reverse"?(w=1-w,r&&(w-=r/B)):d==="mirror"&&($=A)),Y=J(0,1,w)*B}const q=_?{done:!1,value:s[0]}:$.next(Y);x&&(q.value=x(q.value));let{done:tt}=q;!_&&N!==null&&(tt=l>=0?O>=S:O<=0);const Mt=i===null&&(v==="finished"||v==="running"&&tt);return D&&D(q.value),Mt&&vt(),q},Q=()=>{g&&g.stop(),g=void 0},U=()=>{v="idle",Q(),b(),T(),M=P=null},vt=()=>{v="finished",F&&F(),Q(),b()},X=()=>{if(m)return;g||(g=e(k));const u=g.now();y&&y(),i!==null?M=u-i:(!M||v==="finished")&&(M=u),v==="finished"&&T(),P=M,i=null,v="running",g.start()};t&&X();const Z={then(u,R){return I.then(u,R)},get time(){return G(O)},set time(u){u=V(u),O=u,i!==null||!g||l===0?i=u:M=g.now()-u/l},get duration(){const u=h.calculatedDuration===null?at(h):h.calculatedDuration;return G(u)},get speed(){return l},set speed(u){u===l||!g||(l=u,Z.time=G(O))},get state(){return v},play:X,pause:()=>{v="paused",i=O},stop:()=>{m=!0,v!=="idle"&&(v="idle",a&&a(),U())},cancel:()=>{P!==null&&k(P),U()},complete:()=>{v="finished"},sample:u=>(M=0,k(u))};return Z}export{Yt as a,Gt as c,G as m,V as s};
