import{ax as t,bm as U,D as g,a8 as e,a9 as r,aI as X,aP as Y,ah as m,aH as y,ae as w,bn as z,aJ as P,ad as a,aB as $,b$ as N,ay as Z,bk as ee,aS as se,ag as F,aj as re,as as k,au as te,ao as ne,av as oe,aF as G,bA as ae,be as _,c0 as le,c1 as S,aG as T,aC as M,ac as I,ai as ie,aw as O,b0 as ce,af as de,bx as C}from"./index-80ed1a65.js";import{C as xe}from"./confirm-dialog-4c03754a.js";import{C as he}from"./custom-breadcrumbs-d8f83c0f.js";import{u as pe,g as me,e as je}from"./use-table-1c6afd17.js";import{b as ue,a as ge,d as be,e as ye,c as we}from"./table-pagination-custom-d7e34a62.js";import{a as f}from"./format-number-ba689ea4.js";import{D as E}from"./DatePicker-e0782408.js";import{s as fe}from"./custom-date-range-picker-e6e02322.js";import{M as W}from"./Chip-7541428a.js";import{T as Ce,a as Te,b as ve}from"./TableContainer-a0ef1236.js";import{T as De,t as Se,a as Pe,b as Ie,c as ke,d as Re,e as Ae}from"./TimelineItem-be7ab1ab.js";t.func,t.func,t.func,t.object,t.bool;function V({filters:s,onFilters:l,canReset:h,onResetFilters:i}){const n=U(),p=g.useCallback(j=>{l("name",j.target.value)},[l]),o=g.useCallback(j=>{l("startDate",j)},[l]),c=g.useCallback(j=>{l("endDate",j)},[l]);return e.jsxs(e.Fragment,{children:[e.jsxs(r,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsx(E,{label:"Start date",value:s.startDate,onChange:o,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:200}}}),e.jsx(E,{label:"End date",value:s.endDate,onChange:c,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:200}}}),e.jsxs(r,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(X,{fullWidth:!0,value:s.name,onChange:p,placeholder:"Search customer or order number...",InputProps:{startAdornment:e.jsx(Y,{position:"start",children:e.jsx(m,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(y,{onClick:n.onOpen,children:e.jsx(m,{icon:"eva:more-vertical-fill"})})]}),h&&e.jsx(w,{color:"error",sx:{flexShrink:0},onClick:i,startIcon:e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]}),e.jsxs(z,{open:n.open,onClose:n.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(P,{onClick:()=>{n.onClose()},children:[e.jsx(m,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(P,{onClick:()=>{n.onClose()},children:[e.jsx(m,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(P,{onClick:()=>{n.onClose()},children:[e.jsx(m,{icon:"solar:export-bold"}),"Export"]})]})]})}V.propTypes={canReset:t.bool,filters:t.object,onFilters:t.func,onResetFilters:t.func};function q({filters:s,onFilters:l,onResetFilters:h,results:i,...n}){const p=fe(s.startDate,s.endDate),o=()=>{l("status","all")},c=()=>{l("startDate",null),l("endDate",null)};return e.jsxs(r,{spacing:1.5,...n,children:[e.jsxs(a,{sx:{typography:"body2"},children:[e.jsx("strong",{children:i}),e.jsx(a,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(r,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[s.status!=="all"&&e.jsx(B,{label:"Status:",children:e.jsx(W,{size:"small",label:s.status,onDelete:o})}),s.startDate&&s.endDate&&e.jsx(B,{label:"Date:",children:e.jsx(W,{size:"small",label:p,onDelete:c})}),e.jsx(w,{color:"error",onClick:h,startIcon:e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}q.propTypes={filters:t.object,onFilters:t.func,onResetFilters:t.func,results:t.number};function B({label:s,children:l,sx:h,...i}){return e.jsxs(r,{component:$,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...h},...i,children:[e.jsx(a,{component:"span",sx:{typography:"subtitle2"},children:s}),e.jsx(r,{spacing:1,direction:"row",flexWrap:"wrap",children:l})]})}B.propTypes={children:t.node,label:t.string,sx:t.object};const Fe=[{value:"all",label:"All"},...le],Oe=[{id:"orderNumber",label:"Order",width:116},{id:"name",label:"Customer"},{id:"createdAt",label:"Date",width:140},{id:"totalQuantity",label:"Items",width:120,align:"center"},{id:"totalAmount",label:"Price",width:140},{id:"status",label:"Status",width:110},{id:"",width:88}],H={name:"",status:"all",startDate:null,endDate:null};function Ke(){const s=pe({defaultOrderBy:"orderNumber"});console.log(N);const l=Z(),h=ee(),i=se(),[n,p]=g.useState(N),[o,c]=g.useState(H),j=o.startDate&&o.endDate?o.startDate.getTime()>o.endDate.getTime():!1,d=Be({inputData:n,comparator:me(s.order,s.orderBy),filters:o,dateError:j}),b=d.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage),v=s.dense?52:72,R=!!o.name||o.status!=="all"||!!o.startDate&&!!o.endDate,J=!d.length&&R||!d.length,D=g.useCallback((x,u)=>{s.onResetPage(),c(A=>({...A,[x]:u}))},[s]);g.useCallback(x=>{const u=n.filter(A=>A.id!==x);p(u),s.onUpdatePageDeleteRow(b.length)},[b.length,s,n]);const Q=g.useCallback(()=>{const x=n.filter(u=>!s.selected.includes(u.id));p(x),s.onUpdatePageDeleteRows({totalRows:n.length,totalRowsInPage:b.length,totalRowsFiltered:d.length})},[d.length,b.length,s,n]),L=g.useCallback(()=>{c(H)},[]);g.useCallback(x=>{h.push(F.dashboard.order.details(x))},[h]);const K=g.useCallback((x,u)=>{D("status",u)},[D]);return e.jsxs(e.Fragment,{children:[e.jsxs(re,{maxWidth:l.themeStretch?!1:"lg",children:[e.jsx(he,{heading:"Orders",links:[{name:"Dashboard",href:F.dashboard.root},{name:"Orders",href:F.dashboard.order.root}],sx:{mb:{xs:3,md:5}}}),e.jsxs(k,{children:[e.jsx(te,{value:o.status,onChange:K,sx:{px:2.5,boxShadow:x=>`inset 0 -2px 0 0 ${ne(x.palette.grey[500],.08)}`},children:Fe.map(x=>e.jsx(oe,{iconPosition:"end",value:x.value,label:x.label,icon:e.jsx(G,{variant:(x.value==="all"||x.value===o.status)&&"filled"||"soft",color:x.value==="completed"&&"success"||x.value==="pending"&&"warning"||x.value==="cancelled"&&"error"||"default",children:"0"})},x.value))}),e.jsx(V,{filters:o,onFilters:D,canReset:R,onResetFilters:L}),R&&e.jsx(q,{filters:o,onFilters:D,onResetFilters:L,results:d.length,sx:{p:2.5,pt:0}}),e.jsxs(Ce,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(ue,{dense:s.dense,numSelected:s.selected.length,rowCount:n.length,onSelectAllRows:x=>s.onSelectAllRows(x,n.map(u=>u.id)),action:e.jsx(ae,{title:"Delete",children:e.jsx(y,{color:"primary",onClick:i.onTrue,children:e.jsx(m,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(_,{children:e.jsxs(Te,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(ge,{order:s.order,orderBy:s.orderBy,headLabel:Oe,rowCount:n.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:x=>s.onSelectAllRows(x,n.map(u=>u.id))}),e.jsxs(ve,{children:[e.jsx(be,{height:v,emptyRows:je(s.page,s.rowsPerPage,n.length)}),e.jsx(ye,{notFound:J})]})]})})]}),e.jsx(we,{count:d.length,page:s.page,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onRowsPerPageChange:s.onChangeRowsPerPage,onChangeDense:s.onChangeDense})]})]}),e.jsx(xe,{open:i.value,onClose:i.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",s.selected.length," "]})," items?"]}),action:e.jsx(w,{variant:"contained",color:"error",onClick:()=>{Q(),i.onFalse()},children:"Delete"})})]})}function Be({inputData:s,comparator:l,filters:h,dateError:i}){const{status:n,name:p,startDate:o,endDate:c}=h,j=s.map((d,b)=>[d,b]);return j.sort((d,b)=>{const v=l(d[0],b[0]);return v!==0?v:d[1]-b[1]}),s=j.map(d=>d[0]),p&&(s=s.filter(d=>d.orderNumber.toLowerCase().indexOf(p.toLowerCase())!==-1||d.customer.name.toLowerCase().indexOf(p.toLowerCase())!==-1||d.customer.email.toLowerCase().indexOf(p.toLowerCase())!==-1)),n!=="all"&&(s=s.filter(d=>d.status===n)),i||o&&c&&(s=s.filter(d=>S(d.createdAt)>=S(o)&&S(d.createdAt)<=S(c))),s}function Le({customer:s,delivery:l,payment:h,shippingAddress:i}){const n=e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Customer Info",action:e.jsx(y,{children:e.jsx(m,{icon:"solar:pen-bold"})})}),e.jsxs(r,{direction:"row",sx:{p:3},children:[e.jsx(M,{alt:s.name,src:s.avatarUrl,sx:{width:48,height:48,mr:2}}),e.jsxs(r,{spacing:.5,alignItems:"flex-start",sx:{typography:"body2"},children:[e.jsx(I,{variant:"subtitle2",children:s.name}),e.jsx(a,{sx:{color:"text.secondary"},children:s.email}),e.jsxs(a,{children:["IP Address:",e.jsx(a,{component:"span",sx:{color:"text.secondary",ml:.25},children:s.ipAddress})]}),e.jsx(w,{size:"small",color:"error",startIcon:e.jsx(m,{icon:"mingcute:add-line"}),sx:{mt:1},children:"Add to Blacklist"})]})]})]}),p=e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Delivery",action:e.jsx(y,{children:e.jsx(m,{icon:"solar:pen-bold"})})}),e.jsxs(r,{spacing:1.5,sx:{p:3,typography:"body2"},children:[e.jsxs(r,{direction:"row",alignItems:"center",children:[e.jsx(a,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Ship by"}),l.shipBy]}),e.jsxs(r,{direction:"row",alignItems:"center",children:[e.jsx(a,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Speedy"}),l.speedy]}),e.jsxs(r,{direction:"row",alignItems:"center",children:[e.jsx(a,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Tracking No."}),e.jsx(ie,{underline:"always",color:"inherit",children:l.trackingNumber})]})]})]}),o=e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Shipping",action:e.jsx(y,{children:e.jsx(m,{icon:"solar:pen-bold"})})}),e.jsxs(r,{spacing:1.5,sx:{p:3,typography:"body2"},children:[e.jsxs(r,{direction:"row",alignItems:"center",children:[e.jsx(a,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Address"}),i.fullAddress]}),e.jsxs(r,{direction:"row",alignItems:"center",children:[e.jsx(a,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Phone number"}),i.phoneNumber]})]})]}),c=e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Payment",action:e.jsx(y,{children:e.jsx(m,{icon:"solar:pen-bold"})})}),e.jsxs(r,{direction:"row",alignItems:"center",sx:{p:3,typography:"body2"},children:[e.jsx(a,{component:"span",sx:{color:"text.secondary",flexGrow:1},children:"Phone number"}),h.cardNumber,e.jsx(m,{icon:"logos:mastercard",width:24,sx:{ml:.5}})]})]});return e.jsxs(k,{children:[n,e.jsx(O,{sx:{borderStyle:"dashed"}}),p,e.jsx(O,{sx:{borderStyle:"dashed"}}),o,e.jsx(O,{sx:{borderStyle:"dashed"}}),c]})}Le.propTypes={customer:t.object,delivery:t.object,payment:t.object,shippingAddress:t.object};function Ne({items:s,shipping:l,discount:h,taxes:i,subTotal:n,totalAmount:p}){const o=e.jsxs(r,{spacing:2,alignItems:"flex-end",sx:{my:3,textAlign:"right",typography:"body2"},children:[e.jsxs(r,{direction:"row",children:[e.jsx(a,{sx:{color:"text.secondary"},children:"Subtotal"}),e.jsx(a,{sx:{width:160,typography:"subtitle2"},children:f(n)||"-"})]}),e.jsxs(r,{direction:"row",children:[e.jsx(a,{sx:{color:"text.secondary"},children:"Shipping"}),e.jsx(a,{sx:{width:160,...l&&{color:"error.main"}},children:l?`- ${f(l)}`:"-"})]}),e.jsxs(r,{direction:"row",children:[e.jsx(a,{sx:{color:"text.secondary"},children:"Discount"}),e.jsx(a,{sx:{width:160,...h&&{color:"error.main"}},children:h?`- ${f(h)}`:"-"})]}),e.jsxs(r,{direction:"row",children:[e.jsx(a,{sx:{color:"text.secondary"},children:"Taxes"}),e.jsx(a,{sx:{width:160},children:i?f(i):"-"})]}),e.jsxs(r,{direction:"row",sx:{typography:"subtitle1"},children:[e.jsx(a,{children:"Total"}),e.jsx(a,{sx:{width:160},children:f(p)||"-"})]})]});return e.jsxs(k,{children:[e.jsx(T,{title:"Details"}),e.jsxs(r,{sx:{px:3},children:[e.jsx(_,{children:s.map(c=>e.jsxs(r,{direction:"row",alignItems:"center",sx:{py:3,minWidth:640,borderBottom:j=>`dashed 2px ${j.palette.background.neutral}`},children:[e.jsx(M,{src:c.coverUrl,variant:"rounded",sx:{width:48,height:48,mr:2}}),e.jsx(ce,{primary:c.name,secondary:c.sku,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),e.jsxs(a,{sx:{typography:"body2"},children:["x",c.quantity]}),e.jsx(a,{sx:{width:110,textAlign:"right",typography:"subtitle2"},children:f(c.price)})]},c.id))}),o]})]})}Ne.propTypes={discount:t.number,items:t.array,shipping:t.number,subTotal:t.number,taxes:t.number,totalAmount:t.number};function Ee({status:s,backLink:l,createdAt:h,orderNumber:i,statusOptions:n,onChangeStatus:p}){const o=U();return e.jsxs(e.Fragment,{children:[e.jsxs(r,{spacing:3,direction:{xs:"column",md:"row"},sx:{mb:{xs:3,md:5}},children:[e.jsxs(r,{spacing:1,direction:"row",alignItems:"flex-start",children:[e.jsx(y,{component:de,href:l,children:e.jsx(m,{icon:"eva:arrow-ios-back-fill"})}),e.jsxs(r,{spacing:.5,children:[e.jsxs(r,{spacing:1,direction:"row",alignItems:"center",children:[e.jsxs(I,{variant:"h4",children:[" Order ",i," "]}),e.jsx(G,{variant:"soft",color:s==="completed"&&"success"||s==="pending"&&"warning"||s==="cancelled"&&"error"||"default",children:s})]}),e.jsx(I,{variant:"body2",sx:{color:"text.disabled"},children:C(h)})]})]}),e.jsxs(r,{flexGrow:1,spacing:1.5,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[e.jsx(w,{color:"inherit",variant:"outlined",endIcon:e.jsx(m,{icon:"eva:arrow-ios-downward-fill"}),onClick:o.onOpen,sx:{textTransform:"capitalize"},children:s}),e.jsx(w,{color:"inherit",variant:"outlined",startIcon:e.jsx(m,{icon:"solar:printer-minimalistic-bold"}),children:"Print"}),e.jsx(w,{color:"inherit",variant:"contained",startIcon:e.jsx(m,{icon:"solar:pen-bold"}),children:"Edit"})]})]}),e.jsx(z,{open:o.open,onClose:o.onClose,arrow:"top-right",sx:{width:140},children:n.map(c=>e.jsx(P,{selected:c.value===s,onClick:()=>{o.onClose(),p(c.value)},children:c.label},c.value))})]})}Ee.propTypes={backLink:t.string,createdAt:t.instanceOf(Date),onChangeStatus:t.func,orderNumber:t.string,status:t.string,statusOptions:t.array};function We({history:s}){const l=e.jsxs(r,{spacing:2,component:$,variant:"outlined",sx:{p:2.5,minWidth:260,flexShrink:0,borderRadius:2,typography:"body2",borderStyle:"dashed"},children:[e.jsxs(r,{spacing:.5,children:[e.jsx(a,{sx:{color:"text.disabled"},children:"Order time"}),C(s.orderTime)]}),e.jsxs(r,{spacing:.5,children:[e.jsx(a,{sx:{color:"text.disabled"},children:"Payment time"}),C(s.orderTime)]}),e.jsxs(r,{spacing:.5,children:[e.jsx(a,{sx:{color:"text.disabled"},children:"Delivery time for the carrier"}),C(s.orderTime)]}),e.jsxs(r,{spacing:.5,children:[e.jsx(a,{sx:{color:"text.disabled"},children:"Completion time"}),C(s.orderTime)]})]}),h=e.jsx(De,{sx:{p:0,m:0,[`& .${Se.root}:before`]:{flex:0,padding:0}},children:s.timeline.map((i,n)=>{const p=n===0,o=n===s.timeline.length-1;return e.jsxs(Pe,{children:[e.jsxs(Ie,{children:[e.jsx(ke,{color:p&&"primary"||"grey"}),o?null:e.jsx(Re,{})]}),e.jsxs(Ae,{children:[e.jsx(I,{variant:"subtitle2",children:i.title}),e.jsx(a,{sx:{color:"text.disabled",typography:"caption",mt:.5},children:C(i.time)})]})]},i.title)})});return e.jsxs(k,{children:[e.jsx(T,{title:"History"}),e.jsxs(r,{spacing:3,alignItems:{md:"flex-start"},direction:{xs:"column-reverse",md:"row"},sx:{p:3},children:[h,l]})]})}We.propTypes={history:t.object};export{Ke as O,Ee as a,Ne as b,We as c,Le as d};
