import{ao as U,F as x,j as e,af as T,ag as F,aC as _,an as H,B as A,at as $,au as z,ae as a,ah as V,ai as Q,aj as X,ak as Z,ap as ee,aq as w,ar as v,aD as te,ab as M,av as I,S as b,ad as R,T as c,aw as ae,ax as G,aE as se,aB as C,aF as re,am as ne,aG as oe,ay as y,W as ie}from"./index-94dfd37e.js";import{B as ce}from"./blurlayer-a9277582.js";import{u as q}from"./use-chart-0837444b.js";import{C as k}from"./chart-110fe522.js";import{T as le}from"./TableContainer-6452e3b3.js";import"./color-picker-b76259a6.js";function D({title:n,subheader:u,chart:g,...l}){const{colors:d,categories:m,series:h,options:p}=g,o=U(),[r,i]=x.useState("2024"),f=q({colors:d,legend:{position:"top",horizontalAlign:"right"},xaxis:{categories:m},...p}),j=x.useCallback(t=>{o.onClose(),i(t)},[o]);return e.jsxs(e.Fragment,{children:[e.jsxs(T,{...l,children:[e.jsx(F,{title:n,subheader:u,action:e.jsxs(_,{onClick:o.onOpen,sx:{pl:1,py:.5,pr:.5,borderRadius:1,typography:"subtitle2",bgcolor:"background.neutral"},children:[r,e.jsx(H,{width:16,icon:o.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:.5}})]})}),h.map(t=>e.jsx(A,{sx:{mt:3,mx:3},children:t.year===r&&e.jsx(k,{dir:"ltr",type:"area",series:t.data,options:f,height:364})},t.year))]}),e.jsx($,{open:o.open,onClose:o.onClose,sx:{width:140},children:h.map(t=>e.jsx(z,{selected:t.year===r,onClick:()=>j(t.year),children:t.year},t.year))})]})}D.propTypes={chart:a.object,subheader:a.string,title:a.string};function L({title:n,subheader:u,tableData:g,tableLabels:l,...d}){return e.jsxs(T,{...d,children:[e.jsx(F,{title:n,subheader:u,sx:{mb:3}}),e.jsx(le,{sx:{overflow:"unset"},children:e.jsx(V,{children:e.jsxs(Q,{sx:{minWidth:640},children:[e.jsx(X,{headLabel:l}),e.jsx(Z,{children:g.map(m=>e.jsx(W,{row:m},m.id))})]})})})]})}L.propTypes={subheader:a.string,tableData:a.array,tableLabels:a.array,title:a.string};function W({row:n}){return e.jsxs(ee,{children:[e.jsx(w,{children:n.name}),e.jsx(w,{children:n.category}),e.jsx(w,{children:n.storeName}),e.jsx(w,{children:n.SKU}),e.jsx(w,{children:v(n.salePrice)})]})}W.propTypes={row:a.object};const N=400,O=72;te(k)(({theme:n})=>({height:N,"& .apexcharts-canvas, .apexcharts-inner, svg, foreignObject":{height:"100% !important"},"& .apexcharts-legend":{height:O,borderTop:`dashed 1px ${n.palette.divider}`,top:`calc(${N-O}px) !important`}}));a.object,a.string,a.string,a.number;a.array,a.string,a.string;a.object;function S({title:n,percent:u,total:g,chart:l,sx:d,...m}){const h=M(),{colors:p=[h.palette.primary.light,h.palette.primary.main],series:o,options:r}=l,i=q({colors:[p[1]],fill:{type:"gradient",gradient:{colorStops:[{offset:0,color:p[0]},{offset:100,color:p[1]}]}},chart:{animations:{enabled:!0},sparkline:{enabled:!0}},tooltip:{x:{show:!1},y:{formatter:j=>I(j),title:{formatter:()=>""}},marker:{show:!1}},...r}),f=e.jsxs(b,{direction:"row",alignItems:"center",sx:{mt:2,mb:1},children:[e.jsx(H,{icon:u<0?"eva:trending-down-fill":"eva:trending-up-fill",sx:{mr:1,p:.5,width:24,height:24,borderRadius:"50%",color:"success.main",bgcolor:R(h.palette.success.main,.16),...u<0&&{color:"error.main",bgcolor:R(h.palette.error.main,.16)}}}),e.jsxs(c,{variant:"subtitle2",component:"div",noWrap:!0,children:[u>0&&"+",ae(u),e.jsx(A,{component:"span",sx:{color:"text.secondary",typography:"body2"},children:" than last week"})]})]});return e.jsxs(T,{sx:{display:"flex",alignItems:"center",p:3,...d},...m,children:[e.jsxs(A,{sx:{flexGrow:1},children:[e.jsx(c,{variant:"subtitle2",paragraph:!0,children:n}),e.jsx(c,{variant:"h3",gutterBottom:!0,children:I(g)}),f]}),e.jsx(k,{type:"line",series:[{data:o}],options:i,width:96,height:64})]})}S.propTypes={chart:a.object,percent:a.number,sx:a.object,title:a.string,total:a.number};a.array,a.string,a.string;a.object;function J({title:n,sentAmount:u,currentBalance:g,orders:l=[],sx:d,...m}){const{user:h}=G(),p=se(),[o,r]=x.useState(""),[i,f]=x.useState([]),j=x.useCallback(async()=>{const{data:t}=await C.get("/payout",{params:{fName:h.displayName}});f(t),console.log(t)},[]);return x.useEffect(()=>{j()},[]),e.jsxs(T,{sx:{p:3,...d},...m,children:[e.jsx(c,{variant:"subtitle2",gutterBottom:!0,children:n}),!!o&&e.jsx(re,{severity:"error",children:o}),e.jsxs(b,{spacing:2,children:[e.jsxs(c,{variant:"h3",children:["AED"," ",(l.reduce((t,s)=>t+s.totalAmount,0)*.2-i.reduce((t,s)=>t+s.amount,0)+i.reduce((t,s)=>s.status==="pending"?t+s.amount:t,0)).toFixed(2)," "]}),e.jsxs(b,{direction:"row",justifyContent:"space-between",children:[e.jsx(c,{variant:"body2",sx:{color:"text.secondary"},children:"Total Sales"}),e.jsxs(c,{variant:"body2",children:[" ",v(l.reduce((t,s)=>t+s.totalAmount,0))]})]}),e.jsxs(b,{direction:"row",justifyContent:"space-between",children:[e.jsx(c,{variant:"body2",sx:{color:"text.secondary"},children:"Commission (20%)"}),e.jsx(c,{variant:"body2",children:v(l.reduce((t,s)=>t+s.totalAmount,0)*.2)})]}),e.jsxs(b,{direction:"row",justifyContent:"space-between",children:[e.jsx(c,{variant:"body2",sx:{color:"text.secondary"},children:"Avalable Balance for requesting"}),e.jsxs(c,{variant:"body2",children:[" ",v(l.reduce((t,s)=>t+s.totalAmount,0)*.2-i.reduce((t,s)=>t+s.amount,0))]})]}),e.jsxs(b,{direction:"row",justifyContent:"space-between",children:[e.jsx(c,{variant:"body2",sx:{color:"text.secondary"},children:"Pending Request"}),e.jsxs(c,{variant:"body2",children:[" ",v(i.reduce((t,s)=>s.status==="pending"?t+s.amount:t,0))]})]}),e.jsxs(b,{direction:"row",justifyContent:"space-between",children:[e.jsx(c,{variant:"body2",sx:{color:"text.secondary"},children:"Total Earned"}),e.jsxs(c,{variant:"body2",children:[" ",v(i.reduce((t,s)=>s.status==="completed"?t+s.amount:t,0))]})]}),e.jsx(b,{direction:"row",spacing:1.5,children:e.jsx(ne,{fullWidth:!0,variant:"contained",color:"warning",onClick:()=>{l.reduce((t,s)=>t+s.totalAmount,0)*.2-i.reduce((t,s)=>t+s.amount,0)>10?(sessionStorage.setItem("amount",l.reduce((t,s)=>t+s.totalAmount,0)*.2),p("/payment")):r("You must have a minimum balance of AED 10 to request a payout.")},children:"Request For Payout"})})]})]})}J.propTypes={currentBalance:a.number,sentAmount:a.number,sx:a.object,title:a.string};function de(){const n=M(),{user:u}=G(),[g,l]=x.useState([]),[d,m]=x.useState([]),[h,p]=x.useState([]);return x.useEffect(()=>{(async()=>{try{const[r,i,f]=await Promise.all([C.get("products",{params:{userId:u.id}}),C.get("/orders"),C.get("/invoice")]),{products:j}=r.data,t=i.data,s=f.data,Y=t.filter(B=>B.items.some(E=>j.some(P=>P.id===E.id))),K=s.filter(B=>B.items.some(E=>j.some(P=>P.id===E.id)));m(Y),l(j),p(K)}catch(r){console.error("An error occurred:",r)}})()},[u.id]),e.jsxs(A,{px:5,children:[e.jsx(oe,{heading:"Analytics",links:[{}],sx:{mb:{xs:3,md:5}}}),e.jsxs(y,{container:!0,spacing:3,sx:{position:"relative"},children:[e.jsx(ce,{}),e.jsx(y,{xs:12,md:4,children:e.jsx(S,{title:"Product Sold",percent:0,total:d.length,chart:{series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(y,{xs:12,md:4,children:e.jsx(S,{title:"Total Balance",percent:0,total:d.reduce((o,r)=>o+r.totalAmount,0),chart:{colors:[n.palette.info.light,n.palette.info.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(y,{xs:12,md:4,children:e.jsx(S,{title:"Sales Profit",percent:0,total:d.reduce((o,r)=>o+r.totalAmount,0)*.8,chart:{colors:[n.palette.warning.light,n.palette.warning.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(y,{xs:12,md:6,lg:8,children:e.jsx(D,{title:"Sales By Month",chart:{categories:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],series:[{year:"2024",data:[{name:"Total Income",data:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31].map(o=>d.reduce((r,i)=>new Date(i.createdAt).getMonth()===new Date().getMonth()&&new Date(i.createdAt).getDate()===o?r+i.totalAmount:r,0))}]}]}})}),e.jsx(y,{xs:12,md:6,lg:8,children:e.jsx(D,{title:"Yearly Sales",chart:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],series:[{year:"2024",data:[{name:"Total Income",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(o=>d.reduce((r,i)=>new Date(i.createdAt).getMonth()===o?r+i.totalAmount:r,0))}]}]}})}),e.jsx(y,{xs:12,md:6,lg:8,children:e.jsx(L,{title:"Top Selling Products",tableData:g,tableLabels:[{id:"Product name",label:"Product Name"},{id:"category",label:"Category"},{id:"storeName",label:"Store Name"},{id:"sku",label:"SKU"},{id:"salePrice",label:"Sale Price"}]})}),e.jsx(y,{xs:12,md:6,lg:4,children:e.jsx(J,{title:"Current Balance",currentBalance:0,sentAmount:0,orders:d})})]})]})}function ge(){return e.jsxs(e.Fragment,{children:[e.jsx(ie,{children:e.jsx("title",{children:" Dashboard: E-Commerce"})}),e.jsx(de,{})]})}export{ge as default};
