import{r as h,u as m,j as e,C as k,B as T,g as f,D as y,b as C,c as v,G as o,T as x,L as w,W as S,d as j}from"./index-bbe39c8b.js";import{T as D,a as U,b as g,c as n,d as _}from"./TableRow-6cf0ff97.js";import{C as R}from"./Checkbox-ae6700aa.js";import{A as b}from"./Alert-f967853a.js";function W(){const[d,l]=h.useState([{enable:!1,day:"Mon",open:"",close:"",lastCall:""},{enable:!1,day:"Tue",open:"",close:"",lastCall:""},{enable:!1,day:"Wen",open:"",close:"",lastCall:""},{enable:!1,day:"Thu",open:"",close:"",lastCall:""},{enable:!1,day:"Fri",open:"",close:"",lastCall:""},{enable:!1,day:"Sat",open:"",close:"",lastCall:""},{enable:!1,day:"Sun",open:"",close:"",lastCall:""}]),{user:t}=m();h.useEffect(()=>{t.deliverySettings&&l(t.deliverySettings)},[t]);const p=async()=>{const s=f(y,"users",t.uid);await C(s,{deliverySettings:d}),alert("Updated")};return e.jsx(k,{children:e.jsxs(D,{sx:{overflow:"scroll"},children:[e.jsx(U,{children:e.jsxs(g,{children:[e.jsx(n,{}),e.jsx(n,{children:"Days"}),e.jsx(n,{children:"Open Time"}),e.jsx(n,{children:"Close Time"}),e.jsx(n,{children:"Last Call"})]})}),e.jsxs(_,{children:[d.map((s,a)=>e.jsx(B,{row:s,setDeliverySettings:l},a)),e.jsxs(g,{children:[e.jsx(n,{colSpan:4,align:"right"}),e.jsx(n,{align:"center",children:e.jsx(T,{variant:"contained",color:"success",onClick:()=>p(),children:"Submit"})})]})]})]})})}const B=({row:d,setDeliverySettings:l})=>{const{day:t,open:p,close:s,lastCall:a,enable:c}=d;return e.jsxs(g,{children:[e.jsx(n,{children:e.jsx(R,{checked:c,onChange:i=>l(u=>u.map(r=>r.day===t?{...r,enable:i.target.checked,open:"",close:"",lastCall:""}:r))})}),e.jsx(n,{children:t}),e.jsx(n,{children:e.jsx("input",{disabled:!c,sx:{width:"200px"},type:"time",style:{width:"150px",height:"40px",borderRadius:"4px",background:"none",outline:"none",border:"1px solid black",padding:"0 10px"},placeholder:"Open Time",value:p,onChange:i=>l(u=>u.map(r=>r.day===t?{...r,open:i.target.value}:r))})}),e.jsx(n,{children:e.jsx("input",{disabled:!c,sx:{width:"200px"},type:"time",style:{width:"150px",height:"40px",borderRadius:"4px",background:"none",outline:"none",border:"1px solid black",padding:"0 10px"},placeholder:"Close Time",value:s,onChange:i=>l(u=>u.map(r=>r.day===t?{...r,close:i.target.value}:r))})}),e.jsx(n,{children:e.jsx("input",{disabled:!c,sx:{width:"200px"},type:"time",style:{width:"150px",height:"40px",borderRadius:"4px",background:"none",outline:"none",border:"1px solid black",padding:"0 10px"},placeholder:"Last Call",value:a,onChange:i=>l(u=>u.map(r=>r.day===t?{...r,lastCall:i.target.value}:r))})})]},t)};function P(){const{user:d}=m(),[l,t]=h.useState({data:{location_no:"",street_name:"",area:"",city:"",description:"",contact:""},loading:"",error:"",message:""});h.useEffect(()=>{d.pick_up_details&&t(s=>({...s,data:d.pick_up_details}))},[d]);const p=async s=>{s.preventDefault();try{t(i=>({...i,loading:!0,message:"",error:""}));const a=f(y,"users",d.uid);let c=l.data;await C(a,{pick_up_details:c}),t(i=>({...i,loading:!0,message:"Successfully updated",error:""}))}catch(a){console.log(a),t(c=>({...c,loading:!0,message:"",error:"Apologies, an error has occurred. Please review all the fields you've entered."}))}};return e.jsx(v,{mb:6,children:e.jsxs(o,{component:"form",container:!0,spacing:5,onSubmit:p,children:[e.jsx(o,{item:!0,xs:6,children:e.jsx(x,{required:!0,label:"Pick Up loaction No",fullWidth:!0,onChange:s=>t(a=>({...a,data:{...a.data,location_no:s.target.value}})),value:l.data.location_no})}),e.jsx(o,{item:!0,xs:6,children:e.jsx(x,{required:!0,label:"Street Name",fullWidth:!0,onChange:s=>t(a=>({...a,data:{...a.data,street_name:s.target.value}})),value:l.data.street_name})}),e.jsx(o,{item:!0,xs:6,children:e.jsx(x,{required:!0,label:"Area",fullWidth:!0,onChange:s=>t(a=>({...a,data:{...a.data,area:s.target.value}})),value:l.data.area})}),e.jsx(o,{item:!0,xs:6,children:e.jsx(x,{required:!0,label:"City",fullWidth:!0,onChange:s=>t(a=>({...a,data:{...a.data,city:s.target.value}})),value:l.data.city})}),e.jsx(o,{item:!0,xs:6,children:e.jsx(x,{required:!0,label:"Description",fullWidth:!0,onChange:s=>t(a=>({...a,data:{...a.data,description:s.target.value}})),value:l.data.description})}),e.jsx(o,{item:!0,xs:6,children:e.jsx(x,{required:!0,label:"Pick Up Contact",fullWidth:!0,onChange:s=>t(a=>({...a,data:{...a.data,contact:s.target.value}})),value:l.data.contact})}),e.jsxs(o,{item:!0,xs:6,children:[!!l.message&&e.jsx(b,{severity:"success",children:l.message}),!!l.error&&e.jsx(b,{severity:"error",children:l.error})]}),e.jsx(o,{item:!0,xs:6,children:e.jsx(w,{loading:l.loading,loadingIndicator:"Updatingâ€¦",color:"success",variant:"contained",type:"submit",children:"Update"})})]})})}function F(){return e.jsxs(e.Fragment,{children:[e.jsx(S,{children:e.jsx("title",{children:" Dashboard: Pick Up Details"})}),e.jsxs(v,{px:5,children:[e.jsx(j,{heading:"Pick Up Details",links:[{}],sx:{mb:{xs:3,md:5}}}),e.jsx(P,{}),e.jsx(j,{heading:"Pick Up Timing",links:[{}],sx:{mb:{xs:3,md:5}}}),e.jsx(W,{})]})]})}export{F as default};
