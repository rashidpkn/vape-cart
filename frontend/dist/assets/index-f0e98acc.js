import{a as x,e as j,r as c,d as g,j as s,W as p,I as P,h as n,B as N,p as f}from"./index-6b2a15ec.js";import{u as v}from"./use-checkout-e3b9cd61.js";import"./_product-55188478.js";function E(){const{onAddCart:r}=v(),i=x(),{name:a}=j(),[t,l]=c.useState([]),[o,d]=c.useState(!1),h=c.useCallback(async()=>{try{const{data:e}=await g.get("/products",{params:{name:a,perPage:2e3,status:"Published"}});l(e.products),d(!0)}catch{}},[a]),m=async e=>{console.log(e);try{r({id:e.id,name:e.name,price:e.salePrice||e.regularPrice,images:e.images,subTotal:e.salePrice,userId:e.userId,quantity:1}),i(f.product.checkout)}catch(u){console.log(u)}};return c.useEffect(()=>{h()},[a]),s.jsxs(s.Fragment,{children:[s.jsx(p,{children:s.jsxs("title",{children:[a," | Search Result"]})}),s.jsxs("main",{className:"search",children:[s.jsx("h1",{children:"Shop"}),!!t.length&&s.jsx("div",{className:"products",children:t.map(e=>s.jsxs("div",{className:"product",children:[s.jsxs("div",{className:"img",children:[s.jsx("img",{src:e.images[0],alt:""}),s.jsx("div",{className:"cart",onClick:()=>{m(e)},children:s.jsx(P,{icon:"eva:shopping-cart-outline",className:"cart-icon"})})]}),s.jsx(n,{to:`/product/${e.id}`,children:s.jsx("p",{className:"name",children:e.name})}),s.jsxs("div",{className:"info",children:[s.jsx("p",{className:"category",children:e.category}),s.jsxs("p",{children:[s.jsxs("del",{children:[" AED $",e.regularPrice]})," AED $",e.salePrice]})]})]},e.id))}),!t.length&&o&&s.jsxs("div",{className:"no-product",children:[s.jsxs("h2",{children:["Unfortunately, we couldn't find any products with ",a," name."]}),s.jsx(n,{to:"/",children:s.jsx(N,{variant:"contained",color:"success",children:"Home Page"})})]})]})]})}export{E as default};
