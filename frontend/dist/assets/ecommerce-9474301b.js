import{ao as U,F as g,j as e,af as C,ag as D,aC as _,an as H,B as A,at as $,au as V,ae as a,ah as Q,ai as X,aj as Z,ak as ee,ap as te,aq as w,ar as v,ab as I,av as k,aD as ae,S as f,ad as N,T as m,aw as re,ax as L,aE as se,aB as S,aF as oe,am as ne,aG as ie,ay as b,W as le}from"./index-fb5407e9.js";import{B as ce}from"./blurlayer-f98f76f9.js";import{u as O}from"./use-chart-da2e92ae.js";import{C as R}from"./chart-c86bd9c3.js";import{T as de}from"./TableContainer-e4d311aa.js";import"./color-picker-7e35703b.js";function W({title:s,subheader:p,chart:j,...l}){const{colors:d,categories:u,series:h,options:x}=j,o=U(),[n,i]=g.useState("2024"),c=O({colors:d,legend:{position:"top",horizontalAlign:"right"},xaxis:{categories:u},...x}),y=g.useCallback(t=>{o.onClose(),i(t)},[o]);return e.jsxs(e.Fragment,{children:[e.jsxs(C,{...l,children:[e.jsx(D,{title:s,subheader:p,action:e.jsxs(_,{onClick:o.onOpen,sx:{pl:1,py:.5,pr:.5,borderRadius:1,typography:"subtitle2",bgcolor:"background.neutral"},children:[n,e.jsx(H,{width:16,icon:o.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:.5}})]})}),h.map(t=>e.jsx(A,{sx:{mt:3,mx:3},children:t.year===n&&e.jsx(R,{dir:"ltr",type:"area",series:t.data,options:c,height:364})},t.year))]}),e.jsx($,{open:o.open,onClose:o.onClose,sx:{width:140},children:h.map(t=>e.jsx(V,{selected:t.year===n,onClick:()=>y(t.year),children:t.year},t.year))})]})}W.propTypes={chart:a.object,subheader:a.string,title:a.string};function q({title:s,subheader:p,tableData:j,tableLabels:l,...d}){return e.jsxs(C,{...d,children:[e.jsx(D,{title:s,subheader:p,sx:{mb:3}}),e.jsx(de,{sx:{overflow:"unset"},children:e.jsx(Q,{children:e.jsxs(X,{sx:{minWidth:640},children:[e.jsx(Z,{headLabel:l}),e.jsx(ee,{children:j.map(u=>e.jsx(M,{row:u},u.id))})]})})})]})}q.propTypes={subheader:a.string,tableData:a.array,tableLabels:a.array,title:a.string};function M({row:s}){return e.jsxs(te,{children:[e.jsx(w,{children:s.name}),e.jsx(w,{children:s.category}),e.jsx(w,{children:s.storeName}),e.jsx(w,{children:s.SKU}),e.jsx(w,{children:v(s.salePrice)})]})}M.propTypes={row:a.object};const G=400,F=72,ue=ae(R)(({theme:s})=>({height:G,"& .apexcharts-canvas, .apexcharts-inner, svg, foreignObject":{height:"100% !important"},"& .apexcharts-legend":{height:F,borderTop:`dashed 1px ${s.palette.divider}`,top:`calc(${G-F}px) !important`}}));function Y({title:s,subheader:p,total:j,chart:l,...d}){const u=I(),{colors:h=[[u.palette.primary.light,u.palette.primary.main],[u.palette.warning.light,u.palette.warning.main]],series:x,options:o}=l,n=x.map(c=>c.value),i=O({colors:h.map(c=>c[1]),chart:{sparkline:{enabled:!0}},labels:x.map(c=>c.label),legend:{floating:!0,position:"bottom",horizontalAlign:"center"},fill:{type:"gradient",gradient:{colorStops:h.map(c=>[{offset:0,color:c[0]},{offset:100,color:c[1]}])}},plotOptions:{radialBar:{hollow:{size:"68%"},dataLabels:{value:{offsetY:16},total:{formatter:()=>k(j)}}}},...o});return e.jsxs(C,{...d,children:[e.jsx(D,{title:s,subheader:p,sx:{mb:5}}),e.jsx(ue,{dir:"ltr",type:"radialBar",series:n,options:i,height:300})]})}Y.propTypes={chart:a.object,subheader:a.string,title:a.string,total:a.number};a.array,a.string,a.string;a.object;function T({title:s,percent:p,total:j,chart:l,sx:d,...u}){const h=I(),{colors:x=[h.palette.primary.light,h.palette.primary.main],series:o,options:n}=l,i=O({colors:[x[1]],fill:{type:"gradient",gradient:{colorStops:[{offset:0,color:x[0]},{offset:100,color:x[1]}]}},chart:{animations:{enabled:!0},sparkline:{enabled:!0}},tooltip:{x:{show:!1},y:{formatter:y=>k(y),title:{formatter:()=>""}},marker:{show:!1}},...n}),c=e.jsxs(f,{direction:"row",alignItems:"center",sx:{mt:2,mb:1},children:[e.jsx(H,{icon:p<0?"eva:trending-down-fill":"eva:trending-up-fill",sx:{mr:1,p:.5,width:24,height:24,borderRadius:"50%",color:"success.main",bgcolor:N(h.palette.success.main,.16),...p<0&&{color:"error.main",bgcolor:N(h.palette.error.main,.16)}}}),e.jsxs(m,{variant:"subtitle2",component:"div",noWrap:!0,children:[p>0&&"+",re(p),e.jsx(A,{component:"span",sx:{color:"text.secondary",typography:"body2"},children:" than last week"})]})]});return e.jsxs(C,{sx:{display:"flex",alignItems:"center",p:3,...d},...u,children:[e.jsxs(A,{sx:{flexGrow:1},children:[e.jsx(m,{variant:"subtitle2",paragraph:!0,children:s}),e.jsx(m,{variant:"h3",gutterBottom:!0,children:k(j)}),c]}),e.jsx(R,{type:"line",series:[{data:o}],options:i,width:96,height:64})]})}T.propTypes={chart:a.object,percent:a.number,sx:a.object,title:a.string,total:a.number};a.array,a.string,a.string;a.object;function z({title:s,sentAmount:p,currentBalance:j,orders:l=[],sx:d,...u}){const{user:h}=L(),x=se(),[o,n]=g.useState(""),[i,c]=g.useState([]),y=g.useCallback(async()=>{const{data:t}=await S.get("/payout",{params:{fName:h.displayName}});c(t),console.log(t)},[]);return g.useEffect(()=>{y()},[]),e.jsxs(C,{sx:{p:3,...d},...u,children:[e.jsx(m,{variant:"subtitle2",gutterBottom:!0,children:s}),!!o&&e.jsx(oe,{severity:"error",children:o}),e.jsxs(f,{spacing:2,children:[e.jsxs(m,{variant:"h3",children:["AED"," ",(l.reduce((t,r)=>t+r.totalAmount,0)*.2-i.reduce((t,r)=>t+r.amount,0)+i.reduce((t,r)=>r.status==="pending"?t+r.amount:t,0)).toFixed(2)," "]}),e.jsxs(f,{direction:"row",justifyContent:"space-between",children:[e.jsx(m,{variant:"body2",sx:{color:"text.secondary"},children:"Total Sales"}),e.jsxs(m,{variant:"body2",children:[" ",v(l.reduce((t,r)=>t+r.totalAmount,0))]})]}),e.jsxs(f,{direction:"row",justifyContent:"space-between",children:[e.jsx(m,{variant:"body2",sx:{color:"text.secondary"},children:"Commission (20%)"}),e.jsx(m,{variant:"body2",children:v(l.reduce((t,r)=>t+r.totalAmount,0)*.2)})]}),e.jsxs(f,{direction:"row",justifyContent:"space-between",children:[e.jsx(m,{variant:"body2",sx:{color:"text.secondary"},children:"Avalable Balance for requesting"}),e.jsxs(m,{variant:"body2",children:[" ",v(l.reduce((t,r)=>t+r.totalAmount,0)*.2-i.reduce((t,r)=>t+r.amount,0))]})]}),e.jsxs(f,{direction:"row",justifyContent:"space-between",children:[e.jsx(m,{variant:"body2",sx:{color:"text.secondary"},children:"Pending Request"}),e.jsxs(m,{variant:"body2",children:[" ",v(i.reduce((t,r)=>r.status==="pending"?t+r.amount:t,0))]})]}),e.jsxs(f,{direction:"row",justifyContent:"space-between",children:[e.jsx(m,{variant:"body2",sx:{color:"text.secondary"},children:"Total Earned"}),e.jsxs(m,{variant:"body2",children:[" ",v(i.reduce((t,r)=>r.status==="completed"?t+r.amount:t,0))]})]}),e.jsx(f,{direction:"row",spacing:1.5,children:e.jsx(ne,{fullWidth:!0,variant:"contained",color:"warning",onClick:()=>{l.reduce((t,r)=>t+r.totalAmount,0)*.2-i.reduce((t,r)=>t+r.amount,0)>10?(sessionStorage.setItem("amount",l.reduce((t,r)=>t+r.totalAmount,0)*.2),x("/payment")):n("You must have a minimum balance of AED 10 to request a payout.")},children:"Request For Payout"})})]})]})}z.propTypes={currentBalance:a.number,sentAmount:a.number,sx:a.object,title:a.string};function me(){const s=I(),{user:p}=L(),[j,l]=g.useState([]),[d,u]=g.useState([]),[h,x]=g.useState([]);return g.useEffect(()=>{(async()=>{try{const[n,i,c]=await Promise.all([S.get("products",{params:{userId:p.id}}),S.get("/orders"),S.get("/invoice")]),{products:y}=n.data,t=i.data,r=c.data,J=t.filter(B=>B.items.some(E=>y.some(P=>P.id===E.id))),K=r.filter(B=>B.items.some(E=>y.some(P=>P.id===E.id)));u(J),l(y),x(K)}catch(n){console.error("An error occurred:",n)}})()},[p.id]),e.jsxs(A,{px:5,children:[e.jsx(ie,{heading:"Analytics",links:[{}],sx:{mb:{xs:3,md:5}}}),e.jsxs(b,{container:!0,spacing:3,sx:{position:"relative"},children:[e.jsx(ce,{}),e.jsx(b,{xs:12,md:4,children:e.jsx(T,{title:"Product Sold",percent:0,total:d.length,chart:{series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(b,{xs:12,md:4,children:e.jsx(T,{title:"Total Balance",percent:0,total:d.reduce((o,n)=>o+n.totalAmount,0),chart:{colors:[s.palette.info.light,s.palette.info.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(b,{xs:12,md:4,children:e.jsx(T,{title:"Sales Profit",percent:0,total:d.reduce((o,n)=>o+n.totalAmount,0),chart:{colors:[s.palette.warning.light,s.palette.warning.main],series:[0,0,0,0,0,0,0,0,0,0]}})}),e.jsx(b,{xs:12,md:6,lg:4,children:e.jsx(Y,{title:"Sale By Gender",total:0,chart:{series:[{label:"Mens",value:0},{label:"Womens",value:0}]}})}),e.jsx(b,{xs:12,md:6,lg:8,children:e.jsx(W,{title:"Yearly Sales",chart:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],series:[{year:"2024",data:[{name:"Total Income",data:[0,1,2,3,4,5,6,7,8,9,10,11].map(o=>d.reduce((n,i)=>new Date(i.createdAt).getMonth()===o?n+i.totalAmount:n,0))}]}]}})}),e.jsx(b,{xs:12,md:6,lg:8,children:e.jsx(q,{title:"Top Selling Products",tableData:j,tableLabels:[{id:"Product name",label:"Product Name"},{id:"category",label:"Category"},{id:"storeName",label:"Store Name"},{id:"sku",label:"SKU"},{id:"salePrice",label:"Sale Price"}]})}),e.jsx(b,{xs:12,md:6,lg:4,children:e.jsx(z,{title:"Current Balance",currentBalance:0,sentAmount:0,orders:d})})]})]})}function be(){return e.jsxs(e.Fragment,{children:[e.jsx(le,{children:e.jsx("title",{children:" Dashboard: E-Commerce"})}),e.jsx(me,{})]})}export{be as default};
