import{aw as t,bi as z,D as g,a8 as e,a9 as r,aM as Y,ah as m,aF as y,ae as w,bj as H,aG as P,ad as a,aA as G,bX as E,ax as J,bg as K,aP as ee,ag as F,aj as se,at as re,ao as te,au as ne,aE as _,bw as oe,bb as $,bY as ae,bZ as S,aB as M,ac as I,ai as le,av as O,aZ as ie,af as de,bt as C}from"./index-a747811c.js";import{C as ce}from"./confirm-dialog-342a8153.js";import{C as xe}from"./custom-breadcrumbs-4c4417ef.js";import{u as he,g as pe,e as me}from"./use-table-ff505df5.js";import{b as je,a as ue,d as ge,e as be,c as ye}from"./table-pagination-custom-35112ce6.js";import{a as f}from"./format-number-6c2edc06.js";import{D as N}from"./DatePicker-edc6af47.js";import{T as we}from"./TextField-5c8d940a.js";import{s as fe}from"./custom-date-range-picker-f95da71c.js";import{M as W}from"./Chip-db514ca4.js";import{C as k}from"./Card-edd4abf8.js";import{T as Ce,a as Te,b as ve}from"./TableContainer-e899b1a5.js";import{C as T}from"./CardHeader-28cee1fc.js";import{T as De,t as Se,a as Pe,b as Ie,c as ke,d as Re,e as Ae}from"./TimelineItem-10ec3c31.js";t.func,t.func,t.func,t.object,t.bool;function V({filters:s,onFilters:l,canReset:h,onResetFilters:i}){const n=z(),p=g.useCallback(j=>{l("name",j.target.value)},[l]),o=g.useCallback(j=>{l("startDate",j)},[l]),d=g.useCallback(j=>{l("endDate",j)},[l]);return e.jsxs(e.Fragment,{children:[e.jsxs(r,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsx(N,{label:"Start date",value:s.startDate,onChange:o,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:200}}}),e.jsx(N,{label:"End date",value:s.endDate,onChange:d,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:200}}}),e.jsxs(r,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(we,{fullWidth:!0,value:s.name,onChange:p,placeholder:"Search customer or order number...",InputProps:{startAdornment:e.jsx(Y,{position:"start",children:e.jsx(m,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(y,{onClick:n.onOpen,children:e.jsx(m,{icon:"eva:more-vertical-fill"})})]}),h&&e.jsx(w,{color:"error",sx:{flexShrink:0},onClick:i,startIcon:e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]}),e.jsxs(H,{open:n.open,onClose:n.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(P,{onClick:()=>{n.onClose()},children:[e.jsx(m,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(P,{onClick:()=>{n.onClose()},children:[e.jsx(m,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(P,{onClick:()=>{n.onClose()},children:[e.jsx(m,{icon:"solar:export-bold"}),"Export"]})]})]})}V.propTypes={canReset:t.bool,filters:t.object,onFilters:t.func,onResetFilters:t.func};function Z({filters:s,onFilters:l,onResetFilters:h,results:i,...n}){const p=fe(s.startDate,s.endDate),o=()=>{l("status","all")},d=()=>{l("startDate",null),l("endDate",null)};return e.jsxs(r,{spacing:1.5,...n,children:[e.jsxs(a,{sx:{typography:"body2"},children:[e.jsx("strong",{children:i}),e.jsx(a,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(r,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[s.status!=="all"&&e.jsx(B,{label:"Status:",children:e.jsx(W,{size:"small",label:s.status,onDelete:o})}),s.startDate&&s.endDate&&e.jsx(B,{label:"Date:",children:e.jsx(W,{size:"small",label:p,onDelete:d})}),e.jsx(w,{color:"error",onClick:h,startIcon:e.jsx(m,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}Z.propTypes={filters:t.object,onFilters:t.func,onResetFilters:t.func,results:t.number};function B({label:s,children:l,sx:h,...i}){return e.jsxs(r,{component:G,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...h},...i,children:[e.jsx(a,{component:"span",sx:{typography:"subtitle2"},children:s}),e.jsx(r,{spacing:1,direction:"row",flexWrap:"wrap",children:l})]})}B.propTypes={children:t.node,label:t.string,sx:t.object};const Fe=[{value:"all",label:"All"},...ae],Oe=[{id:"orderNumber",label:"Order",width:116},{id:"name",label:"Customer"},{id:"createdAt",label:"Date",width:140},{id:"totalQuantity",label:"Items",width:120,align:"center"},{id:"totalAmount",label:"Price",width:140},{id:"status",label:"Status",width:110},{id:"",width:88}],U={name:"",status:"all",startDate:null,endDate:null};function Ke(){const s=he({defaultOrderBy:"orderNumber"});console.log(E);const l=J(),h=K(),i=ee(),[n,p]=g.useState(E),[o,d]=g.useState(U),j=o.startDate&&o.endDate?o.startDate.getTime()>o.endDate.getTime():!1,c=Be({inputData:n,comparator:pe(s.order,s.orderBy),filters:o,dateError:j}),b=c.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage),v=s.dense?52:72,R=!!o.name||o.status!=="all"||!!o.startDate&&!!o.endDate,q=!c.length&&R||!c.length,D=g.useCallback((x,u)=>{s.onResetPage(),d(A=>({...A,[x]:u}))},[s]);g.useCallback(x=>{const u=n.filter(A=>A.id!==x);p(u),s.onUpdatePageDeleteRow(b.length)},[b.length,s,n]);const Q=g.useCallback(()=>{const x=n.filter(u=>!s.selected.includes(u.id));p(x),s.onUpdatePageDeleteRows({totalRows:n.length,totalRowsInPage:b.length,totalRowsFiltered:c.length})},[c.length,b.length,s,n]),L=g.useCallback(()=>{d(U)},[]);g.useCallback(x=>{h.push(F.dashboard.order.details(x))},[h]);const X=g.useCallback((x,u)=>{D("status",u)},[D]);return e.jsxs(e.Fragment,{children:[e.jsxs(se,{maxWidth:l.themeStretch?!1:"lg",children:[e.jsx(xe,{heading:"Orders",links:[{name:"Dashboard",href:F.dashboard.root},{name:"Orders",href:F.dashboard.order.root}],sx:{mb:{xs:3,md:5}}}),e.jsxs(k,{children:[e.jsx(re,{value:o.status,onChange:X,sx:{px:2.5,boxShadow:x=>`inset 0 -2px 0 0 ${te(x.palette.grey[500],.08)}`},children:Fe.map(x=>e.jsx(ne,{iconPosition:"end",value:x.value,label:x.label,icon:e.jsx(_,{variant:(x.value==="all"||x.value===o.status)&&"filled"||"soft",color:x.value==="completed"&&"success"||x.value==="pending"&&"warning"||x.value==="cancelled"&&"error"||"default",children:"0"})},x.value))}),e.jsx(V,{filters:o,onFilters:D,canReset:R,onResetFilters:L}),R&&e.jsx(Z,{filters:o,onFilters:D,onResetFilters:L,results:c.length,sx:{p:2.5,pt:0}}),e.jsxs(Ce,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(je,{dense:s.dense,numSelected:s.selected.length,rowCount:n.length,onSelectAllRows:x=>s.onSelectAllRows(x,n.map(u=>u.id)),action:e.jsx(oe,{title:"Delete",children:e.jsx(y,{color:"primary",onClick:i.onTrue,children:e.jsx(m,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx($,{children:e.jsxs(Te,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(ue,{order:s.order,orderBy:s.orderBy,headLabel:Oe,rowCount:n.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:x=>s.onSelectAllRows(x,n.map(u=>u.id))}),e.jsxs(ve,{children:[e.jsx(ge,{height:v,emptyRows:me(s.page,s.rowsPerPage,n.length)}),e.jsx(be,{notFound:q})]})]})})]}),e.jsx(ye,{count:c.length,page:s.page,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onRowsPerPageChange:s.onChangeRowsPerPage,onChangeDense:s.onChangeDense})]})]}),e.jsx(ce,{open:i.value,onClose:i.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",s.selected.length," "]})," items?"]}),action:e.jsx(w,{variant:"contained",color:"error",onClick:()=>{Q(),i.onFalse()},children:"Delete"})})]})}function Be({inputData:s,comparator:l,filters:h,dateError:i}){const{status:n,name:p,startDate:o,endDate:d}=h,j=s.map((c,b)=>[c,b]);return j.sort((c,b)=>{const v=l(c[0],b[0]);return v!==0?v:c[1]-b[1]}),s=j.map(c=>c[0]),p&&(s=s.filter(c=>c.orderNumber.toLowerCase().indexOf(p.toLowerCase())!==-1||c.customer.name.toLowerCase().indexOf(p.toLowerCase())!==-1||c.customer.email.toLowerCase().indexOf(p.toLowerCase())!==-1)),n!=="all"&&(s=s.filter(c=>c.status===n)),i||o&&d&&(s=s.filter(c=>S(c.createdAt)>=S(o)&&S(c.createdAt)<=S(d))),s}function Le({customer:s,delivery:l,payment:h,shippingAddress:i}){const n=e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Customer Info",action:e.jsx(y,{children:e.jsx(m,{icon:"solar:pen-bold"})})}),e.jsxs(r,{direction:"row",sx:{p:3},children:[e.jsx(M,{alt:s.name,src:s.avatarUrl,sx:{width:48,height:48,mr:2}}),e.jsxs(r,{spacing:.5,alignItems:"flex-start",sx:{typography:"body2"},children:[e.jsx(I,{variant:"subtitle2",children:s.name}),e.jsx(a,{sx:{color:"text.secondary"},children:s.email}),e.jsxs(a,{children:["IP Address:",e.jsx(a,{component:"span",sx:{color:"text.secondary",ml:.25},children:s.ipAddress})]}),e.jsx(w,{size:"small",color:"error",startIcon:e.jsx(m,{icon:"mingcute:add-line"}),sx:{mt:1},children:"Add to Blacklist"})]})]})]}),p=e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Delivery",action:e.jsx(y,{children:e.jsx(m,{icon:"solar:pen-bold"})})}),e.jsxs(r,{spacing:1.5,sx:{p:3,typography:"body2"},children:[e.jsxs(r,{direction:"row",alignItems:"center",children:[e.jsx(a,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Ship by"}),l.shipBy]}),e.jsxs(r,{direction:"row",alignItems:"center",children:[e.jsx(a,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Speedy"}),l.speedy]}),e.jsxs(r,{direction:"row",alignItems:"center",children:[e.jsx(a,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Tracking No."}),e.jsx(le,{underline:"always",color:"inherit",children:l.trackingNumber})]})]})]}),o=e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Shipping",action:e.jsx(y,{children:e.jsx(m,{icon:"solar:pen-bold"})})}),e.jsxs(r,{spacing:1.5,sx:{p:3,typography:"body2"},children:[e.jsxs(r,{direction:"row",alignItems:"center",children:[e.jsx(a,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Address"}),i.fullAddress]}),e.jsxs(r,{direction:"row",alignItems:"center",children:[e.jsx(a,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Phone number"}),i.phoneNumber]})]})]}),d=e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Payment",action:e.jsx(y,{children:e.jsx(m,{icon:"solar:pen-bold"})})}),e.jsxs(r,{direction:"row",alignItems:"center",sx:{p:3,typography:"body2"},children:[e.jsx(a,{component:"span",sx:{color:"text.secondary",flexGrow:1},children:"Phone number"}),h.cardNumber,e.jsx(m,{icon:"logos:mastercard",width:24,sx:{ml:.5}})]})]});return e.jsxs(k,{children:[n,e.jsx(O,{sx:{borderStyle:"dashed"}}),p,e.jsx(O,{sx:{borderStyle:"dashed"}}),o,e.jsx(O,{sx:{borderStyle:"dashed"}}),d]})}Le.propTypes={customer:t.object,delivery:t.object,payment:t.object,shippingAddress:t.object};function Ee({items:s,shipping:l,discount:h,taxes:i,subTotal:n,totalAmount:p}){const o=e.jsxs(r,{spacing:2,alignItems:"flex-end",sx:{my:3,textAlign:"right",typography:"body2"},children:[e.jsxs(r,{direction:"row",children:[e.jsx(a,{sx:{color:"text.secondary"},children:"Subtotal"}),e.jsx(a,{sx:{width:160,typography:"subtitle2"},children:f(n)||"-"})]}),e.jsxs(r,{direction:"row",children:[e.jsx(a,{sx:{color:"text.secondary"},children:"Shipping"}),e.jsx(a,{sx:{width:160,...l&&{color:"error.main"}},children:l?`- ${f(l)}`:"-"})]}),e.jsxs(r,{direction:"row",children:[e.jsx(a,{sx:{color:"text.secondary"},children:"Discount"}),e.jsx(a,{sx:{width:160,...h&&{color:"error.main"}},children:h?`- ${f(h)}`:"-"})]}),e.jsxs(r,{direction:"row",children:[e.jsx(a,{sx:{color:"text.secondary"},children:"Taxes"}),e.jsx(a,{sx:{width:160},children:i?f(i):"-"})]}),e.jsxs(r,{direction:"row",sx:{typography:"subtitle1"},children:[e.jsx(a,{children:"Total"}),e.jsx(a,{sx:{width:160},children:f(p)||"-"})]})]});return e.jsxs(k,{children:[e.jsx(T,{title:"Details"}),e.jsxs(r,{sx:{px:3},children:[e.jsx($,{children:s.map(d=>e.jsxs(r,{direction:"row",alignItems:"center",sx:{py:3,minWidth:640,borderBottom:j=>`dashed 2px ${j.palette.background.neutral}`},children:[e.jsx(M,{src:d.coverUrl,variant:"rounded",sx:{width:48,height:48,mr:2}}),e.jsx(ie,{primary:d.name,secondary:d.sku,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),e.jsxs(a,{sx:{typography:"body2"},children:["x",d.quantity]}),e.jsx(a,{sx:{width:110,textAlign:"right",typography:"subtitle2"},children:f(d.price)})]},d.id))}),o]})]})}Ee.propTypes={discount:t.number,items:t.array,shipping:t.number,subTotal:t.number,taxes:t.number,totalAmount:t.number};function Ne({status:s,backLink:l,createdAt:h,orderNumber:i,statusOptions:n,onChangeStatus:p}){const o=z();return e.jsxs(e.Fragment,{children:[e.jsxs(r,{spacing:3,direction:{xs:"column",md:"row"},sx:{mb:{xs:3,md:5}},children:[e.jsxs(r,{spacing:1,direction:"row",alignItems:"flex-start",children:[e.jsx(y,{component:de,href:l,children:e.jsx(m,{icon:"eva:arrow-ios-back-fill"})}),e.jsxs(r,{spacing:.5,children:[e.jsxs(r,{spacing:1,direction:"row",alignItems:"center",children:[e.jsxs(I,{variant:"h4",children:[" Order ",i," "]}),e.jsx(_,{variant:"soft",color:s==="completed"&&"success"||s==="pending"&&"warning"||s==="cancelled"&&"error"||"default",children:s})]}),e.jsx(I,{variant:"body2",sx:{color:"text.disabled"},children:C(h)})]})]}),e.jsxs(r,{flexGrow:1,spacing:1.5,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[e.jsx(w,{color:"inherit",variant:"outlined",endIcon:e.jsx(m,{icon:"eva:arrow-ios-downward-fill"}),onClick:o.onOpen,sx:{textTransform:"capitalize"},children:s}),e.jsx(w,{color:"inherit",variant:"outlined",startIcon:e.jsx(m,{icon:"solar:printer-minimalistic-bold"}),children:"Print"}),e.jsx(w,{color:"inherit",variant:"contained",startIcon:e.jsx(m,{icon:"solar:pen-bold"}),children:"Edit"})]})]}),e.jsx(H,{open:o.open,onClose:o.onClose,arrow:"top-right",sx:{width:140},children:n.map(d=>e.jsx(P,{selected:d.value===s,onClick:()=>{o.onClose(),p(d.value)},children:d.label},d.value))})]})}Ne.propTypes={backLink:t.string,createdAt:t.instanceOf(Date),onChangeStatus:t.func,orderNumber:t.string,status:t.string,statusOptions:t.array};function We({history:s}){const l=e.jsxs(r,{spacing:2,component:G,variant:"outlined",sx:{p:2.5,minWidth:260,flexShrink:0,borderRadius:2,typography:"body2",borderStyle:"dashed"},children:[e.jsxs(r,{spacing:.5,children:[e.jsx(a,{sx:{color:"text.disabled"},children:"Order time"}),C(s.orderTime)]}),e.jsxs(r,{spacing:.5,children:[e.jsx(a,{sx:{color:"text.disabled"},children:"Payment time"}),C(s.orderTime)]}),e.jsxs(r,{spacing:.5,children:[e.jsx(a,{sx:{color:"text.disabled"},children:"Delivery time for the carrier"}),C(s.orderTime)]}),e.jsxs(r,{spacing:.5,children:[e.jsx(a,{sx:{color:"text.disabled"},children:"Completion time"}),C(s.orderTime)]})]}),h=e.jsx(De,{sx:{p:0,m:0,[`& .${Se.root}:before`]:{flex:0,padding:0}},children:s.timeline.map((i,n)=>{const p=n===0,o=n===s.timeline.length-1;return e.jsxs(Pe,{children:[e.jsxs(Ie,{children:[e.jsx(ke,{color:p&&"primary"||"grey"}),o?null:e.jsx(Re,{})]}),e.jsxs(Ae,{children:[e.jsx(I,{variant:"subtitle2",children:i.title}),e.jsx(a,{sx:{color:"text.disabled",typography:"caption",mt:.5},children:C(i.time)})]})]},i.title)})});return e.jsxs(k,{children:[e.jsx(T,{title:"History"}),e.jsxs(r,{spacing:3,alignItems:{md:"flex-start"},direction:{xs:"column-reverse",md:"row"},sx:{p:3},children:[h,l]})]})}We.propTypes={history:t.object};export{Ke as O,Ne as a,Ee as b,We as c,Le as d};
