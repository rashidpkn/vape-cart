import{r as i,a as M,j as e,c as p,q as x,F as se,m as ae,n as re,o as U,l as F,s as E,B as S,T as ie,w as m,p as v,ac as ne,a7 as q,ai as N,a9 as W,ad as oe,aj as le,G,ab as ce,y as de,d as ue,W as xe}from"./index-eab1947b.js";import"./custom-breadcrumbs-a2330046.js";import{F as he}from"./form-provider-f4e6b55d.js";import{p as pe,P as me,a as je,b as ge}from"./product-details-description-cbede7e7.js";import"./table-pagination-custom-d1b569d7.js";import"./confirm-dialog-5f31a474.js";import{P as be}from"./_product-55188478.js";import{u as fe}from"./use-params-982aa977.js";import{u as ve}from"./use-checkout-1da27e10.js";import{f as Q,c as ye}from"./format-number-4f65bcca.js";import{R as Pe}from"./use-carousel-9d6df009.js";import{C as we}from"./Card-4f9a49c9.js";import{T as Ce,a as Se}from"./Tabs-34a22f2e.js";import"./file-thumbnail-7bd312f2.js";import"./fade-295cf198.js";import"./transition-bee6630b.js";import"./image-72b5546f.js";import"./Checkbox-d0a439ca.js";import"./lightbox-d738a425.js";import"./TableRow-c5a0faf0.js";import"./yup-8351d28a.js";import"./DialogTitle-afc4f22b.js";import"./DialogContent-bf5a557b.js";import"./index-b9d9836e.js";import"./KeyboardArrowRight-f8f8542f.js";import"./LastPage-269454dd.js";function ke({cart:j,product:c,onAddCart:t,onGotoStep:y,disabledActions:P,setProduct:g,parentProduct:d={},...b}){const[n,a]=i.useState(1),k=M(),{id:T,name:w,regularPrice:D,quantity:o,salePrice:h,totalRatings:I,totalReviews:r,images:u,userId:z,type:R,subDescription:L,variations:O}=c,J=e.jsxs(p,{sx:{typography:"h5"},children:[e.jsx(p,{component:"span",sx:{color:"text.disabled",textDecoration:"line-through",mr:.5},children:Q(D)}),Q(h)]}),H=e.jsxs(x,{direction:"row",children:[e.jsx(F,{variant:"subtitle2",sx:{flexGrow:1},children:"Quantity"}),e.jsx(x,{spacing:1,children:e.jsxs(F,{variant:"caption",component:"div",sx:{textAlign:"right"},children:["Available: ",o||100]})})]}),Z=e.jsxs(x,{direction:"row",spacing:2,children:[e.jsxs(p,{sx:{width:{sm:"100%",md:"60%"}},display:"flex",justifyItems:"center",alignItems:"center",gap:1,children:[e.jsx(S,{variant:"outlined",color:"primary",onClick:()=>{a(s=>s<=1?1:s-1)},children:"-"}),e.jsx(ie,{fullWidth:!0,label:"Quantity",type:"number",inputProps:{min:1,max:o??100},onChange:s=>{a(C=>{const{value:l}=s.target;return l<=0?1:o?Math.min(o,l):Math.min(l,100)})},value:n}),e.jsx(S,{variant:"outlined",color:"primary",onClick:()=>{a(s=>s<o?s+1:s)},children:"+"})]}),e.jsx(S,{fullWidth:!0,size:"large",color:"warning",variant:"contained",startIcon:e.jsx(m,{icon:"solar:cart-plus-bold",width:24}),onClick:()=>{if(R==="Variable"&&!V){alert("Please choose a variable from the list.");return}t({id:T,name:w,price:h,images:u,subTotal:h,userId:z,quantity:n,available:o}),k(v.product.checkout)},sx:{width:{sm:"100%",md:"40%"}},children:"Add to Cart"})]}),K=!!L&&pe(L),X=e.jsxs(x,{direction:"row",alignItems:"center",sx:{color:"text.disabled",typography:"body2"},children:[e.jsx(Pe,{size:"small",value:I,precision:.1,readOnly:!0,sx:{mr:1}}),`(${ye(r)} reviews)`]}),[V,Y]=i.useState(""),_=e.jsx(p,{display:"flex",flexDirection:"column",gap:"10px",children:e.jsx(p,{children:e.jsxs(se,{fullWidth:!0,children:[e.jsx(ae,{id:"variations",children:"Select Variations"}),e.jsx(re,{labelId:"variations",label:"Select Variations",value:V,onChange:s=>{Y(s.target.value);const{track:C,quantity:l,regularPrice:A,salePrice:ee,image:B}=c.variations.find(f=>JSON.stringify(f.attributes)===JSON.stringify(s.target.value));let te=d.name+"-"+Object.keys(s.target.value).map(f=>s.target.value[f]).join("-"),$=d.images;B&&($=B),g(f=>({...f,track:C,quantity:l,regularPrice:A,salePrice:ee,name:te,images:$}))},children:O==null?void 0:O.map((s,C)=>e.jsxs(U,{value:s.attributes,children:[Object.keys(s.attributes).map(l=>l.replace(/([A-Z])/," $1").replace(/^./,A=>A.toUpperCase())+" : "+s.attributes[l]).join(", ")," "]},C))})]})})});return e.jsx(he,{children:e.jsxs(x,{spacing:3,sx:{pt:3},...b,children:[e.jsxs(x,{spacing:2,alignItems:"flex-start",children:[e.jsx(F,{variant:"h5",children:w}),X,R==="Variable"&&!!V&&h!==null&&J,K]}),e.jsx(E,{sx:{borderStyle:"dashed"}}),H,e.jsx(E,{sx:{borderStyle:"dashed"}}),R==="Variable"&&_,Z]})})}function Te({publish:j,backLink:c,editLink:t,liveLink:y,publishOptions:P,onChangePublish:g,sx:d,...b}){const n=ne();return e.jsxs(e.Fragment,{children:[e.jsxs(x,{spacing:1.5,direction:"row",sx:{mb:{xs:3,md:5},...d},...b,children:[e.jsx(S,{component:q,href:c,startIcon:e.jsx(m,{icon:"eva:arrow-ios-back-fill",width:16}),children:"Back"}),e.jsx(p,{sx:{flexGrow:1}}),j==="published"&&e.jsx(N,{title:"Go Live",children:e.jsx(W,{component:q,href:y,children:e.jsx(m,{icon:"eva:external-link-fill"})})}),e.jsx(N,{title:"Edit",children:e.jsx(W,{component:q,href:t,children:e.jsx(m,{icon:"solar:pen-bold"})})})]}),e.jsx(oe,{open:n.open,onClose:n.onClose,arrow:"top-right",sx:{width:140},children:P.map(a=>e.jsxs(U,{selected:a.value===j,onClick:()=>{n.onClose(),g(a.value)},children:[a.value==="published"&&e.jsx(m,{icon:"eva:cloud-upload-fill"}),a.value==="draft"&&e.jsx(m,{icon:"solar:file-text-bold"}),a.label]},a.value))})]})}function De(){const j=fe(),{id:c}=j,[t,y]=i.useState({}),P=M();i.useEffect(()=>{(async()=>{try{const{data:u}=await ue.get(`products/${c}`,{params:{count:1}});y(u)}catch(u){alert(u.response.data.message),P(v.dashboard.product.root)}})()},[c]);const g=le(),[d,b]=i.useState("reviews"),[n,a]=i.useState(""),{checkout:k,onAddCart:T,onGotoStep:w}=ve();i.useEffect(()=>{t&&a(t==null?void 0:t.publish)},[t]);const D=i.useCallback(r=>{a(r)},[]),o=i.useCallback((r,u)=>{b(u)},[]),h=e.jsx(ge,{}),I=t&&e.jsxs(e.Fragment,{children:[e.jsx(Te,{backLink:v.dashboard.product.root,editLink:v.dashboard.product.edit(`${t==null?void 0:t.id}`),liveLink:v.product.details(`${t==null?void 0:t.id}`),publish:n||"",onChangePublish:D,publishOptions:be}),e.jsxs(G,{container:!0,spacing:{xs:3,md:5,lg:8},children:[e.jsx(G,{xs:12,md:6,lg:7,children:t&&e.jsx(me,{product:t})}),e.jsx(G,{xs:12,md:6,lg:5,children:t&&e.jsx(ke,{disabledActions:!0,product:t,cart:k.cart,onAddCart:T,onGotoStep:w})})]}),e.jsxs(we,{children:[e.jsx(Ce,{value:d,onChange:o,sx:{px:3,boxShadow:r=>`inset 0 -2px 0 0 ${ce(r.palette.grey[500],.08)}`},children:[{value:"reviews",label:"Reviews (0)"}].map(r=>e.jsx(Se,{value:r.value,label:r.label},r.value))}),d==="reviews"&&e.jsx(je,{ratings:t.ratings,reviews:t.reviews,totalRatings:t.totalRatings,totalReviews:t.totalReviews})]})]});return e.jsxs(de,{maxWidth:g.themeStretch?!1:"lg",children:[!t&&h,t&&I]})}function tt(){return e.jsxs(e.Fragment,{children:[e.jsx(xe,{children:e.jsx("title",{children:" Dashboard: Product Details"})}),e.jsx(De,{})]})}export{tt as default};
